<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://aruul.github.io</id>
    <title>aRuulçš„æ— åå°ç«™</title>
    <updated>2021-05-04T09:07:54.106Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://aruul.github.io"/>
    <link rel="self" href="https://aruul.github.io/atom.xml"/>
    <subtitle>æ¸©æ•…è€ŒçŸ¥æ–°</subtitle>
    <logo>https://aruul.github.io/images/avatar.png</logo>
    <icon>https://aruul.github.io/favicon.ico</icon>
    <rights>All rights reserved 2021, aRuulçš„æ— åå°ç«™</rights>
    <entry>
        <title type="html"><![CDATA[javaåå°„(2)  åå°„è°ƒç”¨çš„æ€§èƒ½å’Œä¼˜åŒ–æ–¹æ¡ˆ]]></title>
        <id>https://aruul.github.io/post/L4U-TAPK3/</id>
        <link href="https://aruul.github.io/post/L4U-TAPK3/">
        </link>
        <updated>2021-05-04T08:51:02.000Z</updated>
        <content type="html"><![CDATA[<h2 id="åå°„è°ƒç”¨çš„æ€§èƒ½å’Œä¼˜åŒ–æ–¹æ¡ˆ">åå°„è°ƒç”¨çš„æ€§èƒ½å’Œä¼˜åŒ–æ–¹æ¡ˆ</h2>
<h3 id="å¯¹æ¯”">å¯¹æ¯”</h3>
<p>æ™®é€šæ–¹æ³•</p>
<pre><code class="language-java">    //æ™®é€šæ–¹æ³•
    public static void m1(){
        Cat cat = new Cat();

        long start = System.currentTimeMillis();

        for (int i = 0; i &lt; 90000000; i++) {
            cat.say();
        }

        long end = System.currentTimeMillis();
        System.out.println(&quot;æ™®é€šæ–¹æ³•æ‰§è¡Œæ—¶é—´ï¼š&quot;+(end-start));
    }
</code></pre>
<p>é€šè¿‡åå°„</p>
<pre><code class="language-java">//åå°„
    public static void m2() throws ClassNotFoundException, IllegalAccessException, InstantiationException, NoSuchMethodException, InvocationTargetException {

        Class aClass = Class.forName(&quot;org.example.Cat&quot;);
        Object o = aClass.newInstance();
        Method say = aClass.getMethod(&quot;say&quot;);

        long start = System.currentTimeMillis();

        for (int i = 0; i &lt; 90000000; i++) {
            say.invoke(o);
        }

        long end = System.currentTimeMillis();
        System.out.println(&quot;åå°„æœºåˆ¶æ‰§è¡Œæ—¶é—´ï¼š&quot;+(end-start));


    }
</code></pre>
<p>ä¸¤è€…è¿è¡Œæ—¶é—´å¯¹æ¯”</p>
<pre><code>æ™®é€šæ–¹æ³•æ‰§è¡Œæ—¶é—´ï¼š3 ms
åå°„æœºåˆ¶æ‰§è¡Œæ—¶é—´ï¼š175 ms
</code></pre>
<h3 id="ä¼˜åŒ–">ä¼˜åŒ–</h3>
<blockquote>
<p>åå°„è°ƒç”¨ä¼˜åŒ–-å…³é—­è®¿é—®æ£€æŸ¥</p>
<ol>
<li>Methodå’Œ Fieldã€ Constructorè±¡éƒ½æœ‰ setAccessible()æ–¹æ³•</li>
<li>setAccessible()ä½œç”¨æ˜¯å¯åŠ¨å’Œç¦ç”¨è®¿é—®å®‰å…¨æ£€æŸ¥çš„å¼€å…³<br>
3.å‚æ•°å€¼ä¸ºtrueè¡¨ç¤ºåå°„çš„å¯¹è±¡åœ¨ä½¿ç”¨æ—¶å–æ¶ˆè®¿å‘æ£€æŸ¥ï¼Œæé«˜åå°„çš„æ•ˆç‡ã€‚<br>
å‚æ•°å€¼ä¸º falseåˆ™è¡¨ç¤ºåå°„çš„å¯¹è±¡æ‰§è¡Œè®¿å‘æ£€æŸ¥</li>
</ol>
</blockquote>
<p>æ‰€ä»¥å¯ä»¥é€šè¿‡setAccessible()æ¥ä¼˜åŒ–åå°„ã€‚</p>
<p>å…¶å®å‘¢ï¼Œä¼˜åŒ–ä¹‹åæ•ˆç‡ä¹Ÿæ²¡æœ‰é«˜å‡ºå¾ˆå¤šã€‚</p>
<pre><code class="language-java">    //åå°„ä¼˜åŒ–
    public static void m3() throws ClassNotFoundException, IllegalAccessException, InstantiationException, NoSuchMethodException, InvocationTargetException {

        Class aClass = Class.forName(&quot;org.example.Cat&quot;);
        Object o = aClass.newInstance();
        Method say = aClass.getMethod(&quot;say&quot;);

        //å–æ¶ˆåœ¨åå°„è°ƒç”¨æ–¹æ³•æ—¶ å–æ¶ˆè®¿é—®æ£€æµ‹
        say.setAccessible(true);


        long start = System.currentTimeMillis();

        for (int i = 0; i &lt; 90000000; i++) {
            say.invoke(o);
        }

        long end = System.currentTimeMillis();
        System.out.println(&quot;åå°„ä¼˜åŒ–æœºåˆ¶æ‰§è¡Œæ—¶é—´ï¼š&quot;+(end-start));

    }
</code></pre>
<hr>
<p>æ‰§è¡Œç»“æœå¯¹æ¯”</p>
<pre><code>æ™®é€šæ–¹æ³•æ‰§è¡Œæ—¶é—´ï¼š3 ms
åå°„æœºåˆ¶æ‰§è¡Œæ—¶é—´ï¼š176 ms
åå°„ä¼˜åŒ–æœºåˆ¶æ‰§è¡Œæ—¶é—´ï¼š129 ms
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[java åå°„(1)--å¿«é€Ÿå¼€å§‹]]></title>
        <id>https://aruul.github.io/post/s8pJIRpaT/</id>
        <link href="https://aruul.github.io/post/s8pJIRpaT/">
        </link>
        <updated>2021-05-03T13:18:47.000Z</updated>
        <content type="html"><![CDATA[<h3 id="å¿«é€Ÿå¼€å§‹">å¿«é€Ÿå¼€å§‹</h3>
<h4 id="1ä»€ä¹ˆæ˜¯åå°„">1.ä»€ä¹ˆæ˜¯åå°„ï¼Ÿ</h4>
<p>å¦‚æœä½ ç ”ç©¶è¿‡æ¡†æ¶çš„åº•å±‚åŸç†æˆ–è€…å’±ä»¬è‡ªå·±å†™è¿‡æ¡†æ¶çš„è¯ï¼Œä¸€å®šå¯¹åå°„è¿™ä¸ªæ¦‚å¿µä¸é™Œç”Ÿã€‚</p>
<p>åå°„ä¹‹æ‰€ä»¥è¢«ç§°ä¸ºæ¡†æ¶çš„çµé­‚ï¼Œä¸»è¦æ˜¯å› ä¸ºå®ƒèµ‹äºˆäº†æˆ‘ä»¬åœ¨è¿è¡Œæ—¶åˆ†æç±»ä»¥åŠæ‰§è¡Œç±»ä¸­æ–¹æ³•çš„èƒ½åŠ›ã€‚</p>
<p>é€šè¿‡åå°„ä½ å¯ä»¥è·å–ä»»æ„ä¸€ä¸ªç±»çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•ï¼Œä½ è¿˜å¯ä»¥è°ƒç”¨è¿™äº›æ–¹æ³•å’Œå±æ€§ã€‚</p>
<p><strong>åå°„ (Reflection) æ˜¯ Java çš„ç‰¹å¾ä¹‹ä¸€ï¼Œå®ƒå…è®¸è¿è¡Œä¸­çš„ Java ç¨‹åºè·å–è‡ªèº«çš„ä¿¡æ¯ï¼Œå¹¶ä¸”å¯ä»¥æ“ä½œç±»æˆ–å¯¹è±¡çš„å†…éƒ¨å±æ€§ã€‚</strong></p>
<h4 id="2åå°„æœºåˆ¶ä¼˜ç¼ºç‚¹">2.åå°„æœºåˆ¶ä¼˜ç¼ºç‚¹</h4>
<ul>
<li><strong>ä¼˜ç‚¹</strong> ï¼š å¯ä»¥è®©å’±ä»¬çš„ä»£ç æ›´åŠ çµæ´»ã€ä¸ºå„ç§æ¡†æ¶æä¾›å¼€ç®±å³ç”¨çš„åŠŸèƒ½æä¾›äº†ä¾¿åˆ©</li>
<li><strong>ç¼ºç‚¹</strong> ï¼šè®©æˆ‘ä»¬åœ¨è¿è¡Œæ—¶æœ‰äº†åˆ†ææ“ä½œç±»çš„èƒ½åŠ›ï¼Œè¿™åŒæ ·ä¹Ÿå¢åŠ äº†å®‰å…¨é—®é¢˜ã€‚æ¯”å¦‚å¯ä»¥æ— è§†æ³›å‹å‚æ•°çš„å®‰å…¨æ£€æŸ¥ï¼ˆæ³›å‹å‚æ•°çš„å®‰å…¨æ£€æŸ¥å‘ç”Ÿåœ¨ç¼–è¯‘æ—¶ï¼‰ã€‚å¦å¤–ï¼Œåå°„çš„æ€§èƒ½ä¹Ÿè¦ç¨å·®ç‚¹ï¼Œä¸è¿‡ï¼Œå¯¹äºæ¡†æ¶æ¥è¯´å®é™…æ˜¯å½±å“ä¸å¤§çš„</li>
</ul>
<h4 id="3ç”±ä¸€ä¸ªä¾‹å­å¼•å‡ºåå°„">3.ç”±ä¸€ä¸ªä¾‹å­å¼•å‡ºåå°„</h4>
<h5 id="31éœ€æ±‚">3.1éœ€æ±‚</h5>
<blockquote>
<p>æ ¹æ®é…ç½®æ–‡ä»¶re. propertiesæŒ‡å®šä¿¡æ¯ï¼Œåˆ›å»ºCatè¿‡è±¡å¹¶è°ƒç”¨æ–¹æ³•say</p>
</blockquote>
<p>re. propertiesæ–‡ä»¶</p>
<pre><code class="language-properties">classfullpath=org.example.Cat
method=say
</code></pre>
<p>Cat</p>
<pre><code class="language-java">package org.example;

/**
 * @author aRu
 * @date 2021/5/3 10:01
 */
public class Cat {
    private String name = &quot;æ‹›è´¢çŒ«&quot;;
    public int age= 3;

    public Cat() {
    }

    public Cat(String name) {
        this.name = name;
    }

    public void say(){
        System.out.println(&quot;miao~ i am &quot;+name);
    }
}
</code></pre>
<p>å·¥ç¨‹ç›®å½•å¦‚ä¸‹ï¼Œæœ¬æ¬¡ä»£ç å†™åœ¨org.example.quickStart_01ä¸‹</p>
<figure data-type="image" tabindex="1"><img src="https://gitee.com/aruul/a-ru-img/raw/master/img/20210503213409.png" alt="image-20210503213403742" loading="lazy"></figure>
<h5 id="32å®ç°">3.2å®ç°</h5>
<pre><code class="language-java">package org.example.quickStart_01;

import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.lang.reflect.InvocationTargetException;
import java.lang.reflect.Method;
import java.util.Properties;

/**é—®é¢˜çš„å¼•å…¥
 * @author aRu
 * @date 2021/5/3 10:04
 */
public class ReflectionQuickStart {
    public static void main(String[] args) throws IOException, ClassNotFoundException, IllegalAccessException, InstantiationException, NoSuchMethodException, InvocationTargetException {
        //æ ¹æ®é…ç½®æ–‡ä»¶ åˆ›å»ºCatå¯¹è±¡å¹¶è°ƒç”¨ é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šçš„æ–¹æ³•

        //1.è¯»å–é…ç½®æ–‡ä»¶
        Properties properties = new Properties();
        properties.load(new FileInputStream(&quot;src\\org\\example\\re.properties&quot;));
        String classfullpath = properties.get(&quot;classfullpath&quot;).toString();
        String method = properties.get(&quot;method&quot;).toString();
        System.out.println(&quot;ç±»çš„å…¨è·¯å¾„ï¼š &quot;+classfullpath);
        System.out.println(&quot;æ–¹æ³•åï¼š &quot;+method);

        //2.ä½¿ç”¨åå°„æœºåˆ¶
        Class cls = Class.forName(classfullpath);
        //é€šè¿‡ cls å¾—åˆ°ä½ åŠ è½½çš„ç±» Catçš„å¯¹è±¡å®ä¾‹
        Object o = cls.newInstance();
        System.out.println(&quot;oçš„ç±»å‹ï¼š &quot;+o.getClass());
        //é€šè¿‡cls å¾—åˆ°ä½ åŠ è½½çš„ç±»Catçš„ method æ–¹æ³•
        Method method1 = cls.getMethod(method);
        //é€šè¿‡method1 è°ƒç”¨æ–¹æ³•ï¼š å³ï¼Œé€šè¿‡æ–¹æ³•å¯¹è±¡ æ¥å®ç°è°ƒç”¨æ–¹æ³•
        method1.invoke(o);
        

    }
}

</code></pre>
<hr>
<p>è¿è¡Œç»“æœ</p>
<pre><code>ç±»çš„å…¨è·¯å¾„ï¼š org.example.Cat
æ–¹æ³•åï¼š say
oçš„ç±»å‹ï¼š class org.example.Cat
miao~ i am æ‹›è´¢çŒ«
</code></pre>
<p>è¡¥å……</p>
<pre><code class="language-java">        //å¾—åˆ°ç±»çš„æˆå‘˜å˜é‡
        //æ³¨æ„ï¼š cls.getField(&quot;name&quot;)ä¸èƒ½å¾—åˆ°ç§æœ‰çš„å±æ€§
        Field nameField = cls.getField(&quot;age&quot;);
        System.out.println(nameField.get(o));

        //å¾—åˆ°å¯¹è±¡çš„æ„é€ å‡½æ•°
        Constructor constructor = cls.getConstructor();//()ä¸­å¯ä»¥æŒ‡å®šæ„é€ å‚æ•°ç±»å‹ï¼Œè¿™é‡Œæ²¡å†™ï¼Œåˆ™è¿”å›æ— å‚æ„é€ 
        System.out.println(&quot;æ— å‚æ„é€ ï¼š&quot;+constructor);

        Constructor constructor2 = cls.getConstructor(String.class);
        System.out.println(&quot;æœ‰å‚æ„é€ ï¼š&quot;+constructor2);
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[javaæ³¨è§£æµ…è°ˆ]]></title>
        <id>https://aruul.github.io/post/3NqPQbqyz/</id>
        <link href="https://aruul.github.io/post/3NqPQbqyz/">
        </link>
        <updated>2021-05-03T13:13:49.000Z</updated>
        <content type="html"><![CDATA[<h3 id="æ³¨è§£">æ³¨è§£</h3>
<hr>
<h4 id="å†…ç½®æ³¨è§£">å†…ç½®æ³¨è§£</h4>
<ul>
<li>
<p>@Override</p>
<p>è¡¨ç¤ºä¸€ä¸ªæ–¹æ³•å£°åæ‰“ç®—é‡å†™è¶…ç±»ä¸­çš„å¦ä¸€ä¸ªæ–¹æ³•å£°æ˜ã€‚</p>
</li>
<li>
<p>@Deprecated</p>
<p>è¡¨ç¤ºä¸é¼“åŠ±ç¨‹åºå‘˜ä½¿ç”¨è¿™æ ·çš„å…ƒç´ </p>
</li>
<li>
<p>@SuppressWarnings()</p>
<p>æŠ‘åˆ¶ç¼–è¯‘æ—¶çš„è­¦å‘Šä¿¡æ¯</p>
<p>å¦‚@SuppressWarnings(&quot;all&quot;)ç­‰</p>
<hr>
<h4 id="å…ƒæ³¨è§£">å…ƒæ³¨è§£</h4>
<p>é™¤äº†ç›´æ¥ä½¿ç”¨JDK å®šä¹‰å¥½çš„æ³¨è§£ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥è‡ªå®šä¹‰æ³¨è§£ï¼Œåœ¨JDK 1.5ä¸­æä¾›äº†4ä¸ªæ ‡å‡†çš„ç”¨æ¥å¯¹æ³¨è§£ç±»å‹è¿›è¡Œæ³¨è§£çš„æ³¨è§£ç±»ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸º meta-annotationï¼ˆå…ƒæ³¨è§£ï¼‰ï¼Œä»–ä»¬åˆ†åˆ«æ˜¯ï¼š</p>
</li>
<li>
<p>@Target</p>
<p>Targetæ³¨è§£çš„ä½œç”¨æ˜¯ï¼šæè¿°æ³¨è§£çš„ä½¿ç”¨èŒƒå›´ï¼ˆå³ï¼šè¢«ä¿®é¥°çš„æ³¨è§£å¯ä»¥ç”¨åœ¨ä»€ä¹ˆåœ°æ–¹</p>
</li>
<li>
<p>@Retention</p>
<p>Retenitonæ³¨è§£çš„ä½œç”¨æ˜¯ï¼šæè¿°æ³¨è§£ä¿ç•™çš„æ—¶é—´èŒƒå›´ï¼ˆå³ï¼šè¢«æè¿°çš„æ³¨è§£åœ¨å®ƒæ‰€ä¿®é¥°çš„ç±»ä¸­å¯ä»¥è¢«ä¿ç•™åˆ°ä½•æ—¶ï¼‰</p>
<p>Retenitonæ³¨è§£ç”¨æ¥é™å®šé‚£äº›è¢«å®ƒæ‰€æ³¨è§£çš„æ³¨è§£ç±»åœ¨æ³¨è§£åˆ°å…¶ä»–ç±»ä¸Šä»¥åï¼Œå¯è¢«ä¿ç•™åˆ°ä½•æ—¶ï¼Œä¸€å…±æœ‰ä¸‰ç§ç­–ç•¥ï¼Œå®šä¹‰åœ¨RetentionPolicyæšä¸¾ä¸­ã€‚</p>
<p><mark>RUNTIMEä¸€èˆ¬è¾ƒå¸¸ç”¨</mark></p>
<pre><code>SOURCE,    // æºæ–‡ä»¶ä¿ç•™
CLASS,       // ç¼–è¯‘æœŸä¿ç•™ï¼Œé»˜è®¤å€¼
RUNTIME   // è¿è¡ŒæœŸä¿ç•™ï¼Œå¯é€šè¿‡åå°„å»è·å–æ³¨è§£ä¿¡æ¯
</code></pre>
</li>
<li>
<p>@Documented</p>
<p>è¡¨ç¤ºæ˜¯å¦å°†æ³¨è§£ç”Ÿæˆåœ¨JavaDocä¸­</p>
</li>
<li>
<p>@Inherited</p>
<p>å­ç±»å¯ä»¥ç»§æ‰¿çˆ¶ç±»çš„æ³¨è§£</p>
</li>
</ul>
<p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¿™4ä¸ªå…ƒæ³¨è§£æ¥å¯¹æˆ‘ä»¬è‡ªå®šä¹‰çš„æ³¨è§£ç±»å‹è¿›è¡Œæ³¨è§£</p>
<hr>
<h4 id="è‡ªå®šä¹‰æ³¨è§£">è‡ªå®šä¹‰æ³¨è§£</h4>
<p>ä½¿ç”¨@interface</p>
<pre><code class="language-JAVA">//å®šä¹‰ä¸€ä¸ªæ³¨è§£
@Target(value = {ElementType.METHOD,ElementType.TYPE})  //è¡¨ç¤ºæ³¨è§£å¯ä»¥ç”¨åœ¨æ–¹æ³•ã€ç±»ä¸Š
@Retention(value = RetentionPolicy.RUNTIME)             //è¡¨ç¤ºæ³¨è§£åœ¨ä»€ä¹ˆæ—¶å€™æœ‰æ•ˆRUNTIME&gt;class&gt;sources
@Documented                                             //è¡¨ç¤ºæ˜¯å¦å°†æ³¨è§£ç”Ÿæˆåœ¨JavaDocä¸­
@Inherited                                              //å­ç±»å¯ä»¥ç»§æ‰¿çˆ¶ç±»çš„æ³¨è§£
public @interface MyAnnotation{

}
</code></pre>
<pre><code class="language-java">//å®šä¹‰ä¸€ä¸ªæ³¨è§£
@Target(value = {ElementType.METHOD,ElementType.TYPE})  //è¡¨ç¤ºæ³¨è§£å¯ä»¥ç”¨åœ¨æ–¹æ³•ã€ç±»ä¸Š
@Retention(value = RetentionPolicy.RUNTIME)             //è¡¨ç¤ºæ³¨è§£åœ¨ä»€ä¹ˆæ—¶å€™æœ‰æ•ˆRUNTIME&gt;class&gt;sources
@Documented                                             //è¡¨ç¤ºæ˜¯å¦å°†æ³¨è§£ç”Ÿæˆåœ¨JavaDocä¸­
@Inherited                                              //å­ç±»å¯ä»¥ç»§æ‰¿çˆ¶ç±»çš„æ³¨è§£
public @interface MyAnnotation{
    //æ³¨è§£çš„å‚æ•°ï¼š å‚æ•°ç±»å‹+å‚æ•°å()
    String name() default &quot;&quot;;  //default è¡¨ç¤ºé»˜è®¤å€¼  è¿™é‡Œæ˜¯é»˜è®¤å€¼ä¸ºç©º
    int age() default 0;
    int id() default -1;    //é»˜è®¤å€¼ä¸º-1ï¼Œä»£è¡¨ä¸å­˜åœ¨

    String [] schools();
}


@Target(value = {ElementType.METHOD,ElementType.TYPE})  //è¡¨ç¤ºæ³¨è§£å¯ä»¥ç”¨åœ¨æ–¹æ³•ã€ç±»ä¸Š
@Retention(value = RetentionPolicy.RUNTIME)             //è¡¨ç¤ºæ³¨è§£åœ¨ä»€ä¹ˆæ—¶å€™æœ‰æ•ˆRUNTIME&gt;class&gt;sources
public @interface MyAnnotation2{
    String value();  //å¦‚æœæ³¨è§£ä¸­åªæœ‰ä¸€ä¸ªå‚æ•°ï¼Œåˆ™å»ºè®®å®šä¹‰ä¸ºvalueï¼Œè¿™æ ·åœ¨ä½¿ç”¨çš„æ—¶å€™ç›´æ¥å†™  @MyAnnotation2(&quot;èµ‹å€¼&quot;)
}
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[ubuntu ngnixçš„å®‰è£…å’Œé…ç½®]]></title>
        <id>https://aruul.github.io/post/xeGoYob77/</id>
        <link href="https://aruul.github.io/post/xeGoYob77/">
        </link>
        <updated>2021-04-30T01:24:43.000Z</updated>
        <content type="html"><![CDATA[<h1 id="åŸºæœ¬æ¦‚å¿µ">åŸºæœ¬æ¦‚å¿µ</h1>
<h2 id="ä»€ä¹ˆæ˜¯-nginx">ä»€ä¹ˆæ˜¯ Nginx</h2>
<p>ä¸€ä¸ªé¡¹ç›®æˆ–å¹³å°ï¼Œç”¨æˆ·ä½¿ç”¨é‡å°‘ï¼Œå¹¶å‘é‡å°çš„æƒ…å†µä¸‹ï¼Œä¸€å° Tomcat æœåŠ¡å™¨å°±å¯ä»¥æ»¡è¶³éœ€æ±‚ã€‚ä½†å½“å¹³å°ç”¨æˆ·é‡å¢å¤šï¼Œå¹¶å‘é‡å¢å¤§æ—¶ï¼Œä¸€å° Tomcat æœåŠ¡å™¨å°±ä¸èƒ½å¤Ÿå¾ˆå¥½åœ°æ”¯æ’‘ã€‚äºæ˜¯å°±éœ€è¦åšæ¨ªå‘æ‰©å±•ï¼Œå¤šå¢åŠ å‡ å°æœåŠ¡å™¨ï¼Œå¹¶è®¾ç½®ä¸€ä¸ªä»£ç†æœåŠ¡å™¨ã€‚ç”¨æˆ·å¦‚æœè¦è®¿é—®å¹³å°é¦–å…ˆä¼šç»è¿‡ä»£ç†æœåŠ¡å™¨ï¼Œä»£ç†æœåŠ¡å™¨å®ç°å¤„ç†ç”¨æˆ·çš„è¯·æ±‚å’Œè½¬å‘åˆ°çœŸå®æœåŠ¡å™¨ï¼Œä¹Ÿå°±æ˜¯åå‘ä»£ç†ã€‚åœ¨åšæ¨ªå‘æ‰©å±•åï¼Œæ¯å°æœåŠ¡å™¨çš„å¤§å°ã€æ€§èƒ½å¯èƒ½å„ä¸ç›¸åŒã€‚ä»£ç†æœåŠ¡å™¨éœ€è¦æ ¹æ®ç”¨æˆ·çš„è¯·æ±‚ï¼ŒæœåŠ¡å™¨çš„çŠ¶æ€ç­‰å®é™…æƒ…å†µå®ç°é€‰æ‹©å’Œè½¬å‘ï¼Œä¹Ÿå°±æ˜¯è´Ÿè½½å‡è¡¡ã€‚<br>
<img src="https://kuangstudy.oss-cn-beijing.aliyuncs.com/bbs/2021/04/23/kuangstudybda5ac84-227d-47b9-8711-d19567828c6d.png" alt="img" loading="lazy"><br>
Nginxï¼ˆ engine x ï¼‰æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„ HTTP å’Œåå‘ä»£ç† web æœåŠ¡å™¨ã€‚<br>
Nginx ç‰¹ç‚¹æ˜¯å ç”¨å†…å­˜å°‘ï¼Œå¹¶å‘èƒ½åŠ›å¼ºã€‚1M å·¦å³çš„å†…å­˜æ”¯æŒé«˜è¾¾ 50000 ä¸ªå¹¶å‘è¿æ¥æ•°çš„å“åº”ï¼Œè€Œ Tomcat åªæ”¯æŒ 500~600 ä¸ªå“åº”ã€‚<br>
Nginx å®‰è£…ç®€å•ï¼Œé…ç½®æ–‡ä»¶ç®€æ´ï¼Œå¯åŠ¨å®¹æ˜“ä¸”èƒ½æŒç»­è¿è¡Œã€‚<br>
Nginx çš„ä½œç”¨ç®€å•æ¥è¯´å°±æ˜¯åå‘ä»£ç†å’Œè´Ÿè½½å‡è¡¡ã€‚</p>
<h2 id="æ­£å‘ä»£ç†å’Œåå‘ä»£ç†">æ­£å‘ä»£ç†å’Œåå‘ä»£ç†</h2>
<p>æ­£å‘ä»£ç†åŸºäºå®¢æˆ·ç«¯ï¼Œä»£ç†å®¢æˆ·ç«¯ï¼Œæ˜¯ä¸€ç§ä¸»åŠ¨åœ°è¡Œä¸ºã€‚æ¯”å¦‚ä½¿ç”¨ VPN è®¿é—®å¤–ç½‘ï¼Œç”¨æˆ·éœ€è¦æ‰‹åŠ¨é€‰æ‹©é¦™æ¸¯ã€æ—¥æœ¬æˆ–ç¾å›½çš„èŠ‚ç‚¹ï¼Œé€šè¿‡èŠ‚ç‚¹è½¬å‘åˆ°å¤–ç½‘æœåŠ¡å™¨ï¼Œè¿™äº›èŠ‚ç‚¹ä»£ç†äº†å¤–ç½‘çš„æœåŠ¡å™¨ã€‚<br>
<img src="https://kuangstudy.oss-cn-beijing.aliyuncs.com/bbs/2021/04/23/kuangstudy872b3db7-d641-4ef7-9811-73a748fd1c27.png" alt="img" loading="lazy"><br>
åå‘ä»£ç†åŸºäºæœåŠ¡ç«¯ï¼Œä»£ç†æœåŠ¡ç«¯ï¼Œæ˜¯ä¸€ç§è¢«åŠ¨åœ°è¡Œä¸ºã€‚æ¯”å¦‚è®¿é—®ç™¾åº¦ï¼Œç™¾åº¦çš„æœåŠ¡å™¨å¯èƒ½ä¸åœ¨åŒä¸€ä¸ªåœ°æ–¹ï¼Œä½†æ˜¯ç”¨æˆ·å¯ä»¥é€šè¿‡è®¿é—®ç™¾åº¦çš„åŸŸå www.baidu.comï¼Œç”±ä»£ç†æœåŠ¡å™¨å®ç°è½¬å‘ï¼Œè¿™ä¸ªè¿‡ç¨‹ç”¨æˆ·æ˜¯æ— æ„ŸçŸ¥çš„ã€‚<br>
<img src="https://kuangstudy.oss-cn-beijing.aliyuncs.com/bbs/2021/04/23/kuangstudyeacfb3ba-66bf-467e-b414-33bd466b046c.png" alt="img" loading="lazy"></p>
<h2 id="è´Ÿè½½å‡è¡¡">è´Ÿè½½å‡è¡¡</h2>
<p>Nginx æä¾›çš„è´Ÿè½½å‡è¡¡ç­–ç•¥æœ‰ 2 ç§ï¼šå†…ç½®ç­–ç•¥å’Œæ‰©å±•ç­–ç•¥ã€‚å†…ç½®ç­–ç•¥åˆ†ä¸ºè½®è¯¢ï¼ŒåŠ æƒè½®è¯¢ï¼ŒIp hashã€‚æ‰©å±•ç­–ç•¥ç”±ç¨‹åºå‘˜è‡ªè¡Œåˆ›é€ ã€‚<br>
è½®è¯¢<br>
<img src="https://kuangstudy.oss-cn-beijing.aliyuncs.com/bbs/2021/04/23/kuangstudy33a6e959-9de6-4361-9452-63add93d36db.png" alt="img" loading="lazy"><br>
åŠ æƒè½®è¯¢<br>
<img src="https://kuangstudy.oss-cn-beijing.aliyuncs.com/bbs/2021/04/23/kuangstudyce51f657-9c95-44eb-a473-46b12f3e173c.png" alt="img" loading="lazy"><br>
Ip hash<br>
<img src="https://kuangstudy.oss-cn-beijing.aliyuncs.com/bbs/2021/04/23/kuangstudy8406dd2c-6596-4292-8890-3423e095f28f.png" alt="img" loading="lazy"><br>
åŠ¨é™åˆ†ç¦»<br>
ä¸€ä¸ªé¡¹ç›®ä¸­ï¼Œæœ‰äº›è¯·æ±‚éœ€è¦åå°å¤„ç†ï¼Œè€Œæœ‰äº›è¯·æ±‚ä¸éœ€è¦åå°å¤„ç†ï¼Œå¦‚ HTMLã€CSSã€JavaScript ç­‰æ–‡ä»¶ï¼Œè¿™äº›æ–‡ä»¶ç»Ÿç§°ä¸ºé™æ€èµ„æºã€‚åœ¨å¼€å‘ä¸­å°†ä¸ç»å¸¸å˜åŠ¨åœ°èµ„æºä¸ç»å¸¸å˜åŠ¨åœ°èµ„æºåˆ†ç¦»ï¼Œå°†è¿™äº›é™æ€èµ„æºç¼“å­˜åˆ°æœ¬åœ° Nginx ä¸­ï¼Œç”± Nginx ç›´æ¥è¿”å›ï¼Œå¯ä»¥å¤§å¤§æé«˜èµ„æºå“åº”çš„é€Ÿåº¦å’Œç½‘é¡µçš„å¥å£®æ€§ã€‚<br>
<img src="https://kuangstudy.oss-cn-beijing.aliyuncs.com/bbs/2021/04/23/kuangstudy4ffdae63-5189-4289-b465-94b1be9e731d.png" alt="img" loading="lazy"></p>
<hr>
<h1 id="nginx-å®‰è£…">Nginx å®‰è£…</h1>
<p>1ã€ä¸‹è½½ nginxã€‚<br>
ä¸‹è½½ Linux å®‰è£…åŒ…ï¼Œä½¿ç”¨<code>tar -zxvf</code>å‘½ä»¤è§£å‹åˆ°å¯¹åº”çš„ç›®å½•å³å¯ã€‚<br>
<img src="https://kuangstudy.oss-cn-beijing.aliyuncs.com/bbs/2021/04/23/kuangstudy2700bc18-8194-43ba-aa31-6fbb78906ed1.png" alt="img" loading="lazy"><br>
2ã€å®‰è£… nginx æ‰€éœ€ä¾èµ–ã€‚</p>
<pre><code>yum install gcc-c++
yum install -y pcre pcre-devel
yum install -y openssl openssl-devel
</code></pre>
<p>3ã€è¿›å…¥ nginx ç›®å½•ï¼Œæ‰§è¡Œä»¥ä¸‹ä¸¤ä¸ªå‘½ä»¤ã€‚</p>
<pre><code>./configuremake install
</code></pre>
<p>4ã€æŸ¥æ‰¾ nginx å®‰è£…è·¯å¾„å¹¶è¿›å…¥ã€‚<br>
<img src="https://kuangstudy.oss-cn-beijing.aliyuncs.com/bbs/2021/04/23/kuangstudyf7a7e81f-7e8c-49af-a17a-b2a5794fb73c.png" alt="img" loading="lazy"><br>
5ã€å¯åŠ¨ nginxã€‚</p>
<pre><code>./nginx
</code></pre>
<p><img src="https://kuangstudy.oss-cn-beijing.aliyuncs.com/bbs/2021/04/23/kuangstudycedd22d3-3f9a-4672-8262-403135731260.png" alt="img" loading="lazy"><br>
6ã€æŸ¥çœ‹ nginx é…ç½®æ–‡ä»¶.<br>
<img src="https://kuangstudy.oss-cn-beijing.aliyuncs.com/bbs/2021/04/23/kuangstudyda8d055d-e44a-45f3-937e-6c9eefc4877a.png" alt="img" loading="lazy"><br>
<img src="https://kuangstudy.oss-cn-beijing.aliyuncs.com/bbs/2021/04/23/kuangstudy47e6db4a-df2b-43a9-a501-47e1e2fbc1df.png" alt="img" loading="lazy"><br>
7ã€æ£€æŸ¥ nginx æ˜¯å¦å¯åŠ¨æˆåŠŸã€‚<br>
è®¿é—® æœåŠ¡å™¨ ip:80ï¼Œå¦‚æœå‡ºç°ä»¥ä¸‹ç”»é¢åˆ™è¯´æ˜ nginx å¯åŠ¨æˆåŠŸã€‚<br>
<img src="https://kuangstudy.oss-cn-beijing.aliyuncs.com/bbs/2021/04/23/kuangstudy5d020ccc-718c-4774-a07b-70168482f697.png" alt="img" loading="lazy"><br>
å¦‚æœè®¿é—®å¤±è´¥ï¼Œæ£€æŸ¥æœåŠ¡å™¨é˜²ç«å¢™å’Œé˜¿é‡Œäº‘å®‰å…¨ç»„çš„ç«¯å£æ˜¯å¦å¼€å¯ã€‚</p>
<hr>
<h1 id="nginx-å¸¸ç”¨å‘½ä»¤">Nginx å¸¸ç”¨å‘½ä»¤</h1>
<pre><code class="language-java">cd /usr/local/nginx/sbin/
./nginx  å¯åŠ¨
./nginx -s stop  åœæ­¢
./nginx -s quit  å®‰å…¨é€€å‡º
# reloadå‘½ä»¤ååˆ†å¸¸ç”¨ï¼Œå¦‚æœåœ¨çº¿ä¸Šéƒ¨ç½²çš„æ—¶å€™æƒ³è¦æ›´æ”¹é…ç½®æ–‡ä»¶ï¼Œå®Œæˆåç›´æ¥ä½¿ç”¨reloadå°±å¯ä»¥å¿«é€Ÿé‡æ–°åŠ è½½ã€‚
./nginx -s reload  é‡æ–°åŠ è½½é…ç½®æ–‡ä»¶
ps aux|grep nginx  æŸ¥çœ‹nginxè¿›ç¨‹
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[LC15å‡ºç°ä¸€æ¬¡çš„æ•°å­—]]></title>
        <id>https://aruul.github.io/post/AyhAIG8Q_/</id>
        <link href="https://aruul.github.io/post/AyhAIG8Q_/">
        </link>
        <updated>2021-04-29T14:19:06.000Z</updated>
        <content type="html"><![CDATA[<h2 id="é¢˜ç›®æè¿°">é¢˜ç›®æè¿°</h2>
<p>ç°åœ¨æœ‰ä¸€ä¸ªæ•´æ•°ç±»å‹çš„æ•°ç»„ï¼Œæ•°ç»„ä¸­ç´ åªæœ‰ä¸€ä¸ªå…ƒç´ åªå‡ºç°ä¸€æ¬¡ï¼Œå…¶ä½™çš„å…ƒç´ éƒ½å‡ºç°ä¸¤æ¬¡ã€‚</p>
<p><strong>æ³¨æ„ï¼š</strong></p>
<p>ä½ éœ€è¦ç»™å‡ºä¸€ä¸ªçº¿æ€§æ—¶é—´å¤æ‚åº¦çš„ç®—æ³•ï¼Œä½ èƒ½åœ¨ä¸ä½¿ç”¨é¢å¤–å†…å­˜ç©ºé—´çš„æƒ…å†µä¸‹è§£å†³è¿™ä¸ªé—®é¢˜ä¹ˆï¼Ÿ</p>
<p>ç¤ºä¾‹1</p>
<h2 id="è¾“å…¥">è¾“å…¥</h2>
<p>[å¤åˆ¶](javascript:void(0)ğŸ˜‰</p>
<pre><code>[1,0,1]
</code></pre>
<h2 id="è¿”å›å€¼">è¿”å›å€¼</h2>
<p>[å¤åˆ¶](javascript:void(0)ğŸ˜‰</p>
<pre><code>0
</code></pre>
<hr>
<h4 id="æœ¬èœé¸¡çš„è§£é¢˜ä»£ç ">æœ¬èœé¸¡çš„è§£é¢˜ä»£ç </h4>
<p>å¤§æ¦‚æ€è·¯æ˜¯æš´åŠ›å¯¹æ¯”ï¼Œæš´åŠ›å°±å®Œäº‹äº†ã€‚</p>
<p>äºŒé‡å¾ªç¯ï¼Œå…ˆæå‰åœ¨å¤–å±‚å¾ªç¯è®¾å®šä¸€ä¸ªåˆå§‹æ ‡å¿—ï¼Œä¸º0ï¼Œ</p>
<p>å†…å­˜å¾ªç¯ ï¼Œå¦‚æœæ‰¾åˆ°ç›¸åŒçš„ï¼Œåˆ™å°†æ ‡å¿—è®¾ä¸º1ã€‚</p>
<p>å¤–å±‚åœ¨æ ¹æ®æ ‡å¿—åˆ¤æ–­æ˜¯å¦æ‰¾åˆ°ç›¸åŒçš„ï¼Œå¦åˆ™è¿”å›å‡ºä¸åŒçš„å€¼ã€‚</p>
<pre><code class="language-java">public class Solution {
    /**
     * 
     * @param A intæ•´å‹ä¸€ç»´æ•°ç»„ 
     * @return intæ•´å‹
     */
    public int singleNumber (int[] A) {
        // write code here
        for (int i = 0; i&lt;A.length ;i++) {
            int hasSame=0;
            for (int j = 0; j&lt;A.length; j++){
                if(i==j){
                    System.out.println(&quot;ç›¸åŒç´¢å¼•  A[&quot;+i+&quot;]=&quot;+A[i]+&quot; ,i=&quot;+i+&quot;, j=&quot;+j);
                    continue;
                }
                if(A[i]==A[j]){
                    hasSame=1;
                    break;
                }
            }
            if(hasSame==0){
                return A[i];
            }
        }
        return 0;
    }
}
</code></pre>
<hr>
<h3 id="å¤§ä½¬çš„ä»£ç ">å¤§ä½¬çš„ä»£ç </h3>
<blockquote>
<p>é“¾æ¥ï¼šhttps://www.nowcoder.com/questionTerminal/0bc646909e474ac5b031ec6836a47768<br>
æ¥æºï¼šç‰›å®¢ç½‘</p>
</blockquote>
<p>æ ¹æ®å¼‚æˆ–è¿ç®—ç‰¹ç‚¹ï¼š</p>
<p>ä¸¤ä¸ªç›¸åŒçš„æ•°è¿›è¡Œå¼‚æˆ–ï¼Œç»“æœä¸º0</p>
<pre><code class="language-java">	public static int singleNumber(int[] A) {
		int num = 0;
		for(int i=0;i&lt;A.length;i++){
			num^=A[i];
		}
		return num;
	}
</code></pre>
<p>å…¶å®åªè¦è®°ä½ï¼š</p>
<p>â€‹    1.å¼‚æˆ–æ»¡è¶³äº¤æ¢å¾‹ã€‚</p>
<p>â€‹    2.ç›¸åŒä¸¤ä¸ªæ•°å¼‚æˆ–ä¸º0ã€‚</p>
<p>â€‹    3.0å¼‚æˆ–ä¸€ä¸ªæ•°ä¸ºé‚£ä¸ªæ•°æœ¬èº«ã€‚</p>
<p>æœ€åç»“æœå³å‡ºç°1æ¬¡çš„é‚£ä¸ªæ•°ã€‚</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[é˜¿é‡Œäº‘https]]></title>
        <id>https://aruul.github.io/post/j3kVP0ZjV/</id>
        <link href="https://aruul.github.io/post/j3kVP0ZjV/">
        </link>
        <updated>2021-04-29T09:49:08.000Z</updated>
        <content type="html"><![CDATA[<h3 id="1ç™½å«–é˜¿é‡Œäº‘sslè¯ä¹¦">1.ç™½å«–é˜¿é‡Œäº‘sslè¯ä¹¦</h3>
<ul>
<li><a href="https://common-buy.aliyun.com/?spm=5176.15089375.J_5834642020.3.360f65c3prTSPX&amp;commodityCode=cas_dv_public_cn&amp;request=%7B%22ord_time%22:%221:Year%22,%22order_num%22:1,%22product%22:%22cert_product%22,%22domain%22:%22all%22,%22productCode%22:%22symantec-dv-1-starter%22,%22service_num%22:2%7D">è¿›å…¥è´­ä¹°ç½‘å€</a></li>
<li>é€‰æ‹©å¦‚ä¸‹å›¾æ‰€ç¤º</li>
</ul>
<figure data-type="image" tabindex="1"><img src="https://gitee.com/aruul/a-ru-img/raw/master/img/20210429170518.png" alt="image-20210429170510021" loading="lazy"></figure>
<ul>
<li>ç‚¹å‡»è´­ä¹°</li>
</ul>
<h3 id="2æ§åˆ¶å°è¯ä¹¦ç”³è¯·">2.æ§åˆ¶å°è¯ä¹¦ç”³è¯·</h3>
<p>æ¯•ç«Ÿæ˜¯å…è´¹çš„ï¼Œæ‰€ä»¥æœ‰ç‚¹éº»çƒ¦ï¼Œä¹°äº†ä¹‹åè¿˜è¦å»sslæ§åˆ¶å°å»ç”³è¯·ï¼Œ   <a href="https://yundun.console.aliyun.com/?p=cas#/certExtend">SSLæ§åˆ¶å°</a></p>
<ul>
<li>é€‰æ‹©å³ä¾§çš„SSLè¯ä¹¦------ã€‹å†ç‚¹å‡»è¯ä¹¦ç”³è¯·</li>
</ul>
<figure data-type="image" tabindex="2"><img src="https://gitee.com/aruul/a-ru-img/raw/master/img/20210429171100.png" alt="image-20210429171051664" loading="lazy"></figure>
<ul>
<li>
<p>å¼¹å‡ºå¦‚ä¸‹ç•Œé¢ï¼Œç‚¹å‡»ç¡®è®¤</p>
<img src="https://gitee.com/aruul/a-ru-img/raw/master/img/20210429171318.png" alt="image-20210429171314073" style="zoom: 67%;" />
</li>
<li>
<p>è¯ä¹¦ç”³è¯·ä¹‹åï¼Œç‚¹å‡»ã€å…è´¹è¯ä¹¦ã€‘</p>
</li>
</ul>
<figure data-type="image" tabindex="3"><img src="https://gitee.com/aruul/a-ru-img/raw/master/img/20210429171555.png" alt="image-20210429171553744" loading="lazy"></figure>
<ul>
<li>
<p>å†ç‚¹å‡»è¯ä¹¦ç”³è¯·ï¼Œå†å¼¹å‡ºçš„é¡µé¢ä¸­å¡«å†™ä¸ªäººä¿¡æ¯å³å¯ï¼Œä¹‹åå†ç‚¹å‡»éªŒè¯ï¼ŒéªŒè¯æˆåŠŸåå°±å¯ä»¥é¢†è¯ä¹¦äº†</p>
</li>
<li>
<p>ä¹‹åå†æ ¹æ®è‡ªå·±çš„æƒ…å†µä¸‹è½½å¯¹åº”çš„è¯ä¹¦</p>
</li>
</ul>
<hr>
<h3 id="3nginxé…ç½®https">3.nginxé…ç½®https</h3>
<p>åœ¨é˜¿é‡Œäº‘åœ¨ç‚¹å‡»è¯ä¹¦ä¸‹è½½çš„æ—¶å€™ä¼šæœ‰ç›¸å…³çš„æ–‡æ¡£ï¼Œæˆ‘è¿™é‡Œé…ç½®çš„æ˜¯nginx</p>
<figure data-type="image" tabindex="4"><img src="https://gitee.com/aruul/a-ru-img/raw/master/img/20210429172922.png" alt="image-20210429172920399" loading="lazy"></figure>
<p>ä¸‹è½½è¯ä¹¦åå°†å…¶ä¸Šä¼ çš„nginxçš„é…ç½®æ–‡ä»¶confæ ¹ç›®å½•ä¸­ï¼Œå¯ä»¥å»ºç«‹ä¸€ä¸ªcertæ–‡ä»¶å¤¹ï¼Œç„¶åæ”¾å…¥ã€‚</p>
<p>æ¥ç€åœ¨é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ä¸€ä¸ªæ–°çš„server</p>
<pre><code class="language-xml">#ä»¥ä¸‹å±æ€§ä¸­ä»¥sslå¼€å¤´çš„å±æ€§ä»£è¡¨ä¸è¯ä¹¦é…ç½®æœ‰å…³ï¼Œå…¶ä»–å±æ€§è¯·æ ¹æ®è‡ªå·±çš„éœ€è¦è¿›è¡Œé…ç½®ã€‚
server {
         listen 443 ssl; #é…ç½®HTTPSçš„é»˜è®¤è®¿é—®ç«¯å£å·ä¸º443ã€‚æ­¤å¤„å¦‚æœæœªé…ç½®HTTPSçš„é»˜è®¤è®¿é—®ç«¯å£ï¼Œå¯èƒ½ä¼šé€ æˆNginxæ— æ³•å¯åŠ¨ã€‚Nginx 1.15.0ä»¥ä¸Šç‰ˆæœ¬è¯·ä½¿ç”¨listen 443 sslä»£æ›¿listen 443å’Œssl onã€‚
         server_name www.certificatestests.com; #å°†www.certificatestests.comä¿®æ”¹ä¸ºæ‚¨è¯ä¹¦ç»‘å®šçš„åŸŸåï¼Œä¾‹å¦‚ï¼šwww.example.comã€‚å¦‚æœæ‚¨è´­ä¹°çš„æ˜¯é€šé…ç¬¦åŸŸåè¯ä¹¦ï¼Œè¦ä¿®æ”¹ä¸ºé€šé…ç¬¦åŸŸåï¼Œä¾‹å¦‚ï¼š*.aliyun.comã€‚
         root html;
         index index.html index.htm;
         ssl_certificate cert/domain name.pem;  #å°†domain name.pemæ›¿æ¢æˆæ‚¨è¯ä¹¦çš„æ–‡ä»¶åç§°ã€‚
         ssl_certificate_key cert/domain name.key; #å°†domain name.keyæ›¿æ¢æˆæ‚¨è¯ä¹¦çš„å¯†é’¥æ–‡ä»¶åç§°ã€‚
         ssl_session_timeout 5m;
         ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4; #ä½¿ç”¨æ­¤åŠ å¯†å¥—ä»¶ã€‚
         ssl_protocols TLSv1 TLSv1.1 TLSv1.2; #ä½¿ç”¨è¯¥åè®®è¿›è¡Œé…ç½®ã€‚
         ssl_prefer_server_ciphers on;
         location / {
         	root html;  #ç«™ç‚¹ç›®å½•ã€‚
         	index index.html index.htm;
         }
}
</code></pre>
<p><mark>æ³¨æ„å¼€å¯443ç«¯å£å“ˆ</mark></p>
<h4 id="3-1-å¯èƒ½å‡ºç°çš„é”™è¯¯">3. 1 å¯èƒ½å‡ºç°çš„é”™è¯¯</h4>
<pre><code class="language-xml">the &quot;ssl&quot; parameter requires ngx_http_ssl_module
</code></pre>
<p>åŸå› æ˜¯åœ¨ä½ è£…nginxçš„æ—¶å€™æ²¡æœ‰é…ç½®SSLæ¨¡å—</p>
<p><strong>è¯´æ˜ï¼šæˆ‘çš„nginxå®‰è£…ç›®å½•ä¸ºï¼š/usr/local/nginx ï¼Œ æºç åŒ…åœ¨/usr/src/nginx-1.8.0ç›®å½•</strong></p>
<h4 id="nginxå¼€å¯sslæ¨¡å—">Nginxå¼€å¯SSLæ¨¡å—ï¼š</h4>
<p>åˆ‡æ¢åˆ°æºç åŒ…ï¼š<br>
<code>cd /usr/src/nginx-1.8.0</code></p>
<p>æŸ¥çœ‹nginxåŸæœ‰çš„æ¨¡å—<br>
<code>/usr/local/nginx/sbin/nginx -V</code></p>
<p>åœ¨configure arguments:åé¢æ˜¾ç¤ºçš„åŸæœ‰çš„configureå‚æ•°å¦‚ä¸‹ï¼š<br>
<code>--prefix=/usr/local/nginx --with-http_stub_status_module</code></p>
<h4 id="äºŒä»æ–°é…ç½®sslæ¨¡å—">äºŒï¼šä»æ–°é…ç½®SSLæ¨¡å—ï¼š</h4>
<p>è¿›å…¥nginxæºç åŒ…ç›®å½•ï¼Œè¿è¡Œï¼š<br>
<code>./configure --prefix=/usr/local/nginx --with-http_stub_status_module --with-http_ssl_module</code></p>
<p>é…ç½®å®Œæˆåï¼Œè¿è¡Œå‘½ä»¤makeå‘½ä»¤ï¼š</p>
<h4 id="make">make</h4>
<p>æ³¨æ„ï¼šæ­¤å¤„ä¸èƒ½è¿›è¡Œmake installï¼Œå¦åˆ™å°±æ˜¯è¦†ç›–å®‰è£…</p>
<h4 id="ä¸‰æ›¿æ¢å·²å®‰è£…å¥½çš„nginxåŒ…">ä¸‰ï¼šæ›¿æ¢å·²å®‰è£…å¥½çš„nginxåŒ…</h4>
<p>æ›¿æ¢ä¹‹å‰å…ˆå¤‡ä»½ï¼š<br>
<code>cp /usr/local/nginx/sbin/nginx /usr/local/nginx/sbin/nginx.bak</code></p>
<h4 id="å…ˆåœæ­¢nginxæœåŠ¡">å…ˆåœæ­¢nginxæœåŠ¡ï¼š</h4>
<p>//æŸ¥è¯¢nginxä¸»è¿›ç¨‹å·<br>
<code>$ ps -ef | grep nginx</code></p>
<p>//ä»å®¹åœæ­¢Nginxï¼š<br>
<code>$kill -QUIT ä¸»è¿›ç¨‹å·</code></p>
<p>//å¿«é€Ÿåœæ­¢Nginxï¼š<br>
<code>kill -TERM ä¸»è¿›ç¨‹å·</code></p>
<p>//å¼ºåˆ¶åœæ­¢Nginxï¼š<br>
<code>pkill -9 nginx</code><br>
å°†åˆšåˆšç¼–è¯‘å¥½çš„nginxè¦†ç›–æ‰åŸæœ‰çš„nginx</p>
<p><code>cp ./objs/nginx /usr/local/nginx/sbin/</code><br>
ç„¶åå¯åŠ¨nginxï¼Œä»å¯ä»¥é€šè¿‡å‘½ä»¤æŸ¥çœ‹æ˜¯å¦å·²ç»åŠ å…¥æˆåŠŸ</p>
<pre><code>/usr/local/nginx/sbin/nginx -V
</code></pre>
<p>æ­¤æ—¶åº”è¯¥æ˜¾ç¤ºä¸ºå³é…ç½®æˆåŠŸï¼š<br>
<code>configure arguments: --prefix=/usr/local/nginx --with-http_stub_status_module --with-http_ssl_module</code></p>
<hr>
<p>ä¹‹åç…§å¸¸å¼€å¯nginxå³å¯</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[æ–°çš„å¼€å§‹]]></title>
        <id>https://aruul.github.io/post/newbegain/</id>
        <link href="https://aruul.github.io/post/newbegain/">
        </link>
        <updated>2021-04-11T01:41:56.000Z</updated>
        <content type="html"><![CDATA[<p>ä»Šå¤©å¼€å§‹ä½¿ç”¨Grideaå†™åšå®¢è¾£ï¼<br>
ä¹‹å‰çš„åšå®¢ä¼šé™†ç»­è¡¥ä¸Šæ¥çš„ã€‚</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[SSMæ•´åˆ]]></title>
        <id>https://aruul.github.io/post/0PVi5Fwu4/</id>
        <link href="https://aruul.github.io/post/0PVi5Fwu4/">
        </link>
        <updated>2021-03-25T04:49:19.000Z</updated>
        <content type="html"><![CDATA[<p><ul class="markdownIt-TOC">
<li>
<ul>
<li>
<ul>
<li><a href="#0%E5%AF%BC%E5%85%A5%E4%BE%9D%E8%B5%96">0.å¯¼å…¥ä¾èµ–</a></li>
<li><a href="#1%E6%95%B4%E5%90%88mybatis">1.æ•´åˆmybatis</a>
<ul>
<li><a href="#11%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93">1.1å»ºæ•°æ®åº“</a></li>
<li><a href="#12%E7%BC%96%E5%86%99%E5%AF%B9%E5%BA%94%E7%9A%84pojo%E5%B1%82">1.2ç¼–å†™å¯¹åº”çš„pojoå±‚</a></li>
<li><a href="#13%E7%BC%96%E5%86%99%E5%AF%B9%E5%BA%94%E7%9A%84dao%E5%B1%82">1.3ç¼–å†™å¯¹åº”çš„daoå±‚</a></li>
<li><a href="#14%E7%BC%96%E5%86%99mybatis-configxml">1.4ç¼–å†™mybatis-config.xml</a></li>
<li><a href="#15%E7%BC%96%E5%86%99mybatis-configxml">1.5ç¼–å†™mybatis-config.xml</a></li>
</ul>
</li>
<li><a href="#2%E6%95%B4%E5%90%88service%E5%B1%82">2.æ•´åˆserviceå±‚</a>
<ul>
<li><a href="#21%E7%BC%96%E5%86%99service%E5%B1%82java%E4%BB%A3%E7%A0%81">2.1ç¼–å†™serviceå±‚javaä»£ç </a></li>
<li><a href="#22%E7%BC%96%E5%86%99service%E5%B1%82%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6spring-servicexml">2.2ç¼–å†™serviceå±‚é…ç½®æ–‡ä»¶spring-service.xml</a></li>
</ul>
</li>
<li><a href="#3%E6%95%B4%E5%90%88springmvc%E5%B1%82">3.æ•´åˆSpringMVCå±‚</a>
<ul>
<li><a href="#31%E7%BC%96%E5%86%99spring-mvcxml">3.1ç¼–å†™spring-mvc.xml</a></li>
<li><a href="#32%E7%BC%96%E5%86%99applicationcontextxml">3.2ç¼–å†™applicationContext.xml</a></li>
<li><a href="#33%E7%BC%96%E5%86%99webxml%E6%96%87%E4%BB%B6">3.3ç¼–å†™web.xmlæ–‡ä»¶</a></li>
<li><a href="#34%E7%BC%96%E5%86%99controller%E5%B1%82">3.4ç¼–å†™controllerå±‚</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</p>
<h3 id="0å¯¼å…¥ä¾èµ–">0.å¯¼å…¥ä¾èµ–</h3>
<pre><code class="language-xml"> &lt;!--ä¾èµ–  junit æ•°æ®åº“é©±åŠ¨ è¿æ¥æ±   servlet jsp mybatis mybatis-spring spring --&gt;
    &lt;dependencies&gt;
        &lt;!--Junit--&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;junit&lt;/groupId&gt;
            &lt;artifactId&gt;junit&lt;/artifactId&gt;
            &lt;version&gt;4.12&lt;/version&gt;
        &lt;/dependency&gt;
        &lt;!--æ•°æ®åº“é©±åŠ¨--&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;mysql&lt;/groupId&gt;
            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;
            &lt;version&gt;8.0.22&lt;/version&gt;
        &lt;/dependency&gt;
        &lt;!-- æ•°æ®åº“è¿æ¥æ±  --&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;com.mchange&lt;/groupId&gt;
            &lt;artifactId&gt;c3p0&lt;/artifactId&gt;
            &lt;version&gt;0.9.5.2&lt;/version&gt;
        &lt;/dependency&gt;

        &lt;!--Servlet - JSP --&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;javax.servlet&lt;/groupId&gt;
            &lt;artifactId&gt;servlet-api&lt;/artifactId&gt;
            &lt;version&gt;2.5&lt;/version&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;javax.servlet.jsp&lt;/groupId&gt;
            &lt;artifactId&gt;jsp-api&lt;/artifactId&gt;
            &lt;version&gt;2.2&lt;/version&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;javax.servlet&lt;/groupId&gt;
            &lt;artifactId&gt;jstl&lt;/artifactId&gt;
            &lt;version&gt;1.2&lt;/version&gt;
        &lt;/dependency&gt;

        &lt;!--Mybatis--&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.mybatis&lt;/groupId&gt;
            &lt;artifactId&gt;mybatis&lt;/artifactId&gt;
            &lt;version&gt;3.5.2&lt;/version&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.mybatis&lt;/groupId&gt;
            &lt;artifactId&gt;mybatis-spring&lt;/artifactId&gt;
            &lt;version&gt;2.0.4&lt;/version&gt;
        &lt;/dependency&gt;

        &lt;!--Spring--&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework&lt;/groupId&gt;
            &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;
            &lt;version&gt;5.1.9.RELEASE&lt;/version&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework&lt;/groupId&gt;
            &lt;artifactId&gt;spring-jdbc&lt;/artifactId&gt;
            &lt;version&gt;5.2.7.RELEASE&lt;/version&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;

    &lt;!--é™æ€èµ„æºå¯¼å‡ºé—®é¢˜--&gt;
    &lt;build&gt;
        &lt;resources&gt;
            &lt;resource&gt;
                &lt;directory&gt;src/main/java&lt;/directory&gt;
                &lt;includes&gt;
                    &lt;include&gt;**/*.properties&lt;/include&gt;
                    &lt;include&gt;**/*.xml&lt;/include&gt;
                &lt;/includes&gt;
                &lt;filtering&gt;false&lt;/filtering&gt;
            &lt;/resource&gt;
            &lt;resource&gt;
                &lt;directory&gt;src/main/resources&lt;/directory&gt;
                &lt;includes&gt;
                    &lt;include&gt;**/*.properties&lt;/include&gt;
                    &lt;include&gt;**/*.xml&lt;/include&gt;
                &lt;/includes&gt;
                &lt;filtering&gt;false&lt;/filtering&gt;
            &lt;/resource&gt;
        &lt;/resources&gt;
    &lt;/build&gt;
</code></pre>
<h3 id="1æ•´åˆmybatis">1.æ•´åˆmybatis</h3>
<h4 id="11å»ºæ•°æ®åº“">1.1å»ºæ•°æ®åº“</h4>
<figure data-type="image" tabindex="1"><img src="https://gitee.com/aruul/a-ru-img/raw/master/img/20210325091806.png" alt="image-20210325091806560" loading="lazy"></figure>
<h4 id="12ç¼–å†™å¯¹åº”çš„pojoå±‚">1.2ç¼–å†™å¯¹åº”çš„pojoå±‚</h4>
<pre><code class="language-java">public class Books {
    private int bookID;
    private String bookName;
    private int bookCounts;
    private String detail;

    public Books() {
    }

    public Books(int bookID, String bookName, int bookCounts, String detail) {
        this.bookID = bookID;
        this.bookName = bookName;
        this.bookCounts = bookCounts;
        this.detail = detail;
    }

    public int getBookID() {
        return bookID;
    }

    public void setBookID(int bookID) {
        this.bookID = bookID;
    }

    public String getBookName() {
        return bookName;
    }

    public void setBookName(String bookName) {
        this.bookName = bookName;
    }

    public int getBookCounts() {
        return bookCounts;
    }

    public void setBookCounts(int bookCounts) {
        this.bookCounts = bookCounts;
    }

    public String getDetail() {
        return detail;
    }

    public void setDetail(String detail) {
        this.detail = detail;
    }

    @Override
    public String toString() {
        return &quot;Books{&quot; +
                &quot;bookID=&quot; + bookID +
                &quot;, bookName='&quot; + bookName + '\'' +
                &quot;, bookCounts=&quot; + bookCounts +
                &quot;, detail='&quot; + detail + '\'' +
                '}';
    }
}
</code></pre>
<h4 id="13ç¼–å†™å¯¹åº”çš„daoå±‚">1.3ç¼–å†™å¯¹åº”çš„daoå±‚</h4>
<ul>
<li>UserMapper.java</li>
</ul>
<pre><code class="language-java">public interface BookMapper {

    //å¢
    int addBook(Books books);
    // åˆ 
    int deleteBookById(@Param(&quot;bookID&quot;) int id);
    // æ”¹
    int updateBook(Books books);
    // æŸ¥
    Books queryBookBuId(@Param(&quot;bookID&quot;) int id);
    //æŸ¥å…¨éƒ¨çš„ä¹¦
    List&lt;Books&gt; queryAllBook();

}
</code></pre>
<ul>
<li>UserMapper.xml</li>
</ul>
<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
&lt;!DOCTYPE mapper
        PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;
        &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;

&lt;!--namespace æ˜¯è¦ç»‘å®šçš„ç±»çš„è·¯å¾„--&gt;
&lt;mapper namespace=&quot;org.example.dao.BookMapper&quot;&gt;

    &lt;insert id=&quot;addBook&quot; parameterType=&quot;books&quot;&gt;
        insert into ssmbuild.books (bookID, bookName, bookCounts, detail)
        values (#{bookID},#{bookName},#{bookCounts},#{detail})
    &lt;/insert&gt;

    &lt;delete id=&quot;deleteBookById&quot; parameterType=&quot;int&quot;&gt;
        delete from ssmbuild.books where bookID = #{bookID}
    &lt;/delete&gt;

    &lt;update id=&quot;updateBook&quot; parameterType=&quot;books&quot;&gt;
        update ssmbuild.books set bookName=#{bookName},bookCounts=#{bookCounts}ï¼Œdetail=#{detail}
        where bookID=#{bookID}
    &lt;/update&gt;

    &lt;select id=&quot;queryBookBuId&quot; parameterType=&quot;int&quot; resultType=&quot;books&quot;&gt;
        select * from ssmbuild.books where bookID=#{bookID}
    &lt;/select&gt;

    &lt;select id=&quot;queryAllBook&quot; resultType=&quot;books&quot;&gt;
        select * from ssmbuild.books
    &lt;/select&gt;

&lt;/mapper&gt;
</code></pre>
<h4 id="14ç¼–å†™mybatis-configxml">1.4ç¼–å†™mybatis-config.xml</h4>
<p><mark>è¿™é‡Œçš„è¯mybatis-config.xmlä¸­ä¸ç”¨å†™æ•°æ®åº“è¿æ¥æ± ï¼Œè€Œæ˜¯ç»Ÿä¸€äº¤ç”±springæ¥å¤„ç†</mark></p>
<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
&lt;!DOCTYPE configuration
        PUBLIC &quot;-//mybatis.org//DTD Config 3.0//EN&quot;
        &quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;&gt;
&lt;configuration&gt;

    &lt;!--è®¾ç½®æ—¥å¿—--&gt;
    &lt;settings&gt;
        &lt;setting name=&quot;logImpl&quot; value=&quot;STDOUT_LOGGING&quot;/&gt;
    &lt;/settings&gt;
    &lt;!--åˆ«å--&gt;
    &lt;typeAliases&gt;
        &lt;package name=&quot;org.example.pojo&quot;/&gt;
    &lt;/typeAliases&gt;

    &lt;!--mapperæ˜ å°„  æ‰«ædaoåŒ…--&gt;
    &lt;mappers&gt;
        &lt;package name=&quot;org.example.dao&quot;/&gt;
    &lt;/mappers&gt;
&lt;/configuration&gt;
</code></pre>
<h4 id="15ç¼–å†™mybatis-configxml">1.5ç¼–å†™mybatis-config.xml</h4>
<p><mark>ä¹Ÿå°±æ˜¯å°†daoå±‚æ•´åˆåˆ°springä¸­</mark></p>
<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans
        https://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt;

    &lt;!--å…³è”æ•°æ®åº“ c3p0è¿æ¥æ±  --&gt;
    &lt;bean id=&quot;dataSource&quot; class=&quot;com.mchange.v2.c3p0.ComboPooledDataSource&quot;&gt;
        &lt;property name=&quot;driverClass&quot; value=&quot;com.mysql.cj.jdbc.Driver&quot;/&gt;
        &lt;property name=&quot;jdbcUrl&quot;
                  value=&quot;jdbc:mysql://localhost:3306/ssmbuild?serverTimezone=Asia/Shanghai&amp;amp;useSSL=true&amp;amp;useUnicode=true&amp;amp;characterEncoding=UTF-8&quot;/&gt;
        &lt;property name=&quot;user&quot; value=&quot;root&quot;/&gt;
        &lt;property name=&quot;password&quot; value=&quot;password&quot;/&gt;

        &lt;!-- c3p0è¿æ¥æ± çš„ç§æœ‰å±æ€§ --&gt;
        &lt;property name=&quot;maxPoolSize&quot; value=&quot;30&quot;/&gt;
        &lt;property name=&quot;minPoolSize&quot; value=&quot;10&quot;/&gt;
        &lt;!-- å…³é—­è¿æ¥åä¸è‡ªåŠ¨commit --&gt;
        &lt;property name=&quot;autoCommitOnClose&quot; value=&quot;false&quot;/&gt;
        &lt;!-- è·å–è¿æ¥è¶…æ—¶æ—¶é—´ --&gt;
        &lt;property name=&quot;checkoutTimeout&quot; value=&quot;10000&quot;/&gt;
        &lt;!-- å½“è·å–è¿æ¥å¤±è´¥é‡è¯•æ¬¡æ•° --&gt;
        &lt;property name=&quot;acquireRetryAttempts&quot; value=&quot;2&quot;/&gt;
    &lt;/bean&gt;

    &lt;!--SqlSessionFactory--&gt;
    &lt;bean id=&quot;sqlSessionFactory&quot; class=&quot;org.mybatis.spring.SqlSessionFactoryBean&quot;&gt;
        &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot;/&gt;
        &lt;!-- ç»‘å®šmybatiså…¨å±€é…ç½®æ–‡ä»¶:mybatis-config.xml --&gt;
        &lt;property name=&quot;configLocation&quot; value=&quot;classpath:mybatis-config.xml&quot;/&gt;
    &lt;/bean&gt;

    &lt;!--é…ç½®daoæ¥å£æ‰«æåŒ…ï¼ŒåŠ¨æ€çš„å®ç°äº†Daoæ¥å£å¯ä»¥æ³¨å†Œåˆ°Springå®¹å™¨--&gt;
    &lt;bean class=&quot;org.mybatis.spring.mapper.MapperScannerConfigurer&quot;&gt;
        &lt;!--æ³¨å…¥sqlSessionFactory--&gt;
        &lt;property name=&quot;sqlSessionFactoryBeanName&quot; value=&quot;sqlSessionFactory&quot;/&gt;
        &lt;!--æ‰«æè¦æ‰«æçš„åŒ…--&gt;
        &lt;property name=&quot;basePackage&quot; value=&quot;org.example.dao&quot;/&gt;
    &lt;/bean&gt;

&lt;/beans&gt;
</code></pre>
<hr>
<h3 id="2æ•´åˆserviceå±‚">2.æ•´åˆserviceå±‚</h3>
<h4 id="21ç¼–å†™serviceå±‚javaä»£ç ">2.1ç¼–å†™serviceå±‚javaä»£ç </h4>
<pre><code class="language-java">package org.example.service;

import org.apache.ibatis.annotations.Param;
import org.example.pojo.Books;

import java.util.List;

/**
 * @author aRu
 * @date 2021/3/24 21:29
 */
public interface BookService {
    //å¢
    int addBook(Books books);
    // åˆ 
    int deleteBookById(@Param(&quot;bookID&quot;) int id);
    // æ”¹
    int updateBook(Books books);
    // æŸ¥
    Books queryBookBuId(@Param(&quot;bookID&quot;) int id);
    //æŸ¥å…¨éƒ¨çš„ä¹¦
    List&lt;Books&gt; queryAllBook();
}
</code></pre>
<pre><code class="language-java">package org.example.service;

import org.example.dao.BookMapper;
import org.example.pojo.Books;

import java.util.List;

/**
 * @author aRu
 * @date 2021/3/24 21:30
 */
public class BookServiceImp implements BookService{
    //serviceè°ƒç”¨daoå±‚   ç»„åˆdao
    private BookMapper bookMapper;

    public void setBookMapper(BookMapper bookMapper) {
        this.bookMapper = bookMapper;
    }

    @Override
    public int addBook(Books books) {
        return bookMapper.addBook(books);
    }

    @Override
    public int deleteBookById(int id) {
        return bookMapper.deleteBookById(id);
    }

    @Override
    public int updateBook(Books books) {
        return bookMapper.updateBook(books);
    }

    @Override
    public Books queryBookBuId(int id) {
        return bookMapper.queryBookBuId(id);
    }

    @Override
    public List&lt;Books&gt; queryAllBook() {
        return bookMapper.queryAllBook();
    }
}
</code></pre>
<h4 id="22ç¼–å†™serviceå±‚é…ç½®æ–‡ä»¶spring-servicexml">2.2ç¼–å†™serviceå±‚é…ç½®æ–‡ä»¶spring-service.xml</h4>
<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
       xmlns:context=&quot;http://www.springframework.org/schema/context&quot;
       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans
   http://www.springframework.org/schema/beans/spring-beans.xsd
   http://www.springframework.org/schema/context
   http://www.springframework.org/schema/context/spring-context.xsd&quot;&gt;

    &lt;!--æ‰«æserviceä¸‹çš„åŒ…--&gt;
    &lt;context:component-scan base-package=&quot;org.example.service&quot; /&gt;

    &lt;!--ServiceImplæ³¨å…¥åˆ°IOCå®¹å™¨ä¸­--&gt;
    &lt;bean id=&quot;BookServiceImp&quot; class=&quot;org.example.service.BookServiceImp&quot;&gt;
        &lt;property name=&quot;bookMapper&quot; ref=&quot;bookMapper&quot;/&gt;
    &lt;/bean&gt;

    &lt;!-- é…ç½®äº‹åŠ¡ç®¡ç†å™¨ --&gt;
    &lt;bean id=&quot;transactionManager&quot; class=&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;&gt;
        &lt;!-- æ³¨å…¥æ•°æ®åº“è¿æ¥æ±  --&gt;
        &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot; /&gt;
    &lt;/bean&gt;

&lt;/beans&gt;
</code></pre>
<hr>
<h3 id="3æ•´åˆspringmvcå±‚">3.æ•´åˆSpringMVCå±‚</h3>
<figure data-type="image" tabindex="2"><img src="https://gitee.com/aruul/a-ru-img/raw/master/img/20210325093214.png" alt="image-20210325093214157" loading="lazy"></figure>
<p>æ·»åŠ  Framework Support</p>
<h4 id="31ç¼–å†™spring-mvcxml">3.1ç¼–å†™spring-mvc.xml</h4>
<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
       xmlns:context=&quot;http://www.springframework.org/schema/context&quot;
       xmlns:mvc=&quot;http://www.springframework.org/schema/mvc&quot;
       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context https://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/mvc https://www.springframework.org/schema/mvc/spring-mvc.xsd&quot;&gt;

    &lt;!-- 1.å¼€å¯SpringMVCæ³¨è§£é©±åŠ¨ --&gt;
    &lt;mvc:annotation-driven/&gt;
    &lt;!-- 2.é™æ€èµ„æºé»˜è®¤servleté…ç½®--&gt;
    &lt;mvc:default-servlet-handler/&gt;

    &lt;!-- 3.é…ç½®jsp æ˜¾ç¤ºViewResolverè§†å›¾è§£æå™¨ --&gt;
    &lt;bean class=&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;&gt;
        &lt;property name=&quot;viewClass&quot; value=&quot;org.springframework.web.servlet.view.JstlView&quot; /&gt;
        &lt;property name=&quot;prefix&quot; value=&quot;/WEB-INF/jsp/&quot; /&gt;
        &lt;property name=&quot;suffix&quot; value=&quot;.jsp&quot; /&gt;
    &lt;/bean&gt;

    &lt;!-- 4.æ‰«æwebç›¸å…³çš„bean --&gt;
    &lt;context:component-scan base-package=&quot;org.example.controller&quot; /&gt;

&lt;/beans&gt;
</code></pre>
<p><mark>è®°å¾—åœ¨WEB-INFåœ¨æ–°å»ºjspçš„æ–‡ä»¶</mark></p>
<h4 id="32ç¼–å†™applicationcontextxml">3.2ç¼–å†™applicationContext.xml</h4>
<p>å°†ä¹‹å‰çš„<strong>spring-dao.xml  spring-service.xml spring-mvc.xml</strong>å¼•å…¥<strong>applicationContext.xml</strong>ä¸­</p>
<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans
       http://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt;

    &lt;import resource=&quot;classpath:spring-dao.xml&quot;/&gt;
    &lt;import resource=&quot;classpath:spring-service.xml&quot;/&gt;
    &lt;import resource=&quot;classpath:spring-mvc.xml&quot;/&gt;

&lt;/beans&gt;
</code></pre>
<h4 id="33ç¼–å†™webxmlæ–‡ä»¶">3.3ç¼–å†™web.xmlæ–‡ä»¶</h4>
<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;web-app xmlns=&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;
         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
         xsi:schemaLocation=&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot;
         version=&quot;4.0&quot;&gt;

    &lt;!--DispatcherServlet--&gt;
    &lt;servlet&gt;
        &lt;servlet-name&gt;DispatcherServlet&lt;/servlet-name&gt;
        &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;
        &lt;init-param&gt;
            &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;
            &lt;!--ä¸€å®šè¦æ³¨æ„:è¿™é‡ŒåŠ è½½çš„æ˜¯æ€»çš„é…ç½®æ–‡ä»¶ï¼Œä¹‹å‰è¢«è¿™é‡Œå‘äº†ï¼--&gt;
            &lt;param-value&gt;classpath:applicationContext.xml&lt;/param-value&gt;
        &lt;/init-param&gt;
        &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;
    &lt;/servlet&gt;
    &lt;servlet-mapping&gt;
        &lt;servlet-name&gt;DispatcherServlet&lt;/servlet-name&gt;
        &lt;url-pattern&gt;/&lt;/url-pattern&gt;
    &lt;/servlet-mapping&gt;

    &lt;!--encodingFilter--&gt;
    &lt;filter&gt;
        &lt;filter-name&gt;encodingFilter&lt;/filter-name&gt;
        &lt;filter-class&gt;
            org.springframework.web.filter.CharacterEncodingFilter
        &lt;/filter-class&gt;
        &lt;init-param&gt;
            &lt;param-name&gt;encoding&lt;/param-name&gt;
            &lt;param-value&gt;utf-8&lt;/param-value&gt;
        &lt;/init-param&gt;
    &lt;/filter&gt;
    &lt;filter-mapping&gt;
        &lt;filter-name&gt;encodingFilter&lt;/filter-name&gt;
        &lt;url-pattern&gt;/*&lt;/url-pattern&gt;
    &lt;/filter-mapping&gt;

    &lt;!--Sessionè¿‡æœŸæ—¶é—´--&gt;
    &lt;session-config&gt;
        &lt;session-timeout&gt;15&lt;/session-timeout&gt;
    &lt;/session-config&gt;

&lt;/web-app&gt;
</code></pre>
<h4 id="34ç¼–å†™controllerå±‚">3.4ç¼–å†™controllerå±‚</h4>
<pre><code class="language-java">@Controller
@RequestMapping(&quot;/book&quot;)
public class BookController {
    //controllerå±‚ è°ƒç”¨serviceå±‚
    @Autowired
    @Qualifier(&quot;BookServiceImp&quot;)
    private BookService bookService;

    //æŸ¥è¯¢å…¨éƒ¨ä¹¦ç±ï¼Œå¹¶è¿”å›ç»™å±•ç¤ºé¡µ
    @RequestMapping(&quot;/allBook&quot;)
    public String list(Model model){
        List&lt;Books&gt; books=bookService.queryAllBook();
        model.addAttribute(&quot;list&quot;,books);

        return &quot;allBook&quot;;
    }
    
}
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Spring5è¯¾å ‚ç¬”è®°]]></title>
        <id>https://aruul.github.io/post/E7oM6mwEJ/</id>
        <link href="https://aruul.github.io/post/E7oM6mwEJ/">
        </link>
        <updated>2021-03-20T03:27:35.000Z</updated>
        <summary type="html"><![CDATA[<p>è¿™æ˜¯çœ‹bç«™ç‹‚ç¥çš„è§†é¢‘æ€»ç»“çš„ç¬”è®°</p>
]]></summary>
        <content type="html"><![CDATA[<p>è¿™æ˜¯çœ‹bç«™ç‹‚ç¥çš„è§†é¢‘æ€»ç»“çš„ç¬”è®°</p>
<!--more-->
<p><ul class="markdownIt-TOC">
<li><a href="#spring5">Spring5</a>
<ul>
<li><a href="#1-spring">1.ã€Spring</a>
<ul>
<li><a href="#11-%E7%AE%80%E4%BB%8B">1.1ã€ç®€ä»‹</a></li>
<li><a href="#12-%E4%BC%98%E7%82%B9">1.2 ä¼˜ç‚¹</a></li>
<li><a href="#13-%E7%BB%84%E6%88%90">1.3 ç»„æˆ</a></li>
<li><a href="#14-%E6%89%A9%E5%B1%95">1.4ã€æ‰©å±•</a></li>
</ul>
</li>
<li><a href="#2-ioc%E6%8E%A7%E5%88%B6%E5%8F%8D%E8%BD%AC%E7%90%86%E8%AE%BA%E6%8E%A8%E5%AF%BC">2ã€IoCï¼ˆæ§åˆ¶åè½¬ï¼‰ç†è®ºæ¨å¯¼</a>
<ul>
<li><a href="#ioc%E6%9C%AC%E8%B4%A8">IoCæœ¬è´¨</a></li>
</ul>
</li>
<li><a href="#3-hollespring">3ã€HolleSpring</a></li>
<li><a href="#4-ioc%E5%88%9B%E5%BB%BA%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%96%B9%E5%BC%8F">4ã€IoCåˆ›å»ºå¯¹è±¡çš„æ–¹å¼</a></li>
<li><a href="#5-spring%E9%85%8D%E7%BD%AE">5ã€Springé…ç½®</a>
<ul>
<li><a href="#51-%E5%88%AB%E5%90%8D">5.1ã€åˆ«å</a></li>
<li><a href="#52-bean%E7%9A%84%E9%85%8D%E7%BD%AE">5.2ã€Beançš„é…ç½®</a></li>
<li><a href="#53-import">5.3ã€import</a></li>
</ul>
</li>
<li><a href="#6-%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5di">6ã€ä¾èµ–æ³¨å…¥ï¼ˆDIï¼‰</a>
<ul>
<li><a href="#61-%E6%9E%84%E9%80%A0%E5%99%A8%E6%B3%A8%E5%85%A5">6.1ã€æ„é€ å™¨æ³¨å…¥</a></li>
<li><a href="#62-set%E6%96%B9%E5%BC%8F%E6%B3%A8%E5%85%A5%E9%87%8D%E7%82%B9">6.2ã€setæ–¹å¼æ³¨å…¥ã€é‡ç‚¹ã€‘</a></li>
<li><a href="#63-%E6%8B%93%E5%B1%95%E6%B3%A8%E5%85%A5">6.3ã€æ‹“å±•æ³¨å…¥</a></li>
<li><a href="#64-bean%E4%BD%9C%E7%94%A8%E5%9F%9F">6.4ã€Beanä½œç”¨åŸŸ</a></li>
</ul>
</li>
<li><a href="#7-bean%E7%9A%84%E8%87%AA%E5%8A%A8%E8%A3%85%E9%85%8D">7ã€Beançš„è‡ªåŠ¨è£…é…</a>
<ul>
<li><a href="#71%E6%B5%8B%E8%AF%95%E8%87%AA%E5%8A%A8%E8%A3%85%E9%85%8D">7.1æµ‹è¯•ï¼šè‡ªåŠ¨è£…é…</a></li>
<li><a href="#72-%E4%BD%BF%E7%94%A8%E6%B3%A8%E8%A7%A3%E5%AE%9E%E7%8E%B0%E8%87%AA%E5%8A%A8%E8%A3%85%E9%85%8D">7.2ã€ä½¿ç”¨æ³¨è§£å®ç°è‡ªåŠ¨è£…é…</a>
<ul>
<li><a href="#721-autowired">7.2.1ã€@Autowired</a></li>
<li><a href="#722-autowiredqualifier">7.2.2ã€@Autowired+@Qualifier</a></li>
<li><a href="#723-resource">7.2.3ã€@Resource</a></li>
<li><a href="#%E5%8C%BA%E5%88%AB">åŒºåˆ«ï¼š</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#8-%E4%BD%BF%E7%94%A8%E6%B3%A8%E8%A7%A3%E5%BC%80%E5%8F%91">8ã€ä½¿ç”¨æ³¨è§£å¼€å‘</a>
<ul>
<li><a href="#81-bean">8.1ã€bean</a></li>
<li><a href="#82-%E5%B1%9E%E6%80%A7%E5%A6%82%E4%BD%95%E6%B3%A8%E5%85%A5value">8.2ã€å±æ€§å¦‚ä½•æ³¨å…¥@value</a></li>
<li><a href="#83-%E8%A1%8D%E7%94%9F%E7%9A%84%E6%B3%A8%E8%A7%A3">8.3ã€è¡ç”Ÿçš„æ³¨è§£</a></li>
<li><a href="#84-%E8%87%AA%E5%8A%A8%E8%A3%85%E9%85%8D%E7%BD%AE">8.4ã€è‡ªåŠ¨è£…é…ç½®</a></li>
<li><a href="#85-%E4%BD%9C%E7%94%A8%E5%9F%9Fscope">8.5ã€ä½œç”¨åŸŸ@scope</a></li>
<li><a href="#86-%E5%B0%8F%E7%BB%93">8.6ã€å°ç»“</a></li>
</ul>
</li>
<li><a href="#9-%E4%BD%BF%E7%94%A8java%E7%9A%84%E6%96%B9%E5%BC%8F%E9%85%8D%E7%BD%AEspring">9ã€ä½¿ç”¨Javaçš„æ–¹å¼é…ç½®Spring</a></li>
<li><a href="#10-%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86">10ã€åŠ¨æ€ä»£ç†</a>
<ul>
<li><a href="#101-%E9%9D%99%E6%80%81%E4%BB%A3%E7%90%86">10.1ã€é™æ€ä»£ç†</a></li>
<li><a href="#102-%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86">10.2ã€åŠ¨æ€ä»£ç†</a></li>
</ul>
</li>
<li><a href="#11-aop">11ã€AOP</a>
<ul>
<li><a href="#111-%E4%BB%80%E4%B9%88%E6%98%AFaop">11.1ã€ä»€ä¹ˆæ˜¯AOP</a></li>
<li><a href="#112-aop%E5%9C%A8spring%E4%B8%AD%E7%9A%84%E4%BD%BF%E7%94%A8">11.2ã€AOPåœ¨Springä¸­çš„ä½¿ç”¨</a></li>
<li><a href="#113-%E4%BD%BF%E7%94%A8spring%E5%AE%9E%E7%8E%B0aop">11.3ã€ä½¿ç”¨Springå®ç°AOP</a>
<ul>
<li><a href="#1131-%E6%96%B9%E6%B3%95%E4%B8%80%E4%BD%BF%E7%94%A8%E5%8E%9F%E7%94%9Fspring%E6%8E%A5%E5%8F%A3">11.3.1ã€æ–¹æ³•ä¸€ï¼šä½¿ç”¨åŸç”Ÿspringæ¥å£</a></li>
<li><a href="#1132-%E6%96%B9%E6%B3%95%E4%BA%8C%E8%87%AA%E5%AE%9A%E4%B9%89%E7%B1%BB%E5%AE%9E%E7%8E%B0aop">11.3.2ã€æ–¹æ³•äºŒï¼šè‡ªå®šä¹‰ç±»å®ç°AOP</a></li>
<li><a href="#1133-%E6%96%B9%E6%B3%95%E4%B8%89%E4%BD%BF%E7%94%A8%E6%B3%A8%E8%A7%A3%E5%AE%9E%E7%8E%B0">11.3.3ã€æ–¹æ³•ä¸‰ï¼šä½¿ç”¨æ³¨è§£å®ç°</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#12-%E6%95%B4%E5%90%88mybatis">12ã€æ•´åˆmybatis</a>
<ul>
<li><a href="#121-mybatis-spring-%E6%96%B9%E5%BC%8F%E4%B8%80">12.1ã€mybatis-spring-æ–¹å¼ä¸€</a></li>
<li><a href="#122-mybatis-spring-%E6%96%B9%E5%BC%8F%E4%BA%8C">12.2ã€mybatis-spring-æ–¹å¼äºŒ</a></li>
</ul>
</li>
<li><a href="#13-%E5%A3%B0%E6%98%8E%E5%BC%8F%E4%BA%8B%E5%8A%A1">13. å£°æ˜å¼äº‹åŠ¡</a></li>
</ul>
</li>
</ul>
</p>
<h1 id="spring5">Spring5</h1>
<h2 id="1-spring">1.ã€Spring</h2>
<h3 id="11-ç®€ä»‹">1.1ã€ç®€ä»‹</h3>
<ul>
<li>
<p>Spring â€”â€”&gt; æ˜¥å¤©ï¼Œä¸ºå¼€æºè½¯ä»¶å¸¦æ¥äº†æ˜¥å¤©</p>
</li>
<li>
<p>2002ï¼Œé¦–æ¬¡æ¨å‡ºäº†Springæ¡†æ¶çš„é›å½¢ï¼šinterface21æ¡†æ¶ï¼</p>
</li>
<li>
<p>Springæ¡†æ¶ä»¥interface21æ¡†æ¶ä¸ºåŸºç¡€ï¼Œç»è¿‡é‡æ–°è®¾è®¡ï¼Œå¹¶ä¸æ–­ä¸°å¯Œå…¶å†…æ¶µï¼Œäº2004å¹´3æœˆ24æ—¥å‘å¸ƒäº†1.0æ­£å¼ç‰ˆ</p>
</li>
<li>
<p>Springçš„ç†å¿µï¼šä½¿ç”¨ç°æœ‰çš„æŠ€æœ¯æ›´åŠ å®¹æ˜“ä½¿ç”¨ï¼Œæœ¬èº«æ˜¯ä¸€ä¸ªå¤§æ‚çƒ©ï¼Œæ•´åˆäº†ç°æœ‰çš„æŠ€æœ¯æ¡†æ¶ï¼</p>
</li>
<li>
<p>SSHï¼šStruct2 + Spring + Hibernateï¼ˆå…¨è‡ªåŠ¨æŒä¹…åŒ–æ¡†æ¶ï¼‰ï¼</p>
</li>
<li>
<p>SSMï¼šSpringMVC + Spring + MyBatisï¼ˆåŠè‡ªåŠ¨æŒä¹…åŒ–æ¡†æ¶ï¼Œå¯è‡ªå®šä¹‰æ€§è´¨æ›´å¼ºï¼‰ï¼</p>
</li>
</ul>
<p>springå®˜ç½‘ï¼š https://spring.io/projects/spring-framework#overview</p>
<p>å®˜æ–¹ä¸‹è½½ï¼š https://repo.spring.io/release/org/springframework/spring/</p>
<p>GitHubï¼š https://github.com/spring-projects/spring-framework</p>
<p>Spring Web MVCï¼š <a href="https://mvnrepository.com/artifact/org.springframework/spring-webmvc/5.2.7.RELEASE">spring-webmvcæœ€æ–°ç‰ˆ</a></p>
<p>Spring Web MVCå’ŒSpring-JDBCçš„pomé…ç½®æ–‡ä»¶ï¼š</p>
<pre><code class="language-xml">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-webmvc --&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.springframework&lt;/groupId&gt;
    &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;
    &lt;version&gt;5.2.7.RELEASE&lt;/version&gt;
&lt;/dependency&gt;

&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-jdbc --&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.springframework&lt;/groupId&gt;
    &lt;artifactId&gt;spring-jdbc&lt;/artifactId&gt;
    &lt;version&gt;5.2.7.RELEASE&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
<h3 id="12-ä¼˜ç‚¹">1.2 ä¼˜ç‚¹</h3>
<ul>
<li>Springæ˜¯ä¸€ä¸ªå¼€æºçš„å…è´¹çš„æ¡†æ¶ï¼ˆå®¹å™¨ï¼‰ï¼</li>
<li>Springæ˜¯ä¸€ä¸ªè½»é‡çº§çš„ã€éå…¥ä¾µå¼çš„æ¡†æ¶ï¼</li>
<li>æ§åˆ¶åè½¬ï¼ˆIoCï¼‰ï¼Œé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼ˆAOPï¼‰</li>
<li>æ”¯æŒäº‹åŠ¡çš„å¤„ç†ï¼Œå¯¹æ¡†æ¶æ•´åˆçš„æ”¯æŒï¼ï¼ˆå‡ ä¹å¸‚é¢ä¸Šæ‰€æœ‰çƒ­é—¨æ¡†æ¶éƒ½èƒ½æ•´åˆè¿›å»ï¼‰ï¼</li>
</ul>
<p>=== æ€»ç»“ä¸€å¥è¯ï¼šSpringå°±æ˜¯ä¸€ä¸ªè½»é‡çº§çš„æ§åˆ¶åè½¬ï¼ˆIoCï¼‰å’Œé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼ˆAOPï¼‰çš„æ¡†æ¶ï¼ ===</p>
<h3 id="13-ç»„æˆ">1.3 ç»„æˆ</h3>
<figure data-type="image" tabindex="1"><img src="Spring5%E8%AF%BE%E5%A0%82%E7%AC%94.assets/aHR0cHM6Ly9naXRlZS5jb20vd29fYmVsbC9QaWN0dXJlQmVkL3Jhdy9tYXN0ZXIvaW1hZ2UvU3ByaW5nNyVFNSVBNCVBNyVFNiVBOCVBMSVFNSU5RCU5Ny5wbmc" alt="img" loading="lazy"></figure>
<h3 id="14-æ‰©å±•">1.4ã€æ‰©å±•</h3>
<p>ç°ä»£åŒ–çš„javaå¼€å‘ -&gt; åŸºäºSpringçš„å¼€å‘ï¼</p>
<figure data-type="image" tabindex="2"><img src="Spring5%E8%AF%BE%E5%A0%82%E7%AC%94.assets/aHR0cHM6Ly9naXRlZS5jb20vd29fYmVsbC9QaWN0dXJlQmVkL3Jhdy9tYXN0ZXIvaW1hZ2UvMjAyMDA4MDEwMzA4MjAucG5n" alt="img" loading="lazy"></figure>
<ul>
<li>Spring Boot
<ul>
<li>ä¸€ä¸ªå¿«é€Ÿå¼€å‘çš„è„šæ‰‹æ¶</li>
<li>åŸºäºSpringBootå¯ä»¥å¿«é€Ÿå¼€å‘å•ä¸ªå¾®æœåŠ¡</li>
<li>çº¦å®šå¤§äºé…ç½®ï¼</li>
</ul>
</li>
<li>Spring Cloud
<ul>
<li>SpringCloudæ˜¯åŸºäºSpringBootå®ç°çš„ï¼</li>
</ul>
</li>
</ul>
<p>å› ä¸ºç°åœ¨å¤§å¤šæ•°å…¬å¸éƒ½åœ¨ä½¿ç”¨SpringBootè¿›è¡Œå¿«é€Ÿå¼€å‘ï¼Œå­¦ä¹ SpringBootçš„å‰æï¼Œéœ€è¦å®Œå…¨æŒæ¡SpringåŠSpringMVCï¼æ‰¿ä¸Šå¯ä¸‹çš„ä½œç”¨ï¼</p>
<h2 id="2-iocæ§åˆ¶åè½¬ç†è®ºæ¨å¯¼">2ã€IoCï¼ˆæ§åˆ¶åè½¬ï¼‰ç†è®ºæ¨å¯¼</h2>
<p><strong>ä¼ ç»Ÿ</strong>çš„è°ƒç”¨</p>
<ol>
<li>
<p>UserDao</p>
<pre><code class="language-java">package dao;
public interface UserDao {
	void getUser();
}
</code></pre>
</li>
<li>
<p>UserDaoImp</p>
<pre><code class="language-java">package dao;
public class UserDaoImpl implements UserDao{
	public void getUser() {
		System.out.println(&quot;é»˜è®¤è·å–ç”¨æˆ·æ•°æ®&quot;);	
	}
}
</code></pre>
</li>
<li>
<p>UserSevice</p>
<pre><code class="language-java">package Service;
public interface UserService {
	void getUser();
}
</code></pre>
</li>
<li>
<p>UserServiceImp</p>
<pre><code class="language-java">package Service;
import dao.UserDao;
import dao.UserDaoImpl;

public class UserServiceImpl implements UserService{
		UserDao userDao = new UserDaoImpl();		
		public void getUser(){
			userDao.getUser();
		}	
}
</code></pre>
</li>
</ol>
<p>æµ‹è¯•</p>
<pre><code class="language-java">package holle0;
import Service.UserService;
import Service.UserServiceImpl;

public class MyTest0 {
	public static void main(String[] args) {
		// ç”¨æˆ·å®é™…è°ƒç”¨çš„æ˜¯ä¸šåŠ¡å±‚ï¼Œdaoå±‚ä»–ä»¬ä¸éœ€è¦æ¥è§¦
		UserService userService = new UserServiceImpl();
		userService.getUser();
	}
}
</code></pre>
<p>åœ¨æˆ‘ä»¬ä¹‹å‰çš„ä¸šåŠ¡ä¸­ï¼Œç”¨æˆ·çš„éœ€æ±‚å¯èƒ½ä¼šå½±å“æˆ‘ä»¬åŸæ¥çš„ä»£ç ï¼Œæˆ‘ä»¬éœ€è¦æ ¹æ®ç”¨æˆ·çš„éœ€æ±‚å»ä¿®æ”¹åŸä»£ç ï¼å¦‚æœç¨‹åºä»£ç é‡ååˆ†å¤§ï¼Œä¿®æ”¹ä¸€æ¬¡çš„æˆæœ¬ä»£ä»·ååˆ†æ˜‚è´µï¼</p>
<p><img src="Spring5%E8%AF%BE%E5%A0%82%E7%AC%94.assets/aHR0cHM6Ly9naXRlZS5jb20vd29fYmVsbC9QaWN0dXJlQmVkL3Jhdy9tYXN0ZXIvaW1hZ2UvaW1hZ2UtMjAyMDA4MDExMjI3NDI1ODEucG5n" alt="image-20200801122742581" loading="lazy"><br>
**æ”¹è‰¯ï¼š**æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªSetæ¥å£å®ç°ã€‚å·²ç»å‘ç”Ÿäº†é©å‘½æ€§çš„å˜åŒ–ï¼</p>
<pre><code class="language-java">//åœ¨Serviceå±‚çš„å®ç°ç±»(UserServiceImpl)å¢åŠ ä¸€ä¸ªSet()æ–¹æ³•
//åˆ©ç”¨setåŠ¨æ€å®ç°å€¼çš„æ³¨å…¥ï¼
//DAOå±‚å¹¶ä¸å†™æ­»å›ºå®šè°ƒç”¨å“ªä¸€ä¸ªUserDaoçš„å®ç°ç±»
//è€Œæ˜¯é€šè¿‡Serviceå±‚è°ƒç”¨æ–¹æ³•è®¾ç½®å®ç°ç±»ï¼
private UserDao userDao;
public void setUserDao(UserDao userDao){
    this.userDao = userDao;
}
</code></pre>
<p>set() æ–¹æ³•å®é™…ä¸Šæ˜¯åŠ¨æ€æ”¹å˜äº† UserDao userDao çš„ åˆå§‹åŒ–éƒ¨åˆ†ï¼ˆ<strong>new UserDaoImpl()</strong>ï¼‰</p>
<p>æµ‹è¯•ä¸­åŠ ä¸Š</p>
<pre><code class="language-java">((UserServiceImpl)userService).setUserDao(new UserDaoImpl());
</code></pre>
<ul>
<li>ä¹‹å‰ï¼Œç¨‹åºæ˜¯ä¸»åŠ¨åˆ›å»ºå¯¹è±¡ï¼<strong>æ§åˆ¶æƒåœ¨ç¨‹åºçŒ¿æ‰‹ä¸Š</strong>ï¼</li>
<li>ä½¿ç”¨äº†setæ³¨å…¥åï¼Œç¨‹åºä¸å†å…·æœ‰ä¸»åŠ¨æ€§ï¼Œè€Œæ˜¯å˜æˆäº†è¢«åŠ¨çš„æ¥å—å¯¹è±¡ï¼ï¼ˆ<strong>ä¸»åŠ¨æƒåœ¨å®¢æˆ·æ‰‹ä¸Š</strong>ï¼‰</li>
</ul>
<p>æœ¬è´¨ä¸Šè§£å†³äº†é—®é¢˜ï¼Œç¨‹åºå‘˜ä¸ç”¨å†å»ç®¡ç†å¯¹è±¡çš„åˆ›å»º</p>
<p>ç³»ç»Ÿçš„è€¦åˆæ€§å¤§å¤§é™ä½ï¼Œå¯ä»¥æ›´ä¸“æ³¨åœ¨ä¸šåŠ¡çš„å®ç°ä¸Š</p>
<p>è¿™æ˜¯IoCï¼ˆæ§åˆ¶åè½¬ï¼‰çš„åŸå‹ï¼Œåè½¬(ç†è§£)ï¼šä¸»åŠ¨æƒäº¤ç»™äº†ç”¨æˆ·</p>
<figure data-type="image" tabindex="3"><img src="Spring5%E8%AF%BE%E5%A0%82%E7%AC%94.assets/aHR0cHM6Ly9naXRlZS5jb20vd29fYmVsbC9QaWN0dXJlQmVkL3Jhdy9tYXN0ZXIvaW1hZ2UvaW1hZ2UtMjAyMDA4MDExMjI4MDU3NjkucG5n" alt="image-20200801122805769" loading="lazy"></figure>
<h3 id="iocæœ¬è´¨">IoCæœ¬è´¨</h3>
<p><img src="Spring5%E8%AF%BE%E5%A0%82%E7%AC%94.assets/aHR0cHM6Ly9naXRlZS5jb20vd29fYmVsbC9QaWN0dXJlQmVkL3Jhdy9tYXN0ZXIvaW1hZ2UvaW1hZ2UtMjAyMDA4MDExMjM1MTg5NzQucG5n" alt="image-20200801123518974" loading="lazy"><br>
<img src="Spring5%E8%AF%BE%E5%A0%82%E7%AC%94.assets/aHR0cHM6Ly9naXRlZS5jb20vd29fYmVsbC9QaWN0dXJlQmVkL3Jhdy9tYXN0ZXIvaW1hZ2UvMjAyMDA4MDExMjMyMzUucG5n" alt="img" loading="lazy"><br>
<img src="Spring5%E8%AF%BE%E5%A0%82%E7%AC%94.assets/aHR0cHM6Ly9naXRlZS5jb20vd29fYmVsbC9QaWN0dXJlQmVkL3Jhdy9tYXN0ZXIvaW1hZ2UvaW1hZ2UtMjAyMDA4MDExMjMzNDgyMDcucG5n" alt="image-20200801123348207" loading="lazy"><br>
<img src="Spring5%E8%AF%BE%E5%A0%82%E7%AC%94.assets/aHR0cHM6Ly9naXRlZS5jb20vd29fYmVsbC9QaWN0dXJlQmVkL3Jhdy9tYXN0ZXIvaW1hZ2UvaW1hZ2UtMjAyMDA4MDExMjM0NTA4OTcucG5n" alt="image-20200801123450897" loading="lazy"></p>
<h2 id="3-hollespring">3ã€HolleSpring</h2>
<p>åœ¨çˆ¶æ¨¡å—ä¸­å¯¼å…¥jaråŒ…</p>
<pre><code class="language-xml">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-webmvc --&gt;
&lt;dependency&gt;
	&lt;groupId&gt;org.springframework&lt;/groupId&gt;
	&lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;
	&lt;version&gt;5.2.7.RELEASE&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
<p>pojoçš„Hello.java</p>
<pre><code class="language-java">package pojo;

public class Hello {

	private String str;
	
	public String getStr() {
		return str;
	}

	public void setStr(String str) {
		this.str = str;
	}
	
	@Override
	public String toString() {
		return &quot;Holle [str=&quot; + str + &quot;]&quot;;
	}
}
</code></pre>
<p>åœ¨resourceé‡Œé¢çš„xmlé…ç½®</p>
<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans
        https://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt;


    &lt;!--åœ¨Springä¸­åˆ›å»ºå¯¹è±¡ï¼Œåœ¨Springè¿™äº›éƒ½ç§°ä¸ºbean
    	ç±»å‹ å˜é‡å = new ç±»å‹();
    	Holle holle = new Holle();
    	
    	bean = å¯¹è±¡(holle)
    	id = å˜é‡å(holle)
    	class = newçš„å¯¹è±¡(new Holle();)
    	property ç›¸å½“äºç»™å¯¹è±¡ä¸­çš„å±æ€§è®¾å€¼,è®©str=&quot;Spring&quot;
    --&gt;
    
    &lt;bean id=&quot;hello&quot; class=&quot;pojo.Hello&quot;&gt;
        &lt;property name=&quot;str&quot; value=&quot;Spring&quot;/&gt;
    &lt;/bean&gt;
&lt;/beans&gt;
</code></pre>
<p>æµ‹è¯•ç±»MyTest</p>
<pre><code class="language-java">package holle1;

import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;

import pojo.Hello;

public class MyTest {

	public static void main(String[] args) {
		//è·å–Springçš„ä¸Šä¸‹æ–‡å¯¹è±¡
		ApplicationContext context = new ClassPathXmlApplicationContext(&quot;beans.xml&quot;);
		//æˆ‘ä»¬çš„å¯¹è±¡ä¸‹èƒ½åœ¨éƒ½åœ¨springÂ·ä¸­ç®¡ç†äº†ï¼Œæˆ‘ä»¬è¦ä½¿ç”¨ï¼Œç›´æ¥å–å‡ºæ¥å°±å¯ä»¥äº†
		Hello holle = (Hello) context.getBean(&quot;hello&quot;);
		System.out.println(holle.toString());
	}

}
</code></pre>
<p>æ ¸å¿ƒç”¨setæ³¨å…¥ï¼Œæ‰€ä»¥å¿…é¡»è¦æœ‰ä¸‹é¢çš„se()æ–¹æ³•</p>
<pre><code class="language-java">//Helloç±»
public void setStr(String str) {
		this.str = str;
	}
</code></pre>
<p><strong>æ€è€ƒï¼š</strong></p>
<p><img src="Spring5%E8%AF%BE%E5%A0%82%E7%AC%94.assets/aHR0cHM6Ly9naXRlZS5jb20vd29fYmVsbC9QaWN0dXJlQmVkL3Jhdy9tYXN0ZXIvaW1hZ2UvaW1hZ2UtMjAyMDA4MDExNjUxNTYyNTkucG5n" alt="image-20200801165156259" loading="lazy"><br>
IoCï¼šå¯¹è±¡ç”±Spring æ¥åˆ›å»ºï¼Œç®¡ç†ï¼Œè£…é…ï¼</p>
<p><strong>å¼¹å¹•è¯„è®ºé‡Œé¢çš„ç†è§£ï¼š</strong></p>
<p>åŸæ¥è¿™å¥—ç¨‹åºæ˜¯ï¼šä½ å†™å¥½èœå•ä¹°å¥½èœï¼Œå®¢äººæ¥äº†è‡ªå·±æŠŠèœç‚’å¥½æ‹›å¾…ï¼Œå°±ç›¸å½“äºä½ è¯·äººåƒé¥­<br>
ç°åœ¨è¿™å¥—ç¨‹åºæ˜¯ï¼šä½ å‘Šè¯‰æ¥¼ä¸‹é¤å…ï¼Œä½ è¦å“ªäº›èœï¼Œå®¢äººæ¥çš„æ—¶å€™ï¼Œé¤å…æŠŠåšå¥½çš„ä½ éœ€è¦çš„èœé€ä¸Šæ¥<br>
IoCï¼šç‚’èœè¿™ä»¶äº‹ï¼Œä¸å†ç”±ä½ è‡ªå·±æ¥åšï¼Œè€Œæ˜¯å§”æ‰˜ç»™äº†ç¬¬ä¸‰æ–¹__é¤å…æ¥åš</p>
<p>æ­¤æ—¶çš„åŒºåˆ«å°±æ˜¯ï¼Œå¦‚æœæˆ‘è¿˜éœ€è¦åšå…¶ä»–çš„èœï¼Œæˆ‘ä¸éœ€è¦è‡ªå·±æèœè°±ä¹°ææ–™å†åšå¥½ï¼Œè€Œæ˜¯å‘Šè¯‰é¤å…ï¼Œæˆ‘è¦ä»€ä¹ˆèœï¼Œä»€ä¹ˆæ—¶å€™è¦ï¼Œä½ åšå¥½é€æ¥</p>
<p>.</p>
<p>åœ¨å‰é¢ç¬¬ä¸€ä¸ªmoduleè¯•è¯•å¼•å…¥Spring</p>
<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans
        https://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt;

    &lt;bean id=&quot;userDaomSql&quot; class=&quot;dao.UserDaoMysqlImpl&quot;&gt;&lt;/bean&gt;

    &lt;bean id=&quot;userServiceImpl&quot; class=&quot;service.UserServiceImp&quot;&gt;
        &lt;!--refå¼•ç”¨springä¸­å·²ç»åˆ›å»ºå¾ˆå¥½çš„å¯¹è±¡--&gt;
        &lt;!--valueæ˜¯ä¸€ä¸ªå…·ä½“çš„å€¼,åŸºæœ¬æ•°æ®ç±»å‹--&gt;
        &lt;property name=&quot;userDao&quot; ref=&quot;userDaomSql&quot;/&gt;
    &lt;/bean&gt;

&lt;/beans&gt;
</code></pre>
<p>ç¬¬ä¸€ä¸ªmoduleæ”¹è‰¯åæµ‹è¯•</p>
<pre><code class="language-java">package holle0;
import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;
import service.UserServiceImpl;

public class MyTest0 {
	public static void main(String[] args) {
		ApplicationContext context = new ClassPathXmlApplicationContext(&quot;beans.xml&quot;);
		UserServiceImpl userServiceImpl = (UserServiceImpl) context.getBean(&quot;userServiceImpl&quot;);
		userServiceImpl.getUser();
	}
}
</code></pre>
<p><strong>æ€»ç»“ï¼š</strong></p>
<p>æ‰€æœ‰çš„ç±»éƒ½è¦è£…é…çš„beans.xml é‡Œé¢ï¼›</p>
<p>æ‰€æœ‰çš„bean éƒ½è¦é€šè¿‡å®¹å™¨å»å–ï¼›</p>
<p>å®¹å™¨é‡Œé¢å–å¾—çš„beanï¼Œæ‹¿å‡ºæ¥å°±æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œç”¨å¯¹è±¡è°ƒç”¨æ–¹æ³•å³å¯ï¼›</p>
<h2 id="4-iocåˆ›å»ºå¯¹è±¡çš„æ–¹å¼">4ã€IoCåˆ›å»ºå¯¹è±¡çš„æ–¹å¼</h2>
<ol>
<li>ä½¿ç”¨æ— å‚æ„é€ åˆ›å»ºå¯¹è±¡ï¼Œé»˜è®¤ã€‚</li>
<li>ä½¿ç”¨æœ‰å‚æ„é€ ï¼ˆå¦‚ä¸‹ï¼‰</li>
</ol>
<p>ä¸‹æ ‡èµ‹å€¼</p>
<p>indexæŒ‡çš„æ˜¯æœ‰å‚æ„é€ ä¸­å‚æ•°çš„ä¸‹æ ‡ï¼Œä¸‹æ ‡ä»0å¼€å§‹;</p>
<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans
        https://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt;

    &lt;bean id=&quot;user&quot; class=&quot;pojo.User&quot;&gt;
        &lt;constructor-arg index=&quot;0&quot; value=&quot;chen&quot;/&gt;
    &lt;/bean&gt;
&lt;/beans&gt;
</code></pre>
<p>ç±»å‹èµ‹å€¼ï¼ˆä¸å»ºè®®ä½¿ç”¨ï¼‰</p>
<pre><code class="language-xml">&lt;bean id=&quot;user&quot; class=&quot;pojo.User&quot;&gt;
    &lt;constructor-arg type=&quot;java.lang.String&quot; value=&quot;kuang&quot;/&gt;
&lt;/bean&gt;
</code></pre>
<p>ç›´æ¥é€šè¿‡å‚æ•°åï¼ˆæŒæ¡ï¼‰</p>
<pre><code class="language-xml">&lt;bean id=&quot;user&quot; class=&quot;pojo.User&quot;&gt;
    &lt;constructor-arg name=&quot;name&quot; value=&quot;kuang&quot;&gt;&lt;/constructor-arg&gt;
&lt;/bean&gt;
&lt;!-- æ¯”å¦‚å‚æ•°åæ˜¯nameï¼Œåˆ™æœ‰name=&quot;å…·ä½“å€¼&quot; --&gt;
</code></pre>
<p>æ³¨å†Œbeanä¹‹åå°±å¯¹è±¡çš„åˆå§‹åŒ–äº†ï¼ˆ<strong>ç±»ä¼¼ new ç±»å()</strong>ï¼‰</p>
<p>å¼¹å¹•è¯„è®ºï¼š</p>
<p>nameæ–¹å¼è¿˜éœ€è¦æ— å‚æ„é€ å’Œsetæ–¹æ³•,indexå’Œtypeåªéœ€è¦æœ‰å‚æ„é€ </p>
<p>å°±ç®—æ˜¯new ä¸¤ä¸ªå¯¹è±¡ï¼Œä¹Ÿæ˜¯åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼ˆ<strong>å•ä¾‹æ¨¡å¼ï¼šå…¨å±€å”¯ä¸€</strong>ï¼‰</p>
<pre><code class="language-java">User user = (User) context.getBean(&quot;user&quot;);
User user2 = (User) context.getBean(&quot;user&quot;);
system.out.println(user == user2)//ç»“æœä¸ºtrue
</code></pre>
<p>æ€»ç»“ï¼šåœ¨é…ç½®æ–‡ä»¶åŠ è½½çš„æ—¶å€™ï¼Œå®¹å™¨(&lt; bean&gt;)ä¸­ç®¡ç†çš„å¯¹è±¡å°±å·²ç»åˆå§‹åŒ–äº†</p>
<h2 id="5-springé…ç½®">5ã€Springé…ç½®</h2>
<h3 id="51-åˆ«å">5.1ã€åˆ«å</h3>
<pre><code class="language-xml">&lt;bean id=&quot;user&quot; class=&quot;pojo.User&quot;&gt;
    &lt;constructor-arg name=&quot;name&quot; value=&quot;chen&quot;&gt;&lt;/constructor-arg&gt;
&lt;/bean&gt;

&lt;alias name=&quot;user&quot; alias=&quot;userLove&quot;/&gt;
&lt;!-- ä½¿ç”¨æ—¶
	User user2 = (User) context.getBean(&quot;userLove&quot;);	
--&gt;
</code></pre>
<h3 id="52-beançš„é…ç½®">5.2ã€Beançš„é…ç½®</h3>
<pre><code class="language-xml">&lt;!--idï¼šbeançš„å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œä¹Ÿå°±æ˜¯ç›¸å½“äºæˆ‘ä»¬å­¦çš„å¯¹è±¡å
classï¼šbeanå¯¹è±¡æ‰€å¯¹åº”çš„ä¼šé™å®šåï¼šåŒ…å+ç±»å‹
nameï¼šä¹Ÿæ˜¯åˆ«åï¼Œè€Œä¸”nameå¯ä»¥åŒæ—¶å–å¤šä¸ªåˆ«å --&gt;
&lt;bean id=&quot;user&quot; class=&quot;pojo.User&quot; name=&quot;u1 u2,u3;u4&quot;&gt;
    &lt;property name=&quot;name&quot; value=&quot;chen&quot;/&gt;
&lt;/bean&gt;
&lt;!-- ä½¿ç”¨æ—¶
	User user2 = (User) context.getBean(&quot;u1&quot;);	
--&gt;
</code></pre>
<h3 id="53-import">5.3ã€import</h3>
<p>importä¸€èˆ¬ç”¨äºå›¢é˜Ÿå¼€å‘ä½¿ç”¨ï¼Œå®ƒå¯ä»¥å°†å¤šä¸ªé…ç½®æ–‡ä»¶ï¼Œå¯¼å…¥åˆå¹¶ä¸ºä¸€ä¸ª</p>
<p>å‡è®¾ï¼Œç°åœ¨é¡¹ç›®ä¸­æœ‰å¤šä¸ªäººå¼€å‘ï¼Œè¿™ä¸‰ä¸ªäººå¤åˆ¶ä¸åŒçš„ç±»å¼€å‘ï¼Œä¸åŒçš„ç±»éœ€è¦æ³¨å†Œåœ¨ä¸åŒçš„beanä¸­ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©<br>
ç”¨importå°†æ‰€æœ‰äººçš„beans.xmlåˆå¹¶ä¸ºä¸€ä¸ªæ€»çš„ï¼</p>
<ul>
<li>
<p>å¼ ä¸‰(beans.xm1)</p>
</li>
<li>
<p>æå››(beans2.xm1)</p>
</li>
<li>
<p>ç‹äº”(beans3.xm1)</p>
</li>
<li>
<p>applicationContext.xml</p>
<pre><code class="language-xml">&lt;import resource=&quot;beans.xm1&quot;/&gt;
&lt;import resource=&quot;beans2.xml&quot;/&gt;
&lt;import resource=&quot;beans3.xm1&quot;/&gt;
</code></pre>
</li>
</ul>
<p><strong>ä½¿ç”¨çš„æ—¶å€™ï¼Œç›´æ¥ä½¿ç”¨æ€»çš„é…ç½®å°±å¯ä»¥äº†</strong></p>
<p>å¼¹å¹•è¯„è®ºï¼š</p>
<p>æŒ‰ç…§åœ¨æ€»çš„xmlä¸­çš„å¯¼å…¥é¡ºåºæ¥è¿›è¡Œåˆ›å»ºï¼Œåå¯¼å…¥çš„ä¼šé‡å†™å…ˆå¯¼å…¥çš„ï¼Œæœ€ç»ˆå®ä¾‹åŒ–çš„å¯¹è±¡ä¼šæ˜¯åå¯¼å…¥xmlä¸­çš„é‚£ä¸ª</p>
<h2 id="6-ä¾èµ–æ³¨å…¥di">6ã€ä¾èµ–æ³¨å…¥ï¼ˆDIï¼‰</h2>
<h3 id="61-æ„é€ å™¨æ³¨å…¥">6.1ã€æ„é€ å™¨æ³¨å…¥</h3>
<p>ç¬¬4ç‚¹æœ‰æåˆ°</p>
<h3 id="62-setæ–¹å¼æ³¨å…¥é‡ç‚¹">6.2ã€setæ–¹å¼æ³¨å…¥ã€é‡ç‚¹ã€‘</h3>
<p>ä¾èµ–æ³¨å…¥ï¼šsetæ³¨å…¥ï¼</p>
<ul>
<li>ä¾èµ–ï¼šbeanå¯¹è±¡çš„åˆ›å»ºä¾èµ–äºå®¹å™¨</li>
<li>æ³¨å…¥ï¼šbeanå¯¹è±¡ä¸­çš„æ‰€æœ‰å±æ€§ï¼Œç”±å®¹å™¨æ¥æ³¨å…¥</li>
</ul>
<p>ã€ç¯å¢ƒæ­å»ºã€‘</p>
<ol>
<li>
<p>å¤æ‚ç±»å‹</p>
<p>Addressç±»</p>
</li>
<li>
<p>çœŸå®æµ‹è¯•å¯¹è±¡</p>
<p>Studentç±»</p>
</li>
<li>
<p>beans.xml</p>
</li>
<li>
<p>æµ‹è¯•</p>
<p>MyTest3</p>
</li>
</ol>
<p>Studentç±»</p>
<pre><code class="language-java">package pojo;

import java.util.*;
@Get
@Set
public class Student {
//åˆ«å¿˜äº†å†™getå’Œsetæ–¹æ³•ï¼ˆç”¨lombokæ³¨è§£ä¹Ÿè¡Œï¼‰
    private String name;
    private Address address;

    private String[] books;
    private List&lt;String&gt; hobbies;

    private Map&lt;String, String&gt; card;
    private Set&lt;String&gt; game;

    private Properties infor;
    private String wife;

    @Override
    public String toString() {
        return &quot;Student{&quot; +&quot;\n&quot;+
                &quot;name='&quot; + name + '\'' +&quot;\n&quot;+
                &quot;, address=&quot; + address.toString() +&quot;\n&quot;+
                &quot;, books=&quot; + Arrays.toString(books) +&quot;\n&quot;+
                &quot;, hobbies=&quot; + hobbies +&quot;\n&quot;+
                &quot;, card=&quot; + card +&quot;\n&quot;+
                &quot;, game=&quot; + game +&quot;\n&quot;+
                &quot;, infor=&quot; + infor +&quot;\n&quot;+
                &quot;, wife='&quot; + wife + '\'' +&quot;\n&quot;+
                '}';
    }
}
</code></pre>
<p>Addressç±»</p>
<pre><code class="language-java">package pojo;

public class Address {

    private String address;

    public String getAddress() {
        return address;
    }

    public void setAddress(String address) {
        this.address = address;
    }

    @Override
    public String toString() {
        return &quot;Address{&quot; +
                &quot;address='&quot; + address + '\'' +
                '}';
    }
}
</code></pre>
<p>beans.xml</p>
<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
	xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
	xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans
        https://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt;

	&lt;bean id=&quot;address&quot; class=&quot;pojo.Address&quot;&gt;
		&lt;property name=&quot;address&quot; value=&quot;addressä½ å¥½&quot; /&gt;
	&lt;/bean&gt;

	&lt;bean id=&quot;student&quot; class=&quot;pojo.Student&quot;&gt;
		&lt;!--ç¬¬ä¸€ç§ï¼Œæ™®é€šå€¼æ³¨å…¥ --&gt;
		&lt;property name=&quot;name&quot; value=&quot;nameä½ å¥½&quot; /&gt;
		&lt;!--ç¬¬äºŒç§ï¼Œrefæ³¨å…¥ --&gt;
		&lt;property name=&quot;address&quot; ref=&quot;address&quot; /&gt;

		&lt;!--æ•°ç»„æ³¨å…¥ --&gt;
		&lt;property name=&quot;books&quot;&gt;
			&lt;array&gt;
				&lt;value&gt;ä¸‰å›½&lt;/value&gt;
				&lt;value&gt;è¥¿æ¸¸&lt;/value&gt;
				&lt;value&gt;æ°´æµ’&lt;/value&gt;
			&lt;/array&gt;
		&lt;/property&gt;

		&lt;!--liståˆ—è¡¨æ³¨å…¥ --&gt;
		&lt;property name=&quot;hobbies&quot;&gt;
			&lt;list&gt;
				&lt;value&gt;å”±&lt;/value&gt;
				&lt;value&gt;è·³&lt;/value&gt;
				&lt;value&gt;rap&lt;/value&gt;
				&lt;value&gt;ç¯®çƒ&lt;/value&gt;
			&lt;/list&gt;
		&lt;/property&gt;

		&lt;!--mapé”®å€¼å¯¹æ³¨å…¥ --&gt;
		&lt;property name=&quot;card&quot;&gt;
			&lt;map&gt;
				&lt;entry key=&quot;username&quot; value=&quot;root&quot; /&gt;
				&lt;entry key=&quot;password&quot; value=&quot;root&quot; /&gt;
			&lt;/map&gt;
		&lt;/property&gt;

		&lt;!--set(å¯å»é‡)æ³¨å…¥ --&gt;
		&lt;property name=&quot;game&quot;&gt;
			&lt;set&gt;
				&lt;value&gt;wangzhe&lt;/value&gt;
				&lt;value&gt;lol&lt;/value&gt;
				&lt;value&gt;galname&lt;/value&gt;
			&lt;/set&gt;
		&lt;/property&gt;

		&lt;!--ç©ºæŒ‡é’ˆnullæ³¨å…¥ --&gt;
		&lt;property name=&quot;wife&quot;&gt;
			&lt;null&gt;&lt;/null&gt;
		&lt;/property&gt;

		&lt;!--propertieså¸¸é‡æ³¨å…¥ --&gt;
		&lt;property name=&quot;infor&quot;&gt;
			&lt;props&gt;
				&lt;prop key=&quot;id&quot;&gt;20200802&lt;/prop&gt;
				&lt;prop key=&quot;name&quot;&gt;cbh&lt;/prop&gt;
			&lt;/props&gt;
		&lt;/property&gt;
	&lt;/bean&gt;
&lt;/beans&gt;
</code></pre>
<p>MyTest3</p>
<pre><code class="language-java">import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;
import pojo.Student;

public class MyTest3 {
	public static void main(String[] args) {
		ApplicationContext context = new ClassPathXmlApplicationContext(&quot;beans.xml&quot;);
		Student stu = (Student) context.getBean(&quot;student&quot;);
		System.out.println(stu.toString());
	}	
}
</code></pre>
<h3 id="63-æ‹“å±•æ³¨å…¥">6.3ã€æ‹“å±•æ³¨å…¥</h3>
<p>å®˜æ–¹æ–‡æ¡£ä½ç½®</p>
<figure data-type="image" tabindex="4"><img src="Spring5%E8%AF%BE%E5%A0%82%E7%AC%94.assets/aHR0cHM6Ly9naXRlZS5jb20vd29fYmVsbC9QaWN0dXJlQmVkL3Jhdy9tYXN0ZXIvaW1hZ2UvaW1hZ2UtMjAyMDA4MDIxNDI3MTcyMTYucG5n" alt="image-20200802142717216" loading="lazy"></figure>
<p>pojoå¢åŠ Userç±»</p>
<pre><code class="language-java">package pojo;

public class User {
    private String name;
    private int id;
	public User() {
        
	}
	public User(String name, int id) {
		super();
		this.name = name;
		this.id = id;
	}
	public String getName() {
		return name;
	}
	public void setName(String name) {
		this.name = name;
	}
	public int getId() {
		return id;
	}
	public void setId(int id) {
		this.id = id;
	}
	@Override
	public String toString() {
		return &quot;User [name=&quot; + name + &quot;, id=&quot; + id + &quot;]&quot;;
	}
}
</code></pre>
<p>æ³¨æ„ï¼š beans é‡Œé¢åŠ ä¸Šè¿™ä¸‹é¢ä¸¤è¡Œ</p>
<p>ä½¿ç”¨på’Œcå‘½åç©ºé—´éœ€è¦å¯¼å…¥xmlçº¦æŸ</p>
<p>xmlns:p=â€œhttp://www.springframework.org/schema/pâ€<br>
xmlns:c=â€œhttp://www.springframework.org/schema/câ€</p>
<pre><code class="language-xml">?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
       xmlns:p=&quot;http://www.springframework.org/schema/p&quot;
       xmlns:c=&quot;http://www.springframework.org/schema/c&quot;
       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans
        https://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt;

    &lt;!--på‘½åç©ºé—´æ³¨å…¥/setæ³¨å…¥ï¼Œå¯ä»¥ç›´æ¥æ³¨å…¥å±æ€§çš„å€¼-ã€‹property--&gt;
    &lt;bean id=&quot;user&quot; class=&quot;pojo.User&quot; p:name=&quot;cxk&quot; p:id=&quot;20&quot; &gt;
    &lt;/bean&gt;

    &lt;!--cå‘½åç©ºé—´ï¼Œé€šè¿‡æ„é€ å™¨æ³¨å…¥ï¼Œéœ€è¦å†™å…¥æœ‰å‚å’Œæ— å‚æ„é€ æ–¹æ³•-ã€‹construct-args--&gt;
    &lt;bean id=&quot;user2&quot; class=&quot;pojo.User&quot; c:name=&quot;cbh&quot; c:id=&quot;22&quot;&gt;&lt;/bean&gt;
&lt;/beans&gt;
</code></pre>
<p>æµ‹è¯•</p>
<pre><code class="language-java">ApplicationContext context = new ClassPathXmlApplicationContext(&quot;beans.xml&quot;);
User user = context.getBean(&quot;user&quot;,User.class);//ç¡®å®šclasså¯¹è±¡ï¼Œå°±ä¸ç”¨å†å¼ºè½¬äº†
System.out.println(user.toString());
</code></pre>
<h3 id="64-beanä½œç”¨åŸŸ">6.4ã€Beanä½œç”¨åŸŸ</h3>
<figure data-type="image" tabindex="5"><img src="Spring5%E8%AF%BE%E5%A0%82%E7%AC%94.assets/aHR0cHM6Ly9naXRlZS5jb20vd29fYmVsbC9QaWN0dXJlQmVkL3Jhdy9tYXN0ZXIvaW1hZ2UvaW1hZ2UtMjAyMDA4MDIxNDM0MDExNjUucG5n" alt="image-20200802143401165" loading="lazy"></figure>
<figure data-type="image" tabindex="6"><img src="Spring5%E8%AF%BE%E5%A0%82%E7%AC%94.assets/aHR0cHM6Ly9naXRlZS5jb20vd29fYmVsbC9QaWN0dXJlQmVkL3Jhdy9tYXN0ZXIvaW1hZ2UvaW1hZ2UtMjAyMDA4MDIxNDMzNDI1ODYucG5n" alt="image-20200802143342586" loading="lazy"></figure>
<ol>
<li>
<p>å•ä¾‹æ¨¡å¼ï¼ˆé»˜è®¤ï¼‰</p>
<pre><code class="language-xml">&lt;bean id=&quot;user2&quot; class=&quot;pojo.User&quot; c:name=&quot;cxk&quot; c:age=&quot;19&quot; scope=&quot;singleton&quot;&gt;&lt;/bean&gt;
1
</code></pre>
</li>
</ol>
<p><img src="Spring5%E8%AF%BE%E5%A0%82%E7%AC%94.assets/aHR0cHM6Ly9naXRlZS5jb20vd29fYmVsbC9QaWN0dXJlQmVkL3Jhdy9tYXN0ZXIvaW1hZ2UvaW1hZ2UtMjAyMDA4MDIxNDM4MDIwMDUucG5n" alt="image-20200802143802005" loading="lazy"><br>
å¼¹å¹•è¯„è®ºï¼šå•ä¾‹æ¨¡å¼æ˜¯æŠŠå¯¹è±¡æ”¾åœ¨poolä¸­ï¼Œéœ€è¦å†å–å‡ºæ¥ï¼Œä½¿ç”¨çš„éƒ½æ˜¯åŒä¸€ä¸ªå¯¹è±¡å®ä¾‹</p>
<ol>
<li>
<p>åŸå‹æ¨¡å¼: æ¯æ¬¡ä»å®¹å™¨ä¸­getçš„æ—¶å€™ï¼Œéƒ½äº§ç”Ÿä¸€ä¸ªæ–°å¯¹è±¡ï¼</p>
<pre><code class="language-xml">&lt;bean id=&quot;user2&quot; class=&quot;pojo.User&quot; c:name=&quot;cxk&quot; c:age=&quot;19&quot; scope=&quot;prototype&quot;&gt;&lt;/bean&gt;
1
</code></pre>
</li>
</ol>
<figure data-type="image" tabindex="7"><img src="Spring5%E8%AF%BE%E5%A0%82%E7%AC%94.assets/aHR0cHM6Ly9naXRlZS5jb20vd29fYmVsbC9QaWN0dXJlQmVkL3Jhdy9tYXN0ZXIvaW1hZ2UvaW1hZ2UtMjAyMDA4MDIxNDM4MjYyMjcucG5n" alt="image-20200802143826227" loading="lazy"></figure>
<ol>
<li>å…¶ä½™çš„requestã€sessionã€applicationè¿™äº›åªèƒ½åœ¨webå¼€æ”¾ä¸­ä½¿ç”¨ï¼</li>
</ol>
<h2 id="7-beançš„è‡ªåŠ¨è£…é…">7ã€Beançš„è‡ªåŠ¨è£…é…</h2>
<ul>
<li>è‡ªåŠ¨è£…é…æ˜¯Springæ»¡è¶³beanä¾èµ–çš„ä¸€ç§æ–¹å¼</li>
<li>Springä¼šåœ¨ä¸Šä¸‹æ–‡è‡ªåŠ¨å¯»æ‰¾ï¼Œå¹¶è‡ªåŠ¨ç»™beanè£…é…å±æ€§</li>
</ul>
<p>åœ¨Springä¸­æœ‰ä¸‰ç§è£…é…çš„æ–¹å¼</p>
<ol>
<li>
<p>åœ¨xmlä¸­æ˜¾ç¤ºé…ç½®</p>
</li>
<li>
<p>åœ¨javaä¸­æ˜¾ç¤ºé…ç½®</p>
</li>
<li>
<p>éšå¼çš„è‡ªåŠ¨è£…é…bean ã€é‡è¦ã€‘</p>
</li>
<li>
<p>ç¯å¢ƒæ­å»ºï¼šä¸€ä¸ªäººæœ‰ä¸¤ä¸ªå® ç‰©</p>
</li>
<li>
<p>byTypeè‡ªåŠ¨è£…é…ï¼šbyTypeä¼šè‡ªåŠ¨æŸ¥æ‰¾ï¼Œå’Œè‡ªå·±å¯¹è±¡setæ–¹æ³•å‚æ•°çš„ç±»å‹ç›¸åŒçš„bean</p>
<p>ä¿è¯æ‰€æœ‰çš„classå”¯ä¸€(ç±»ä¸ºå…¨å±€å”¯ä¸€)</p>
</li>
<li>
<p>byNameè‡ªåŠ¨è£…é…ï¼šbyNameä¼šè‡ªåŠ¨æŸ¥æ‰¾ï¼Œå’Œè‡ªå·±å¯¹è±¡setå¯¹åº”çš„å€¼å¯¹åº”çš„id</p>
<p>ä¿è¯æ‰€æœ‰idå”¯ä¸€ï¼Œå¹¶ä¸”å’Œsetæ³¨å…¥çš„å€¼ä¸€è‡´</p>
<pre><code class="language-xml">&lt;!-- æ‰¾ä¸åˆ°idå’Œå¤šä¸ªç›¸åŒclass --&gt;
&lt;bean id=&quot;cat1&quot; class=&quot;pojo.Cat&quot;/&gt;
&lt;bean id=&quot;cat2&quot; class=&quot;pojo.Cat&quot;/&gt;
&lt;!-- æ‰¾ä¸åˆ° id=catï¼Œä¸”æœ‰ä¸¤ä¸ªCat --&gt;
</code></pre>
</li>
</ol>
<h3 id="71æµ‹è¯•è‡ªåŠ¨è£…é…">7.1æµ‹è¯•ï¼šè‡ªåŠ¨è£…é…</h3>
<p>pojoçš„Catç±»</p>
<pre><code class="language-java">public class Cat {
    public void shut(){
        System.out.println(&quot;miao&quot;);
    }
}
</code></pre>
<p>pojoçš„Dogç±»</p>
<pre><code class="language-java">public class Dog {

    public void shut(){
        System.out.println(&quot;wow&quot;);
    }

}
</code></pre>
<p>pojoçš„Peopleç±»</p>
<pre><code class="language-java">package pojo;
public class People {
    
    private Cat cat;
    private Dog dog;
    private String name;

    public Cat getCat() {
        return cat;
    }

    public void setCat(Cat cat) {
        this.cat = cat;
    }

    public Dog getDog() {
        return dog;
    }

    public void setDog(Dog dog) {
        this.dog = dog;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }
    @Override
    public String toString() {
        return &quot;People{&quot; +
                &quot;cat=&quot; + cat +
                &quot;, dog=&quot; + dog +
                &quot;, name='&quot; + name + '\'' +
                '}';
    }
}
</code></pre>
<p>xmlé…ç½® -&gt; byType è‡ªåŠ¨è£…é…</p>
<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans
        https://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt;

    &lt;bean id=&quot;cat&quot; class=&quot;pojo.Cat&quot;/&gt;
    &lt;bean id=&quot;dog&quot; class=&quot;pojo.Dog&quot;/&gt;
    
    &lt;!--byTypeä¼šåœ¨å®¹å™¨è‡ªåŠ¨æŸ¥æ‰¾ï¼Œå’Œè‡ªå·±å¯¹è±¡å±æ€§ç›¸åŒçš„bean
		ä¾‹å¦‚ï¼ŒDog dog; é‚£ä¹ˆå°±ä¼šæŸ¥æ‰¾pojoçš„Dogç±»ï¼Œå†è¿›è¡Œè‡ªåŠ¨è£…é…
	--&gt;
    &lt;bean id=&quot;people&quot; class=&quot;pojo.People&quot; autowire=&quot;byType&quot;&gt;
        &lt;property name=&quot;name&quot; value=&quot;cbh&quot;&gt;&lt;/property&gt;
    &lt;/bean&gt;

&lt;/beans&gt;
</code></pre>
<p>xmlé…ç½® -&gt; byName è‡ªåŠ¨è£…é…</p>
<pre><code class="language-xml">&lt;bean id=&quot;cat&quot; class=&quot;pojo.Cat&quot;/&gt;
&lt;bean id=&quot;dog&quot; class=&quot;pojo.Dog&quot;/&gt;
&lt;!--bynameä¼šåœ¨å®¹å™¨è‡ªåŠ¨æŸ¥æ‰¾ï¼Œå’Œè‡ªå·±å¯¹è±¡setæ–¹æ³•çš„setåé¢çš„å€¼å¯¹åº”çš„id
  ä¾‹å¦‚:setDog()ï¼Œå–setåé¢çš„å­—ç¬¦ä½œä¸ºidï¼Œåˆ™è¦id = dog æ‰å¯ä»¥è¿›è¡Œè‡ªåŠ¨è£…é…
  
 --&gt;
&lt;bean id=&quot;people&quot; class=&quot;pojo.People&quot; autowire=&quot;byName&quot;&gt;
	&lt;property name=&quot;name&quot; value=&quot;cbh&quot;&gt;&lt;/property&gt;
&lt;/bean&gt;
</code></pre>
<p>å¼¹å¹•è¯„è®ºï¼šbyNameåªèƒ½å–åˆ°å°å†™ï¼Œå¤§å†™å–ä¸åˆ°</p>
<h3 id="72-ä½¿ç”¨æ³¨è§£å®ç°è‡ªåŠ¨è£…é…">7.2ã€ä½¿ç”¨æ³¨è§£å®ç°è‡ªåŠ¨è£…é…</h3>
<p>jdk1.5æ”¯æŒçš„æ³¨è§£ï¼Œspring2.5æ”¯æŒçš„æ³¨è§£</p>
<p>The introduction of annotation-based configuration raised the question of whether this approach is â€œbetterâ€ than XML.ï¼ˆç¿»è¯‘ï¼šåŸºäºæ³¨é‡Šçš„é…ç½®çš„å¼•å…¥æå‡ºäº†ä¸€ä¸ªé—®é¢˜ï¼Œå³è¿™ç§æ–¹æ³•æ˜¯å¦æ¯”XMLâ€œæ›´å¥½â€ï¼‰</p>
<ol>
<li>å¯¼å…¥contextçº¦æŸ</li>
</ol>
<pre><code class="language-xml">xmlns:context=&quot;http://www.springframework.org/schema/context&quot;
</code></pre>
<ol>
<li>é…ç½®æ³¨è§£çš„æ”¯æŒï¼š&lt; context:annotation-config/&gt;</li>
</ol>
<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
    xmlns:context=&quot;http://www.springframework.org/schema/context&quot;
    xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans
        https://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/context
        https://www.springframework.org/schema/context/spring-context.xsd&quot;&gt;

    &lt;context:annotation-config/&gt;
&lt;/beans&gt;
</code></pre>
<h4 id="721-autowired">7.2.1ã€@Autowired</h4>
<p><strong>é»˜è®¤æ˜¯byTypeæ–¹å¼ï¼Œå¦‚æœåŒ¹é…ä¸ä¸Šï¼Œå°±ä¼šbyName</strong></p>
<p>åœ¨å±æ€§ä¸Šä¸ªä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥åœ¨setä¸Šä½¿ç”¨</p>
<p>æˆ‘ä»¬å¯ä»¥ä¸ç”¨ç¼–å†™setæ–¹æ³•äº†ï¼Œå‰ææ˜¯è‡ªåŠ¨è£…é…çš„å±æ€§åœ¨Springå®¹å™¨é‡Œï¼Œä¸”è¦ç¬¦åˆByName è‡ªåŠ¨è£…é…</p>
<pre><code class="language-java">public class People {
    @Autowired
    private Cat cat;
    @Autowired
    private Dog dog;
    private String name;
}
</code></pre>
<blockquote>
<p>@Nullable å­—æ®µæ ‡è®°äº†è¿™ä¸ªæ³¨è§£ï¼Œè¯´æ˜è¯¥å­—æ®µå¯ä»¥ä¸ºç©º</p>
<p>public name(@Nullable String name){</p>
<p>}</p>
</blockquote>
<pre><code class="language-java">//æºç 
public @interface Autowired { 
	boolean required() default true; 
}
</code></pre>
<p>å¦‚æœå®šä¹‰äº†Autowireçš„requireå±æ€§ä¸ºfalseï¼Œè¯´æ˜è¿™ä¸ªå¯¹è±¡å¯ä»¥ä¸ºnullï¼Œå¦åˆ™ä¸å…è®¸ä¸ºç©ºï¼ˆfalseè¡¨ç¤ºæ‰¾ä¸åˆ°è£…é…ï¼Œä¸æŠ›å‡ºå¼‚å¸¸ï¼‰</p>
<h4 id="722-autowiredqualifier">7.2.2ã€@Autowired+@Qualifier</h4>
<p><strong>@Autowiredä¸èƒ½å”¯ä¸€è£…é…æ—¶ï¼Œéœ€è¦@Autowired+@Qualifier</strong></p>
<p>å¦‚æœ@Autowiredè‡ªåŠ¨è£…é…ç¯å¢ƒæ¯”è¾ƒå¤æ‚ã€‚è‡ªåŠ¨è£…é…æ— æ³•é€šè¿‡ä¸€ä¸ªæ³¨è§£å®Œæˆçš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨@Qualifier(value = â€œdogâ€)å»é…åˆä½¿ç”¨ï¼ŒæŒ‡å®šä¸€ä¸ªå”¯ä¸€çš„idå¯¹è±¡</p>
<pre><code class="language-java">public class People {
    @Autowired
    private Cat cat;
    @Autowired
    @Qualifier(value = &quot;dog&quot;)
    private Dog dog;
    private String name;
}
</code></pre>
<p>å¼¹å¹•è¯„è®ºï¼š</p>
<p>å¦‚æœxmlæ–‡ä»¶ä¸­åŒä¸€ä¸ªå¯¹è±¡è¢«å¤šä¸ªbeanä½¿ç”¨ï¼ŒAutowiredæ— æ³•æŒ‰ç±»å‹æ‰¾åˆ°ï¼Œå¯ä»¥ç”¨@QualifieræŒ‡å®šidæŸ¥æ‰¾</p>
<h4 id="723-resource">7.2.3ã€@Resource</h4>
<p><strong>é»˜è®¤æ˜¯byNameæ–¹å¼ï¼Œå¦‚æœåŒ¹é…ä¸ä¸Šï¼Œå°±ä¼šbyType</strong></p>
<pre><code class="language-java">public class People {
    Resource(name=&quot;cat&quot;)
    private Cat cat;
    Resource(name=&quot;dog&quot;)
    private Dog dog;
    private String name;
}
</code></pre>
<p>å¼¹å¹•è¯„è®ºï¼š</p>
<p>Autowiredæ˜¯byTypeï¼Œ@Autowired+@Qualifier = byType || byName</p>
<p>Autowiredæ˜¯å…ˆbyteType,å¦‚æœå”¯ä¸€å‰‡æ³¨å…¥ï¼Œå¦åˆ™byNameæŸ¥æ‰¾ã€‚resourceæ˜¯å…ˆbyname,ä¸ç¬¦åˆå†ç»§ç»­byType</p>
<h4 id="åŒºåˆ«">åŒºåˆ«ï¼š</h4>
<p>@Resourceå’Œ@Autowiredçš„åŒºåˆ«ï¼š</p>
<ul>
<li>éƒ½æ˜¯ç”¨æ¥è‡ªåŠ¨è£…é…çš„ï¼Œéƒ½å¯ä»¥æ”¾åœ¨å±æ€§å­—æ®µä¸Š</li>
<li>@Autowiredé€šè¿‡byTypeçš„æ–¹å¼å®ç°ï¼Œè€Œä¸”å¿…é¡»è¦æ±‚è¿™ä¸ªå¯¹è±¡å­˜åœ¨ï¼ã€å¸¸ç”¨ã€‘</li>
<li>@Resourceé»˜è®¤é€šè¿‡bynameçš„æ–¹å¼å®ç°ï¼Œå¦‚æœæ‰¾ä¸åˆ°åå­—ï¼Œåˆ™é€šè¿‡byTypeå®ç°ï¼å¦‚æœä¸¤ä¸ªéƒ½æ‰¾ä¸åˆ°çš„æƒ…å†µä¸‹ï¼Œå°±æŠ¥é”™ï¼ã€å¸¸ç”¨ã€‘</li>
<li>æ‰§è¡Œé¡ºåºä¸åŒï¼š@Autowiredé€šè¿‡byTypeçš„æ–¹å¼å®ç°ã€‚@Resourceé»˜è®¤é€šè¿‡bynameçš„æ–¹å¼å®ç°</li>
</ul>
<h2 id="8-ä½¿ç”¨æ³¨è§£å¼€å‘">8ã€ä½¿ç”¨æ³¨è§£å¼€å‘</h2>
<p>åœ¨spring4ä¹‹åï¼Œä½¿ç”¨æ³¨è§£å¼€å‘ï¼Œå¿…é¡»è¦ä¿è¯aopåŒ…çš„å¯¼å…¥<br>
<img src="Spring5%E8%AF%BE%E5%A0%82%E7%AC%94.assets/aHR0cHM6Ly9naXRlZS5jb20vd29fYmVsbC9QaWN0dXJlQmVkL3Jhdy9tYXN0ZXIvaW1hZ2UvaW1hZ2UtMjAyMDA4MDIyMDE5MjQ0OTAucG5n" alt="image-20200802201924490" loading="lazy"><br>
ä½¿ç”¨æ³¨è§£éœ€è¦å¯¼å…¥contexçš„çº¦æŸ</p>
<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
    xmlns:context=&quot;http://www.springframework.org/schema/context&quot;
    xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans
        https://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/context
        https://www.springframework.org/schema/context/spring-context.xsd&quot;&gt;

    &lt;context:annotation-config/&gt;

&lt;/beans&gt;
</code></pre>
<h3 id="81-bean">8.1ã€bean</h3>
<p>å¼¹å¹•è¯„è®ºï¼š<br>
æœ‰äº†&lt; context:component-scan&gt;ï¼Œå¦ä¸€ä¸ª&lt; context:annotation-config/&gt;æ ‡ç­¾å¯ä»¥ç§»é™¤æ‰ï¼Œå› ä¸ºå·²ç»è¢«åŒ…å«è¿›å»äº†ã€‚</p>
<pre><code class="language-xml">&lt;!--æŒ‡å®šè¦æ‰«æçš„åŒ…ï¼Œè¿™ä¸ªåŒ…ä¸‹é¢çš„æ³¨è§£æ‰ä¼šç”Ÿæ•ˆ
	åˆ«åªæ‰«ä¸€ä¸ªcom.kuang.pojoåŒ…--&gt; 
&lt;context:component-scan base-package=&quot;com.kuang&quot;/&gt; 
&lt;context:annotation-config/&gt;
</code></pre>
<pre><code class="language-java">//@Component ç»„ä»¶
//ç­‰ä»·äº&lt;bean id=&quot;user&quot; classs&quot;pojo.User&quot;/&gt; 
@Component
public class User {  
     public String name =&quot;ç§¦ç–†&quot;;
}
</code></pre>
<h3 id="82-å±æ€§å¦‚ä½•æ³¨å…¥value">8.2ã€å±æ€§å¦‚ä½•æ³¨å…¥@value</h3>
<pre><code class="language-java">@Component
public class User { 
    //ç›¸å½“äº&lt;property name=&quot;name&quot; value=&quot;kuangshen&quot;/&gt; 
    @value(&quot;kuangshen&quot;) 
    public String name; 
    
    //ä¹Ÿå¯ä»¥æ”¾åœ¨setæ–¹æ³•ä¸Šé¢
    //@value(&quot;kuangshen&quot;)
    public void setName(String name) { 
        this.name = name; 
    }
}
</code></pre>
<h3 id="83-è¡ç”Ÿçš„æ³¨è§£">8.3ã€è¡ç”Ÿçš„æ³¨è§£</h3>
<p>@Componentæœ‰å‡ ä¸ªè¡ç”Ÿæ³¨è§£ï¼Œä¼šæŒ‰ç…§webå¼€å‘ä¸­ï¼Œmvcæ¶æ„ä¸­åˆ†å±‚ã€‚</p>
<ul>
<li>dao ï¼ˆ@Repositoryï¼‰</li>
<li>serviceï¼ˆ@Serviceï¼‰</li>
<li>controllerï¼ˆ@Controllerï¼‰</li>
</ul>
<p><strong>è¿™å››ä¸ªæ³¨è§£çš„åŠŸèƒ½æ˜¯ä¸€æ ·çš„ï¼Œéƒ½æ˜¯ä»£è¡¨å°†æŸä¸ªç±»æ³¨å†Œåˆ°å®¹å™¨ä¸­</strong></p>
<h3 id="84-è‡ªåŠ¨è£…é…ç½®">8.4ã€è‡ªåŠ¨è£…é…ç½®</h3>
<p>@Autowiredï¼šé»˜è®¤æ˜¯byTypeæ–¹å¼ï¼Œå¦‚æœåŒ¹é…ä¸ä¸Šï¼Œå°±ä¼šbyName</p>
<p>@Nullableï¼šå­—æ®µæ ‡è®°äº†è¿™ä¸ªæ³¨è§£ï¼Œè¯´æ˜è¯¥å­—æ®µå¯ä»¥ä¸ºç©º</p>
<p>@Resourceï¼šé»˜è®¤æ˜¯byNameæ–¹å¼ï¼Œå¦‚æœåŒ¹é…ä¸ä¸Šï¼Œå°±ä¼šbyType</p>
<h3 id="85-ä½œç”¨åŸŸscope">8.5ã€ä½œç”¨åŸŸ@scope</h3>
<pre><code class="language-java">//åŸå‹æ¨¡å¼prototypeï¼Œå•ä¾‹æ¨¡å¼singleton
//scope(&quot;prototype&quot;)ç›¸å½“äº&lt;bean scope=&quot;prototype&quot;&gt;&lt;/bean&gt;
@Component 
@scope(&quot;prototype&quot;)
public class User { 
    
    //ç›¸å½“äº&lt;property name=&quot;name&quot; value=&quot;kuangshen&quot;/&gt; 
    @value(&quot;kuangshen&quot;) 
    public String name; 
    
    //ä¹Ÿå¯ä»¥æ”¾åœ¨setæ–¹æ³•ä¸Šé¢
    @value(&quot;kuangshen&quot;)
    public void setName(String name) { 
        this.name = name; 
    }
}
</code></pre>
<h3 id="86-å°ç»“">8.6ã€å°ç»“</h3>
<p><strong>xmlä¸æ³¨è§£ï¼š</strong></p>
<ul>
<li>xmlæ›´åŠ ä¸‡èƒ½ï¼Œç»´æŠ¤ç®€å•ï¼Œé€‚ç”¨äºä»»ä½•åœºåˆ</li>
<li>æ³¨è§£ï¼Œä¸æ˜¯è‡ªå·±çš„ç±»ä½¿ç”¨ä¸äº†ï¼Œç»´æŠ¤å¤æ‚</li>
</ul>
<p><strong>æœ€ä½³å®è·µï¼š</strong></p>
<ul>
<li>xmlç”¨æ¥ç®¡ç†bean</li>
<li>æ³¨è§£åªç”¨æ¥å®Œæˆå±æ€§çš„æ³¨å…¥</li>
<li>è¦å¼€å¯æ³¨è§£æ”¯æŒ</li>
</ul>
<h2 id="9-ä½¿ç”¨javaçš„æ–¹å¼é…ç½®spring">9ã€ä½¿ç”¨Javaçš„æ–¹å¼é…ç½®Spring</h2>
<p>ä¸ä½¿ç”¨Springçš„xmlé…ç½®ï¼Œå®Œå…¨äº¤ç»™javaæ¥åšï¼</p>
<p>Springçš„ä¸€ä¸ªå­é¡¹ç›®ï¼Œåœ¨spring4ä¹‹åï¼Œï¼Œï¼Œå®ƒæˆä¸ºäº†æ ¸å¿ƒåŠŸèƒ½</p>
<p><img src="Spring5%E8%AF%BE%E5%A0%82%E7%AC%94.assets/aHR0cHM6Ly9naXRlZS5jb20vd29fYmVsbC9QaWN0dXJlQmVkL3Jhdy9tYXN0ZXIvaW1hZ2UvaW1hZ2UtMjAyMDA4MDIyMTU3NTI4NjgucG5n" alt="image-20200802215752868" loading="lazy"><br>
<strong>å®ä½“ç±»ï¼špojoçš„User.java</strong></p>
<pre><code class="language-java">//è¿™é‡Œè¿™ä¸ªæ³¨è§£çš„æ„æ€,å°±æ˜¯è¯´æ˜è¿™ä¸ªç±»è¢«Springæ¥ç®¡äº†,æ³¨å†Œåˆ°äº†å®¹å™¨ä¸­ 
@component 
public class User { 
    private String name;
    
    public String getName() { 
    	return name; 
    } 
    //å±æ€§æ³¨å…¥å€¼
    @value(&quot;QINJIANG')  
    public void setName(String name) { 
    	this.name = name; 
    } 
    @Override 
    public String toString() { 
        return &quot;user{&quot; + 
        &quot;name='&quot; + name + '\''+ 
        '}'; 
    } 
}
</code></pre>
<p>å¼¹å¹•è¯„è®ºï¼šè¦ä¹ˆä½¿ç”¨@Beanï¼Œè¦ä¹ˆä½¿ç”¨@Componentå’ŒComponentScanï¼Œä¸¤ç§æ•ˆæœä¸€æ ·</p>
<p><strong>é…ç½®æ–‡ä»¶ï¼šconfigä¸­çš„kuang.java</strong></p>
<p>@Import(KuangConfig2.class)ï¼Œç”¨@importæ¥åŒ…å«KuangConfig2.java</p>
<pre><code class="language-java">//è¿™ä¸ªä¹Ÿä¼šSpringå®¹å™¨æ‰˜ç®¡,æ³¨å†Œåˆ°å®¹å™¨ä¸­,å› ä¸ºä»–æœ¬ç±³å°±æ˜¯ä¸€ä¸ª@Component 
// @Configurationè¡¨è¿™æ˜¯ä¸€ä¸ªé…ç½®ç±»,å°±åƒæˆ‘ä»¬ä¹‹å‰çœ‹çš„beans.xmlï¼Œç±»ä¼¼äº&lt;beans&gt;æ ‡ç­¾
@Configuration 
@componentScan(&quot;com.Kuang.pojo&quot;) //å¼€å¯æ‰«æ
//@Import(KuangConfig2.class)
public class KuangConfig { 
    //æ³¨å†Œä¸€ä¸ªbean , å°±ç›¸å½“äºæˆ‘ä»¬ä¹‹å‰å†™çš„ä¸€ä¸ªbean æ ‡ç­¾ 
    //è¿™ä¸ªæ–¹æ³•çš„åå­—,å°±ç›¸å½“äºbean æ ‡ç­¾ä¸­çš„ id å±æ€§ -&gt;getUser
    //è¿™ä¸ªæ–¹æ³•çš„è¿”åŒå€¼,å°±ç›¸å½“äºbean æ ‡ç­¾ä¸­çš„class å±æ€§ -&gt;User
    
    //@Bean 
    public User getUser(){ 
    	return new User(); //å°±æ˜¯è¿”å›è¦æ³¨å…¥åˆ°beançš„å¯¹è±¡! 
    } 
}
</code></pre>
<p>å¼¹å¹•è¯„è®ºï¼šComponentScanã€@Component(&quot;pojoâ€) è¿™ä¸¤ä¸ªæ³¨è§£é…åˆä½¿ç”¨</p>
<p><strong>æµ‹è¯•ç±»</strong></p>
<pre><code class="language-java">public class MyTest { 
    public static void main(String[ ] args) { 
    //å¦‚æœå®Œå…¨ä½¿ç”¨äº†é…ç½®ç±»æ–¹å¼å»åš,æˆ‘ä»¬å°±åªèƒ½é€šè¿‡ Annotationconfig ä¸Šä¸‹æ–‡æ¥è·å–å®¹å™¨,é€šè¿‡é…ç½®ç±»çš„classå¯¹è±¡åŠ è½½! 
    ApplicationContext context = new AnnotationConfigApplicationContext(KuangConfig.Class); //classå¯¹è±¡
    User getUser =(User)context.getBean( &quot;getUser&quot;); //æ–¹æ³•ågetUser
    System.out.Println(getUser.getName()); 
    } 
}
</code></pre>
<p><strong>ä¼šåˆ›å»ºä¸¤ä¸ªç›¸åŒå¯¹è±¡é—®é¢˜çš„è¯´æ˜ï¼š</strong></p>
<p><strong>å¼¹å¹•æ€»ç»“ - -&gt; @Beanæ˜¯ç›¸å½“äº&lt; bean&gt;æ ‡ç­¾åˆ›å»ºçš„å¯¹è±¡ï¼Œè€Œæˆ‘ä»¬ä¹‹å‰å­¦çš„@Componentæ˜¯é€šè¿‡springè‡ªåŠ¨åˆ›å»ºçš„è¿™ä¸ªè¢«æ³¨è§£å£°æ˜çš„å¯¹è±¡ï¼Œæ‰€ä»¥è¿™é‡Œç›¸å½“äºæœ‰ä¸¤ä¸ªUserå¯¹è±¡è¢«åˆ›å»ºäº†ã€‚ä¸€ä¸ªæ˜¯beanæ ‡ç­¾åˆ›å»ºçš„ï¼ˆ@Beanï¼‰ï¼Œä¸€ä¸ªæ˜¯é€šè¿‡æ‰«æç„¶åä½¿ç”¨@Componentï¼Œspringè‡ªåŠ¨åˆ›å»ºçš„Userå¯¹è±¡ï¼Œæ‰€ä»¥è¿™é‡Œå»æ‰@Beanè¿™äº›ä¸œè¥¿ï¼Œç„¶åå¼€å¯æ‰«æã€‚ä¹‹ååœ¨Userå¤´ä¸Šç”¨@Componentå³å¯è¾¾åˆ°springè‡ªåŠ¨åˆ›å»ºUserå¯¹è±¡äº†</strong></p>
<pre><code class="language-java">//è¿™ä¸ªä¹Ÿä¼šSpringå®¹å™¨æ‰˜ç®¡,æ³¨å†Œåˆ°å®¹å™¨ä¸­,å› ä¸ºä»–æœ¬ç±³å°±æ˜¯ä¸€ä¸ª@Component 
// @Configurationè¡¨è¿™æ˜¯ä¸€ä¸ªé…ç½®ç±»,å°±åƒæˆ‘ä»¬ä¹‹å‰çœ‹çš„beans.xmlï¼Œç±»ä¼¼äº&lt;beans&gt;æ ‡ç­¾
@Configuration 
@componentScan(&quot;com.Kuang.pojo&quot;) //å¼€å¯æ‰«æ
//@Import(KuangConfig2.class)
public class KuangConfig { 
    //æ³¨å†Œä¸€ä¸ªbean , å°±ç›¸å½“äºæˆ‘ä»¬ä¹‹å‰å†™çš„ä¸€ä¸ªbean æ ‡ç­¾ 
    //è¿™ä¸ªæ–¹æ³•çš„åå­—,å°±ç›¸å½“äºbean æ ‡ç­¾ä¸­çš„ id å±æ€§ -&gt;getUser
    //è¿™ä¸ªæ–¹æ³•çš„è¿”åŒå€¼,å°±ç›¸å½“äºbean æ ‡ç­¾ä¸­çš„class å±æ€§ -&gt;User
    
    //@Bean 
    public User getUser(){ 
    	return new User(); //å°±æ˜¯è¿”å›è¦æ³¨å…¥åˆ°beançš„å¯¹è±¡! 
    } 
}
</code></pre>
<p>å¼¹å¹•è¯„è®ºï¼šComponentScanã€@Component(&quot;pojoâ€) è¿™ä¸¤ä¸ªæ³¨è§£é…åˆä½¿ç”¨</p>
<p><strong>æµ‹è¯•ç±»</strong></p>
<pre><code class="language-java">public class MyTest { 
    public static void main(String[ ] args) { 
    //å¦‚æœå®Œå…¨ä½¿ç”¨äº†é…ç½®ç±»æ–¹å¼å»åš,æˆ‘ä»¬å°±åªèƒ½é€šè¿‡ Annotationconfig ä¸Šä¸‹æ–‡æ¥è·å–å®¹å™¨,é€šè¿‡é…ç½®ç±»çš„classå¯¹è±¡åŠ è½½! 
    ApplicationContext context = new AnnotationConfigApplicationContext(KuangConfig.Class); //classå¯¹è±¡
    User getUser =(User)context.getBean( &quot;getUser&quot;); //æ–¹æ³•ågetUser
    System.out.Println(getUser.getName()); 
    } 
}
</code></pre>
<p><strong>ä¼šåˆ›å»ºä¸¤ä¸ªç›¸åŒå¯¹è±¡é—®é¢˜çš„è¯´æ˜ï¼š</strong></p>
<p><strong>å¼¹å¹•æ€»ç»“ - -&gt; @Beanæ˜¯ç›¸å½“äº&lt; bean&gt;æ ‡ç­¾åˆ›å»ºçš„å¯¹è±¡ï¼Œè€Œæˆ‘ä»¬ä¹‹å‰å­¦çš„@Componentæ˜¯é€šè¿‡springè‡ªåŠ¨åˆ›å»ºçš„è¿™ä¸ªè¢«æ³¨è§£å£°æ˜çš„å¯¹è±¡ï¼Œæ‰€ä»¥è¿™é‡Œç›¸å½“äºæœ‰ä¸¤ä¸ªUserå¯¹è±¡è¢«åˆ›å»ºäº†ã€‚ä¸€ä¸ªæ˜¯beanæ ‡ç­¾åˆ›å»ºçš„ï¼ˆ@Beanï¼‰ï¼Œä¸€ä¸ªæ˜¯é€šè¿‡æ‰«æç„¶åä½¿ç”¨@Componentï¼Œspringè‡ªåŠ¨åˆ›å»ºçš„Userå¯¹è±¡ï¼Œæ‰€ä»¥è¿™é‡Œå»æ‰@Beanè¿™äº›ä¸œè¥¿ï¼Œç„¶åå¼€å¯æ‰«æã€‚ä¹‹ååœ¨Userå¤´ä¸Šç”¨@Componentå³å¯è¾¾åˆ°springè‡ªåŠ¨åˆ›å»ºUserå¯¹è±¡äº†</strong></p>
<h2 id="10-åŠ¨æ€ä»£ç†">10ã€åŠ¨æ€ä»£ç†</h2>
<p>ä»£ç†æ¨¡å¼æ˜¯SpringAOPçš„åº•å±‚</p>
<p>åˆ†ç±»ï¼šåŠ¨æ€ä»£ç†å’Œé™æ€ä»£ç†</p>
<figure data-type="image" tabindex="8"><img src="Spring5%E8%AF%BE%E5%A0%82%E7%AC%94.assets/aHR0cHM6Ly9naXRlZS5jb20vd29fYmVsbC9QaWN0dXJlQmVkL3Jhdy9tYXN0ZXIvaW1hZ2UvaW1hZ2UtMjAyMDA4MDMxMDE0Mjc4NDYucG5n" alt="image-20200803101427846" loading="lazy"></figure>
<h3 id="101-é™æ€ä»£ç†">10.1ã€é™æ€ä»£ç†</h3>
<p><img src="Spring5%E8%AF%BE%E5%A0%82%E7%AC%94.assets/aHR0cHM6Ly9naXRlZS5jb20vd29fYmVsbC9QaWN0dXJlQmVkL3Jhdy9tYXN0ZXIvaW1hZ2UvaW1hZ2UtMjAyMDA4MDMxMDE2MjE4NjgucG5n" alt="image-20200803101621868" loading="lazy"><br>
ä»£ç æ­¥éª¤ï¼š</p>
<p>1ã€æ¥å£</p>
<pre><code class="language-java">package pojo;
public interface Host {
	public void rent();
}
</code></pre>
<p>2ã€çœŸå®è§’è‰²</p>
<pre><code class="language-java">package pojo;
public class HostMaster implements Host{	
    
	public void rent() {
		System.out.println(&quot;æˆ¿ä¸œè¦å‡ºç§Ÿæˆ¿å­&quot;);
	}
}
</code></pre>
<p>3ã€ä»£ç†è§’è‰²</p>
<pre><code class="language-java">package pojo;
public class Proxy {

	public Host host;
	
	public Proxy() {
		
	}
	
	public Proxy(Host host) {
		super();
		this.host = host;
	}
	
	public void rent() {
		seeHouse();
		host.rent();
		fee();
		sign();
	}
	//çœ‹æˆ¿
	public void seeHouse() {
		System.out.println(&quot;çœ‹æˆ¿å­&quot;);
	}
	//æ”¶è´¹
	public void fee() {
		System.out.println(&quot;æ”¶ä¸­ä»‹è´¹&quot;);
	}
	//åˆåŒ
	public void sign() {
		System.out.println(&quot;ç­¾åˆåŒ&quot;);
	}		
}
</code></pre>
<p>4ã€å®¢æˆ·ç«¯è®¿é—®ä»£ç†è§’è‰²</p>
<pre><code class="language-java">package holle4_proxy;

import pojo.Host;
import pojo.HostMaster;
import pojo.Proxy;

public class My {

	public static void main(String[] args) {
		//æˆ¿ä¸œè¦å‡ºç§Ÿæˆ¿å­
		Host host = new HostMaster();
		//ä¸­ä»‹å¸®æˆ¿ä¸œå‡ºç§Ÿæˆ¿å­ï¼Œä½†ä¹Ÿæ”¶å–ä¸€å®šè´¹ç”¨ï¼ˆå¢åŠ ä¸€äº›æˆ¿ä¸œä¸åšçš„æ“ä½œï¼‰
		Proxy proxy = new Proxy(host);
		//çœ‹ä¸åˆ°æˆ¿ä¸œï¼Œä½†é€šè¿‡ä»£ç†ï¼Œè¿˜æ˜¯ç§Ÿåˆ°äº†æˆ¿å­
		proxy.rent();
		
	}
}
</code></pre>
<p><img src="Spring5%E8%AF%BE%E5%A0%82%E7%AC%94.assets/aHR0cHM6Ly9naXRlZS5jb20vd29fYmVsbC9QaWN0dXJlQmVkL3Jhdy9tYXN0ZXIvaW1hZ2UvaW1hZ2UtMjAyMDA4MDMxMDUyMjk0NzgucG5n" alt="image-20200803105229478" loading="lazy"><br>
ä»£ç ç¿»å€ï¼šå‡ åä¸ªçœŸå®è§’è‰²å°±å¾—å†™å‡ åä¸ªä»£ç†</p>
<p>AOPæ¨ªå‘å¼€å‘</p>
<figure data-type="image" tabindex="9"><img src="Spring5%E8%AF%BE%E5%A0%82%E7%AC%94.assets/aHR0cHM6Ly9naXRlZS5jb20vd29fYmVsbC9QaWN0dXJlQmVkL3Jhdy9tYXN0ZXIvaW1hZ2UvaW1hZ2UtMjAyMDA4MDMxMTE1Mzk2MjEucG5n" alt="image-20200803111539621" loading="lazy"></figure>
<h3 id="102-åŠ¨æ€ä»£ç†">10.2ã€åŠ¨æ€ä»£ç†</h3>
<p>åŠ¨æ€ä»£ç†å’Œé™æ€è§’è‰²ä¸€æ ·ï¼ŒåŠ¨æ€ä»£ç†åº•å±‚æ˜¯åå°„æœºåˆ¶</p>
<p>åŠ¨æ€ä»£ç†ç±»æ˜¯åŠ¨æ€ç”Ÿæˆçš„ï¼Œä¸æ˜¯æˆ‘ä»¬ç›´æ¥å†™å¥½çš„ï¼</p>
<p>åŠ¨æ€ä»£ç†(ä¸¤å¤§ç±»)ï¼šåŸºäºæ¥å£ï¼ŒåŸºäºç±»</p>
<ul>
<li>åŸºäºæ¥å£ï¼šJDKçš„åŠ¨æ€ä»£ç†ã€ä½¿ç”¨ingã€‘</li>
<li>åŸºäºç±»ï¼šcglib</li>
<li>javaå­—èŠ‚ç å®ç°ï¼šjavasisit</li>
</ul>
<p>äº†è§£ä¸¤ä¸ªç±»<br>
1ã€Proxyï¼šä»£ç†<br>
2ã€InvocationHandlerï¼šè°ƒç”¨å¤„ç†ç¨‹åº<br>
<img src="Spring5%E8%AF%BE%E5%A0%82%E7%AC%94.assets/aHR0cHM6Ly9naXRlZS5jb20vd29fYmVsbC9QaWN0dXJlQmVkL3Jhdy9tYXN0ZXIvaW1hZ2UvaW1hZ2UtMjAyMDA4MDMxMTI2MTk4NjgucG5n" alt="image-20200803112619868" loading="lazy"></p>
<p>å®ä¾‹ï¼š</p>
<p>æ¥å£ Host.java</p>
<pre><code class="language-java">//æ¥å£
package pojo2;
public interface Host {
	public void rent();
	
}
</code></pre>
<p>æ¥å£Hostå®ç°ç±» HostMaster.java</p>
<pre><code class="language-java">//æ¥å£å®ç°ç±»
package pojo2;
public class HostMaster implements Host{	
	public void rent() {
		System.out.println(&quot;æˆ¿ä¸œè¦ç§Ÿæˆ¿å­&quot;);
	}
}
</code></pre>
<p>ä»£ç†è§’è‰²çš„å¤„ç†ç¨‹åºç±» ProxyInvocationHandler.java</p>
<pre><code class="language-java">package pojo2;

import java.lang.reflect.InvocationHandler;
import java.lang.reflect.Method;
import java.lang.reflect.Proxy;

///ç”¨è¿™ä¸ªç±»ï¼Œè‡ªåŠ¨ç”Ÿæˆä»£ç†
public class ProxyInvocationHandler implements InvocationHandler {

	// Foo f =(Foo) Proxy.NewProxyInstance(Foo. Class.GetClassLoader(),
	// new Class&lt;?&gt;[] { Foo.Class },
	// handler);

	// è¢«ä»£ç†çš„æ¥å£
	public HostMaster hostMaster ;
	
	public void setHostMaster(HostMaster hostMaster) {
		this.hostMaster = hostMaster;
	}

	// å¾—åˆ°ç”Ÿæˆçš„ä»£ç†ç±» 
	public Object getProxy() {
		// newProxyInstance() -&gt; ç”Ÿæˆä»£ç†å¯¹è±¡ï¼Œå°±ä¸ç”¨å†å†™å…·ä½“çš„ä»£ç†ç±»äº†
		// this.getClass().getClassLoader() -&gt; æ‰¾åˆ°åŠ è½½ç±»çš„ä½ç½®
		// hostMaster.getClass().getInterfaces() -&gt; ä»£ç†çš„å…·ä½“æ¥å£
		// this -&gt; ä»£è¡¨äº†æ¥å£InvocationHandlerçš„å®ç°ç±»ProxyInvocationHandler
		return Proxy.newProxyInstance(this.getClass().getClassLoader(), hostMaster.getClass().getInterfaces(), this);


	// å¤„ç†ä»£ç†å®ä¾‹å¹¶è¿”å›ç»“æœ
	public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {
		seeHouse();
		// åŠ¨æ€ä»£ç†çš„æœ¬è´¨ï¼Œå°±æ˜¯ä½¿ç”¨åå°„æœºåˆ¶å®ç°çš„
        // invoke()æ‰§è¡Œå®ƒçœŸæ­£è¦æ‰§è¡Œçš„æ–¹æ³•
		Object result = method.invoke(hostMaster, args);
		fee();
		return result;
	}

	public void seeHouse() {
		System.out.println(&quot;çœ‹æˆ¿å­&quot;);
	}

	public void fee() {
		System.out.println(&quot;æ”¶ä¸­ä»‹è´¹&quot;);
	}

}

</code></pre>
<p>ç”¨æˆ·ç±» My2.java</p>
<pre><code class="language-java">package holle4_proxy;

import pojo2.Host;
import pojo2.Host2;
import pojo2.HostMaster;
import pojo2.ProxyInvocationHandler;

public class My2 {

	public static void main(String[] args) {
        
		//çœŸå®è§’è‰²
		HostMaster hostMaster = new HostMaster();
        
		//ä»£ç†è§’è‰²ï¼Œç°åœ¨æ²¡æœ‰ï¼›ç”¨ä»£ç†è§’è‰²çš„å¤„ç†ç¨‹åºæ¥å®ç°Hostæ¥å£çš„è°ƒç”¨
		ProxyInvocationHandler pih = new ProxyInvocationHandler();
        
        //pih -&gt; HostMasteræ¥å£ç±» -&gt; Hostæ¥å£
		pih.setHostMaster(hostMaster);
        
		//è·å–newProxyInstanceåŠ¨æ€ç”Ÿæˆä»£ç†ç±»
		Host proxy = (Host) pih.getProxy();
		
		proxy.rent();

	}
}
</code></pre>
<p>å¼¹å¹•è¯„è®ºï¼š<br>
ä»€ä¹ˆæ—¶å€™è°ƒç”¨invokeæ–¹æ³•çš„?<br>
ä»£ç†å®ä¾‹è°ƒç”¨æ–¹æ³•æ—¶invokeæ–¹æ³•å°±ä¼šè¢«è°ƒç”¨ï¼Œå¯ä»¥debugè¯•è¯•</p>
<p>æ”¹ä¸º<strong>ä¸‡èƒ½ä»£ç†ç±»</strong></p>
<pre><code class="language-java">///ç”¨è¿™ä¸ªç±»ï¼Œè‡ªåŠ¨ç”Ÿä»£ç†
public class ProxyInvocationHandler implements InvocationHandler {

	// è¢«ä»£ç†çš„æ¥å£
	public Object target;

	public void setTarget(Object target) {
		this.target = target;
	}

	// å¾—åˆ°ç”Ÿæˆçš„ä»£ç†ç±» -&gt; å›ºå®šçš„ä»£ç 
	public Object getProxy() {
		return Proxy.newProxyInstance(this.getClass().getClassLoader(), target.getClass().getInterfaces(), this);
	}

	// å¤„ç†ä»£ç†å®ä¾‹å¹¶è¿”å›ç»“æœ
	public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {
		// åŠ¨æ€ä»£ç†çš„æœ¬è´¨ï¼Œå°±æ˜¯ä½¿ç”¨åå°„æœºåˆ¶å®ç°çš„
		// invoke()æ‰§è¡Œå®ƒçœŸæ­£è¦æ‰§è¡Œçš„æ–¹æ³•
		Object result = method.invoke(target, args);
		return result;
	}

}
</code></pre>
<figure data-type="image" tabindex="10"><img src="Spring5%E8%AF%BE%E5%A0%82%E7%AC%94.assets/aHR0cHM6Ly9naXRlZS5jb20vd29fYmVsbC9QaWN0dXJlQmVkL3Jhdy9tYXN0ZXIvaW1hZ2UvaW1hZ2UtMjAyMDA4MDMxMzMwMzU0ODQlMjAtJTIwJUU1JThBJUE4JUU2JTgwJTgxJUU0JUJCJUEzJUU3JTkwJTg2LnBuZw" alt="image-20200803133035484" loading="lazy"></figure>
<h2 id="11-aop">11ã€AOP</h2>
<h3 id="111-ä»€ä¹ˆæ˜¯aop">11.1ã€ä»€ä¹ˆæ˜¯AOP</h3>
<figure data-type="image" tabindex="11"><img src="Spring5%E8%AF%BE%E5%A0%82%E7%AC%94.assets/aHR0cHM6Ly9naXRlZS5jb20vd29fYmVsbC9QaWN0dXJlQmVkL3Jhdy9tYXN0ZXIvaW1hZ2UvaW1hZ2UtMjAyMDA4MDMxMzQ1MDIxNjklMjAtJTIwQU9QLnBuZw" alt="image-20200803134502169" loading="lazy"></figure>
<h3 id="112-aopåœ¨springä¸­çš„ä½¿ç”¨">11.2ã€AOPåœ¨Springä¸­çš„ä½¿ç”¨</h3>
<p>æä¾›å£°æ˜å¼äº‹åŠ¡ï¼Œå…è®¸ç”¨æˆ·è‡ªå®šä¹‰åˆ‡é¢</p>
<ul>
<li>æ¨ªåˆ‡å…³æ³¨ç‚¹ï¼šè·¨è¶Šåº”ç”¨ç¨‹åºå¤šä¸ªæ¨¡å—çš„æ–¹æ³•æˆ–åŠŸèƒ½ã€‚å³æ˜¯ï¼Œä¸æˆ‘ä»¬ä¸šåŠ¡é€»è¾‘æ— å…³çš„ï¼Œä½†æ˜¯æˆ‘ä»¬éœ€è¦å…³æ³¨çš„éƒ¨åˆ†ï¼Œå°±æ˜¯æ¨ªåˆ‡å…³æ³¨ç‚¹ã€‚å¦‚æ—¥å¿—ï¼Œå®‰å…¨ï¼Œç¼“å­˜ï¼Œäº‹åŠ¡ç­‰ç­‰â€¦</li>
<li>åˆ‡é¢(Aspect)ï¼šæ¨ªåˆ‡å…³æ³¨ç‚¹ è¢«æ¨¡å—åŒ–çš„ç‰¹æ®Šå¯¹è±¡ã€‚å³ï¼Œå®ƒæ˜¯ä¸€ä¸ªç±»ã€‚ï¼ˆLogç±»ï¼‰</li>
<li>é€šçŸ¥(Advice)ï¼šåˆ‡é¢å¿…é¡»è¦å®Œæˆçš„å·¥ä½œã€‚å³ï¼Œå®ƒæ˜¯ç±»ä¸­çš„ä¸€ä¸ªæ–¹æ³•ã€‚ï¼ˆLogç±»ä¸­çš„æ–¹æ³•ï¼‰</li>
<li>ç›®æ ‡(Target)ï¼šè¢«é€šçŸ¥å¯¹è±¡ã€‚ï¼ˆç”Ÿæˆçš„ä»£ç†ç±»)</li>
<li>ä»£ç†(Proxy)ï¼šå‘ç›®æ ‡å¯¹è±¡åº”ç”¨é€šçŸ¥ä¹‹ååˆ›å»ºçš„å¯¹è±¡ã€‚ï¼ˆç”Ÿæˆçš„ä»£ç†ç±»ï¼‰</li>
<li>åˆ‡å…¥ç‚¹(PointCut)ï¼šåˆ‡é¢é€šçŸ¥æ‰§è¡Œçš„â€åœ°ç‚¹â€çš„å®šä¹‰ã€‚ï¼ˆæœ€åä¸¤ç‚¹ï¼šåœ¨å“ªä¸ªåœ°æ–¹æ‰§è¡Œï¼Œæ¯”å¦‚ï¼šmethod.invoke()ï¼‰</li>
<li>è¿æ¥ç‚¹(JointPoint)ï¼šä¸åˆ‡å…¥ç‚¹åŒ¹é…çš„æ‰§è¡Œç‚¹ã€‚</li>
</ul>
<p><img src="Spring5%E8%AF%BE%E5%A0%82%E7%AC%94.assets/aHR0cHM6Ly9naXRlZS5jb20vd29fYmVsbC9QaWN0dXJlQmVkL3Jhdy9tYXN0ZXIvaW1hZ2UvaW1hZ2UtMjAyMDA4MDMxNTQwNDM5MDkucG5n" alt="image-20200803154043909" loading="lazy"><br>
SpringAOPä¸­ï¼Œé€šè¿‡Adviceå®šä¹‰æ¨ªåˆ‡é€»è¾‘ï¼ŒSpringä¸­æ”¯æŒ5ç§ç±»å‹çš„Advice:</p>
<p><img src="Spring5%E8%AF%BE%E5%A0%82%E7%AC%94.assets/aHR0cHM6Ly9naXRlZS5jb20vd29fYmVsbC9QaWN0dXJlQmVkL3Jhdy9tYXN0ZXIvaW1hZ2UvaW1hZ2UtMjAyMDA4MDMxMzU5Mzc0MzUucG5n" alt="image-20200803135937435" loading="lazy"><br>
<strong>å³AOPåœ¨ä¸æ”¹å˜åŸæœ‰ä»£ç çš„æƒ…å†µä¸‹ï¼Œå»å¢åŠ æ–°çš„åŠŸèƒ½ã€‚</strong>ï¼ˆä»£ç†ï¼‰</p>
<h3 id="113-ä½¿ç”¨springå®ç°aop">11.3ã€ä½¿ç”¨Springå®ç°AOP</h3>
<p>å¯¼å…¥jaråŒ…</p>
<pre><code class="language-xml">&lt;!-- https://mvnrepository.com/artifact/org.aspectj/aspectjweaver --&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.aspectj&lt;/groupId&gt;
    &lt;artifactId&gt;aspectjweaver&lt;/artifactId&gt;
    &lt;version&gt;1.9.4&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
<h4 id="1131-æ–¹æ³•ä¸€ä½¿ç”¨åŸç”Ÿspringæ¥å£">11.3.1ã€æ–¹æ³•ä¸€ï¼šä½¿ç”¨åŸç”Ÿspringæ¥å£</h4>
<p>springAPIæ¥å£å®ç°</p>
<p>applicationContext.xml</p>
<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
       xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot;
       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans
		https://www.springframework.org/schema/beans/spring-beans.xsd
		http://www.springframework.org/schema/aop
		https://www.springframework.org/schema/aop/spring-aop.xsd&quot;&gt;

    &lt;!--æ³¨å†Œbean--&gt;
    &lt;bean id=&quot;userservice&quot; class=&quot;service.UserServiceImpl&quot;/&gt;
    &lt;bean id=&quot;log&quot; class=&quot;log.Log&quot;/&gt;
    &lt;bean id=&quot;afterLog&quot; class=&quot;log.AfterLog&quot;/&gt;
	&lt;!--æ–¹å¼ä¸€ï¼Œä½¿ç”¨åŸç”ŸSpring APIæ¥å£--&gt;
    &lt;!--é…ç½®aop,è¿˜éœ€è¦å¯¼å…¥aopçº¦æŸ--&gt;
    &lt;aop:config&gt;
        &lt;!--åˆ‡å…¥ç‚¹ï¼šexpression:è¡¨è¾¾å¼ï¼Œexecutionï¼ˆè¦æ‰§è¡Œçš„ä½ç½®ï¼‰--&gt;
        &lt;aop:pointcut id=&quot;pointcut&quot; expression=&quot;execution(* service.UserServiceImpl.*(..))&quot;/&gt;
        &lt;!--UserServiceImpl.*(..) -ã€‹ UserServiceImplç±»ä¸‹çš„æ‰€ä»¥æ–¹æ³•(å‚æ•°)--&gt;
        &lt;!--æ‰§è¡Œç¯ç»•å¢åŠ --&gt;
        &lt;aop:advisor advice-ref=&quot;log&quot; pointcut-ref=&quot;pointcut&quot;/&gt;
        &lt;aop:advisor advice-ref=&quot;afterLog&quot; pointcut-ref=&quot;pointcut&quot;/&gt;
        &lt;!-- ç¯ç»•,åœ¨id=&quot;pointcut&quot;çš„å‰ååˆ‡å…¥ --&gt;
    &lt;/aop:config&gt;

&lt;/beans&gt;
</code></pre>
<p>execution(è¿”å›ç±»å‹ï¼Œç±»åï¼Œæ–¹æ³•å(å‚æ•°)) -&gt; execution(* com.service.<em>,</em>(â€¦))</p>
<p>UserService.java</p>
<pre><code class="language-java">package service;
public interface UserService {   
	    public void add() ;
	    public void delete() ;
	    public void query() ;
	    public void update();
}
</code></pre>
<p>UserService çš„å®ç°ç±» UserServiceImp.java</p>
<pre><code class="language-java">package service;

public class UserServiceImpl implements UserService {

    public void add() {
        System.out.println(&quot;addå¢&quot;);
    }
    public void delete() {
        System.out.println(&quot;deleteåˆ &quot;);
    }
    public void update() {
        System.out.println(&quot;updateæ”¹&quot;);
    }
    public void query() {
        System.out.println(&quot;queryæŸ¥&quot;);
    }
}
</code></pre>
<p>å‰ç½®Log.java</p>
<pre><code class="language-java">package log;
import org.springframework.aop.MethodBeforeAdvice;
import java.lang.reflect.Method;

public class Log implements MethodBeforeAdvice {
    //methodï¼šè¦æ‰§è¡Œçš„ç›®æ ‡å¯¹è±¡çš„æ–¹æ³•
    //argsï¼šå‚æ•°
    //targetï¼šç›®æ ‡å¯¹è±¡
    public void before(Method method, Object[] args, Object target) throws Throwable {
        System.out.println(target.getClass().getName()+&quot;çš„&quot;+method.getName()+&quot;è¢«æ‰§è¡Œäº†&quot;);
    }
}
</code></pre>
<p>åç½®AfterLog.java</p>
<pre><code class="language-java">package log;
import java.lang.reflect.Method;
import org.springframework.aop.AfterReturningAdvice;

public class AfterLog implements AfterReturningAdvice {
    //returnVaule: è¿”å›å€¼
    public void afterReturning(Object returnValue, Method method, Object[] args, Object target) throws Throwable {
    	System.out.println(&quot;æ‰§è¡Œäº†&quot;+method.getName()+&quot;æ–¹æ³•ï¼Œè¿”å›å€¼æ˜¯&quot;+returnValue);
    }
}
</code></pre>
<p>æµ‹è¯•ç±»MyTest5</p>
<pre><code class="language-java">import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;
import service.UserService;

public class MyTest5 {
    public static void main(String[] args) {
        ApplicationContext context = new ClassPathXmlApplicationContext(&quot;applicationContext.xml&quot;);
        //æ³¨æ„:åŠ¨æ€ä»£ç†ä»£ç†çš„æ˜¯æ¥å£
        UserService userService = (UserService) context.getBean(&quot;userservice&quot;);
        userService.add();
    }
}
</code></pre>
<h4 id="1132-æ–¹æ³•äºŒè‡ªå®šä¹‰ç±»å®ç°aop">11.3.2ã€æ–¹æ³•äºŒï¼šè‡ªå®šä¹‰ç±»å®ç°AOP</h4>
<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
      xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
      xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot;
      xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans
   	https://www.springframework.org/schema/beans/spring-beans.xsd
   	http://www.springframework.org/schema/aop
   	https://www.springframework.org/schema/aop/spring-aop.xsd&quot;&gt;

   &lt;!--æ³¨å†Œbean--&gt;
   &lt;bean id=&quot;userservice&quot; class=&quot;service.UserServiceImpl&quot;/&gt;
   &lt;bean id=&quot;log&quot; class=&quot;log.Log&quot;/&gt;
   &lt;bean id=&quot;afterLog&quot; class=&quot;log.AfterLog&quot;/&gt;
   &lt;!-- æ–¹å¼äºŒï¼Œè‡ªå®šä¹‰ --&gt;
   &lt;bean id=&quot;diy&quot; class=&quot;diy.DiyPointcut&quot;/&gt;
   &lt;aop:config&gt;
       &lt;!--è‡ªå®šä¹‰åˆ‡é¢--&gt;
       &lt;aop:aspect ref=&quot;diy&quot;&gt;
           &lt;!--åˆ‡å…¥ç‚¹--&gt;
           &lt;aop:pointcut id=&quot;point&quot; expression=&quot;execution(* service.UserServiceImpl.*(..))&quot;/&gt;
           &lt;aop:before method=&quot;before&quot; pointcut-ref=&quot;point&quot;/&gt;
           &lt;aop:after method=&quot;after&quot; pointcut-ref=&quot;point&quot;/&gt;
       &lt;/aop:aspect&gt;
   &lt;/aop:config&gt;

&lt;/beans&gt;
</code></pre>
<pre><code class="language-java">package diy;
public class DiyPointcut {

    public void before(){
        System.out.println(&quot;æ’å…¥åˆ°å‰é¢&quot;);
    }

    public void after(){
        System.out.println(&quot;æ’å…¥åˆ°åé¢&quot;);
    }
}
</code></pre>
<pre><code class="language-java">//æµ‹è¯•
public class MyTest5 {
    public static void main(String[] args) {
        ApplicationContext context = new ClassPathXmlApplicationContext(&quot;applicationContext.xml&quot;);
        //æ³¨æ„:åŠ¨æ€ä»£ç†ä»£ç†çš„æ˜¯æ¥å£
        UserService userService = (UserService) context.getBean(&quot;userservice&quot;);
        userService.add();
    }
}
</code></pre>
<h4 id="1133-æ–¹æ³•ä¸‰ä½¿ç”¨æ³¨è§£å®ç°">11.3.3ã€æ–¹æ³•ä¸‰ï¼šä½¿ç”¨æ³¨è§£å®ç°</h4>
<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
       xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot;
       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans
		https://www.springframework.org/schema/beans/spring-beans.xsd
		http://www.springframework.org/schema/aop
		https://www.springframework.org/schema/aop/spring-aop.xsd&quot;&gt;
	
    &lt;!-- æ³¨å†Œ --&gt;
    &lt;bean id=&quot;userservice&quot; class=&quot;service.UserServiceImpl&quot;/&gt;
    &lt;!--æ–¹å¼ä¸‰ï¼Œä½¿ç”¨æ³¨è§£å®ç°--&gt;
    &lt;bean id=&quot;diyAnnotation&quot; class=&quot;diy.DiyAnnotation&quot;&gt;&lt;/bean&gt;
    
    &lt;!-- å¼€å¯è‡ªåŠ¨ä»£ç† 
		å®ç°æ–¹å¼ï¼šé»˜è®¤JDK (proxy-targer-class=&quot;fasle&quot;)
    			 cgbin (proxy-targer-class=&quot;true&quot;)--&gt;
	&lt;aop:aspectj-autoproxy/&gt;
    
&lt;/beans&gt;
</code></pre>
<p>DiyAnnotation.java</p>
<pre><code class="language-java">package diy;
import org.aspectj.lang.ProceedingJoinPoint;
import org.aspectj.lang.annotation.After;
import org.aspectj.lang.annotation.Around;
import org.aspectj.lang.annotation.Aspect;
import org.aspectj.lang.annotation.Before;

@Aspect  //æ ‡æ³¨è¿™ä¸ªç±»æ˜¯ä¸€ä¸ªåˆ‡é¢
public class DiyAnnotation {
	
    @Before(&quot;execution(* service.UserServiceImpl.*(..))&quot;)
    public void before(){
        System.out.println(&quot;=====æ–¹æ³•æ‰§è¡Œå‰=====&quot;);
    }

    @After(&quot;execution(* service.UserServiceImpl.*(..))&quot;)
    public void after(){
        System.out.println(&quot;=====æ–¹æ³•æ‰§è¡Œå=====&quot;);
    }

    //åœ¨ç¯ç»•å¢å¼ºä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç»™åœ°æš–ç®¡ä¸€ä¸ªå‚æ•°ï¼Œä»£è¡¨æˆ‘ä»¬è¦è·å–åˆ‡å…¥çš„ç‚¹
    @Around(&quot;execution(* service.UserServiceImpl.*(..))&quot;)
    public void around(ProceedingJoinPoint joinPoint) throws Throwable {
        System.out.println(&quot;ç¯ç»•å‰&quot;);

        Object proceed = joinPoint.proceed();

        System.out.println(&quot;ç¯ç»•å&quot;);
    }
}
</code></pre>
<p>æµ‹è¯•</p>
<pre><code class="language-java">public class MyTest5 {
    public static void main(String[] args) {
        ApplicationContext context = new ClassPathXmlApplicationContext(&quot;applicationContext.xml&quot;);
        //æ³¨æ„:åŠ¨æ€ä»£ç†ä»£ç†çš„æ˜¯æ¥å£
        UserService userService = (UserService) context.getBean(&quot;userservice&quot;);
        userService.add();
    }
}
</code></pre>
<p>è¾“å‡ºç»“æœï¼š</p>
<figure data-type="image" tabindex="12"><img src="Spring5%E8%AF%BE%E5%A0%82%E7%AC%94.assets/aHR0cHM6Ly9naXRlZS5jb20vd29fYmVsbC9QaWN0dXJlQmVkL3Jhdy9tYXN0ZXIvaW1hZ2UvaW1hZ2UtMjAyMDA4MDMxNzU2NDIwNjQucG5n" alt="image-20200803175642064" loading="lazy"></figure>
<h2 id="12-æ•´åˆmybatis">12ã€æ•´åˆmybatis</h2>
<p>mybatis-springå®˜ç½‘ï¼šhttps://mybatis.org/spring/zh/</p>
<p><strong>mybatisçš„é…ç½®æµç¨‹ï¼š</strong></p>
<ol>
<li>ç¼–å†™å®ä½“ç±»</li>
<li>ç¼–å†™æ ¸å¿ƒé…ç½®æ–‡ä»¶</li>
<li>ç¼–å†™æ¥å£</li>
<li>ç¼–å†™Mapper.xmi</li>
<li>æµ‹è¯•</li>
</ol>
<h3 id="121-mybatis-spring-æ–¹å¼ä¸€">12.1ã€mybatis-spring-æ–¹å¼ä¸€</h3>
<ol>
<li>ç¼–å†™æ•°æ®æºé…ç½®</li>
<li>sqISessionFactory</li>
<li>sqISessionTemplateï¼ˆç›¸å½“äºsqISessionï¼‰</li>
<li>éœ€è¦ç»™æ¥å£åŠ å®ç°ç±»ã€newã€‘</li>
<li>å°†è‡ªå·±å†™çš„å®ç°ç±»ï¼Œæ³¨å…¥åˆ°Springä¸­</li>
<li>æµ‹è¯•ï¼</li>
</ol>
<p>å…ˆå¯¼å…¥jaråŒ…</p>
<pre><code class="language-xml">&lt;dependencies&gt;

    &lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-webmvc --&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.springframework&lt;/groupId&gt;
        &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;
        &lt;version&gt;5.2.7.RELEASE&lt;/version&gt;
    &lt;/dependency&gt;

    &lt;dependency&gt;
        &lt;groupId&gt;org.aspectj&lt;/groupId&gt;
        &lt;artifactId&gt;aspectjweaver&lt;/artifactId&gt;
        &lt;version&gt;1.9.4&lt;/version&gt;
    &lt;/dependency&gt;

    &lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-jdbc --&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.springframework&lt;/groupId&gt;
        &lt;artifactId&gt;spring-jdbc&lt;/artifactId&gt;
        &lt;version&gt;5.2.7.RELEASE&lt;/version&gt;
    &lt;/dependency&gt;

    &lt;dependency&gt;
        &lt;groupId&gt;org.mybatis&lt;/groupId&gt;
        &lt;artifactId&gt;mybatis&lt;/artifactId&gt;
        &lt;version&gt;3.5.2&lt;/version&gt;
    &lt;/dependency&gt;

    &lt;dependency&gt;
        &lt;groupId&gt;org.mybatis&lt;/groupId&gt;
        &lt;artifactId&gt;mybatis-spring&lt;/artifactId&gt;
        &lt;version&gt;2.0.4&lt;/version&gt;
    &lt;/dependency&gt;

    &lt;dependency&gt;
        &lt;groupId&gt;mysql&lt;/groupId&gt;
        &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;
        &lt;version&gt;8.0.12&lt;/version&gt;
    &lt;/dependency&gt;

    &lt;dependency&gt;
        &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;
        &lt;artifactId&gt;lombok&lt;/artifactId&gt;
        &lt;version&gt;1.18.12&lt;/version&gt;
    &lt;/dependency&gt;

&lt;/dependencies&gt;
	
&lt;!--åœ¨buildä¸­é…ç½®resourcesï¼Œæ¥é˜²æ­¢èµ„æºå¯¼å‡ºå¤±è´¥çš„é—®é¢˜--&gt;
&lt;!-- Mavenè§£å†³é™æ€èµ„æºè¿‡æ»¤é—®é¢˜ --&gt;
&lt;build&gt;
&lt;resources&gt;
    &lt;resource&gt;
        &lt;directory&gt;src/main/java&lt;/directory&gt;
        &lt;includes&gt;
            &lt;include&gt;**/*.properties&lt;/include&gt;
            &lt;include&gt;**/*.xml&lt;/include&gt;
        &lt;/includes&gt;
        &lt;filtering&gt;false&lt;/filtering&gt;
    &lt;/resource&gt;
    &lt;resource&gt;
        &lt;directory&gt;src/main/resources&lt;/directory&gt;
        &lt;includes&gt;
            &lt;include&gt;**/*.properties&lt;/include&gt;
            &lt;include&gt;**/*.xml&lt;/include&gt;
        &lt;/includes&gt;
        &lt;filtering&gt;false&lt;/filtering&gt;
    &lt;/resource&gt;
&lt;/resources&gt;
&lt;/build&gt;
</code></pre>
<p><img src="Spring5%E8%AF%BE%E5%A0%82%E7%AC%94.assets/aHR0cHM6Ly9naXRlZS5jb20vd29fYmVsbC9QaWN0dXJlQmVkL3Jhdy9tYXN0ZXIvaW1hZ2UvaW1hZ2UtMjAyMDA4MDQxMjMyMTA1NjAucG5n" alt="æ–‡ä»¶è·¯å¾„" loading="lazy"><br>
<strong>ç¼–å†™é¡ºåºï¼š</strong><br>
<strong>User -&gt; UserMapper -&gt; UserMapper.xml -&gt; spring-dao.xml -&gt; UserServiceImpl -&gt; applicationContext.xml -&gt; MyTest6</strong></p>
<p><strong>ä»£ç æ­¥éª¤ï¼š</strong></p>
<p>pojoå®ä½“ç±» User</p>
<pre><code class="language-java">package pojo;
import lombok.Data;
@Data
public class User {
	private int id;
	private String name;
	private String pwd;
}
</code></pre>
<p>mapperç›®å½•ä¸‹çš„ UserMapperã€UserMapperImplã€UserMapper.xml</p>
<p>æ¥å£UserMapper</p>
<pre><code class="language-java">package mapper;
import java.util.List;
import pojo.User;
public interface UserMapper {
	public List&lt;User&gt; getUser();
}
</code></pre>
<p>UserMapperImpl</p>
<pre><code class="language-java">package mapper;
import java.util.List;
import org.mybatis.spring.SqlSessionTemplate;
import pojo.User;

public class UserMapperImpl implements UserMapper{
	
	//æˆ‘ä»¬çš„æ‰€æœ‰æ“ä½œï¼Œåœ¨åŸæ¥éƒ½ä½¿ç”¨sqlSessionæ¥æ‰§è¡Œï¼Œç°åœ¨éƒ½ä½¿ç”¨SqlSessionTemplateï¼›
	private SqlSessionTemplate sqlSessionTemplate;

	public void setSqlSessionTemplate(SqlSessionTemplate sqlSessionTemplate) {
		this.sqlSessionTemplate = sqlSessionTemplate;
	}

	public List&lt;User&gt; getUser() {
		UserMapper mapper = sqlSessionTemplate.getMapper(UserMapper.class);
		return mapper.getUser();
	}
}
</code></pre>
<p>UserMapper.xml ï¼ˆç‹‚ç¥ç»™é¢å­æ‰ç•™ä¸‹æ¥çš„ï¼‰</p>
<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
&lt;!DOCTYPE mapper
        PUBLIC &quot;-//mybatis.org//DTD Config 3.0//EN&quot;
        &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;
        
&lt;!-- ç»‘å®šæ¥å£ --&gt;
&lt;mapper namespace=&quot;mapper.UserMapper&quot;&gt;
	&lt;select id=&quot;getUser&quot; resultType=&quot;pojo.User&quot;&gt;
		select * from mybatis.mybatis
	&lt;/select&gt;
&lt;/mapper&gt;
</code></pre>
<p>resourceç›®å½•ä¸‹çš„ mybatis-config.xmlã€spring-dao.xmlã€applicationContext.xml</p>
<p>mybatis-config.xml</p>
<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
&lt;!DOCTYPE configuration
  PUBLIC &quot;-//mybatis.org//DTD Config 3.0//EN&quot;
  &quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;&gt;
&lt;configuration&gt;
	&lt;!--å¼€å¯æ—¥å¿—--&gt;
	&lt;settings&gt;
		&lt;setting name=&quot;logImpl&quot; value=&quot;STDOUT_LOGGING&quot; /&gt;
	&lt;/settings&gt;
	
	&lt;!--å¯ä»¥ç»™å®ä½“ç±»èµ·åˆ«å --&gt;
	&lt;typeAliases&gt; 
		&lt;package name=&quot;pojo&quot; /&gt;
	&lt;/typeAliases&gt;

&lt;/configuration&gt;
</code></pre>
<p>spring-dao.xml</p>
<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
	xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
	xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot;
	xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans
		https://www.springframework.org/schema/beans/spring-beans.xsd
		http://www.springframework.org/schema/aop
		https://www.springframework.org/schema/aop/spring-aop.xsd&quot;&gt;
		
	&lt;!--DataSource:ä½¿ç”¨Springçš„æ•°å¸®æºæ›¿æ¢Mybatisçš„é…ç½® å…¶ä»–æ•°æ®æºï¼šc3p0ã€dbcpã€druid 
		è¿™ä½¿ç”¨Springæä¾›çš„JDBC: org.springframework.jdbc.datasource --&gt;
	&lt;!--data source --&gt;
	&lt;bean id=&quot;datasource&quot; class=&quot;org.springframework.jdbc.datasource.DriverManagerDataSource&quot;&gt;
		&lt;property name=&quot;driverClassName&quot;
			value=&quot;com.mysql.cj.jdbc.Driver&quot; /&gt;
		&lt;property name=&quot;url&quot; value=&quot;jdbc:mysql://127.0.0.1:3306/mybatis?useSSL=false&amp;amp;useUnicode=true&amp;amp;characterEncoding=utf-8&amp;amp;serverTimezone=Asia/Shanghai&quot;/&gt;
		&lt;property name=&quot;username&quot; value=&quot;root&quot; /&gt;
		&lt;property name=&quot;password&quot; value=&quot;root&quot; /&gt;
	&lt;/bean&gt;
	
	&lt;!--sqlSessionFactory--&gt;
    &lt;bean id=&quot;sqlSessionFactory&quot; class=&quot;org.mybatis.spring.SqlSessionFactoryBean&quot;&gt;
        &lt;property name=&quot;dataSource&quot; ref=&quot;datasource&quot; /&gt;
        &lt;!--ç»‘å®š mybatis é…ç½®æ–‡ä»¶--&gt;
        &lt;property name=&quot;configLocation&quot; value=&quot;classpath:mybatis-config.xml&quot;/&gt;
        &lt;property name=&quot;mapperLocations&quot; value=&quot;classpath:mapper/*.xml&quot;/&gt;
    &lt;/bean&gt;

	&lt;!-- sqlSessionTemplate å°±æ˜¯ä¹‹å‰ä½¿ç”¨çš„ï¼šsqlsession --&gt;
    &lt;bean id=&quot;sqlSession&quot; class=&quot;org.mybatis.spring.SqlSessionTemplate&quot;&gt;
    	&lt;!-- åªèƒ½ä½¿ç”¨æ„é€ å™¨æ³¨å…¥sqlSessionFactory åŸå› ï¼šå®ƒæ²¡æœ‰setæ–¹æ³•--&gt;	
        &lt;constructor-arg index=&quot;0&quot; ref=&quot;sqlSessionFactory&quot;/&gt;
    &lt;/bean&gt;
		
&lt;/beans&gt;
</code></pre>
<p>applicationContext.xml</p>
<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
	xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
	xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot;
	xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans
		https://www.springframework.org/schema/beans/spring-beans.xsd
		http://www.springframework.org/schema/aop
		https://www.springframework.org/schema/aop/spring-aop.xsd&quot;&gt;
    
	&lt;!-- å¯¼å…¥spring-dao.xml --&gt;
	&lt;import resource=&quot;spring-dao.xml&quot;/&gt;
	
    &lt;bean id=&quot;userMapper&quot; class=&quot;mapper.UserMapperImpl&quot;&gt;
        &lt;property name=&quot;sqlSessionTemplate&quot; ref=&quot;sqlSession&quot;&gt;&lt;/property&gt;
    &lt;/bean&gt;

&lt;/beans&gt;
</code></pre>
<p>æµ‹è¯•ç±»</p>
<pre><code class="language-java">import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;
import mapper.UserMapper;
import pojo.User;
public class MyTest6 {
	public static void main(String[] args) {
        
		ApplicationContext context = new ClassPathXmlApplicationContext(&quot;applicationContext.xml&quot;);
		
		UserMapper userMapper = (UserMapper) context.getBean(&quot;userMapper&quot;);
		
		for (User user : userMapper.getUser()) {
			System.out.println(user);
		}
	}
}
</code></pre>
<h3 id="122-mybatis-spring-æ–¹å¼äºŒ">12.2ã€mybatis-spring-æ–¹å¼äºŒ</h3>
<p>UserServiceImpl2</p>
<pre><code class="language-java">package mapper;
import pojo.User;
import org.apache.ibatis.session.SqlSession;
import org.mybatis.spring.support.SqlSessionDaoSupport;
import java.util.List;
//ç»§æ‰¿SqlSessionDaoSupport ç±»
public class UserMapperImpl2 extends SqlSessionDaoSupport implements UserMapper {
    public List&lt;User&gt; getUser() {
        SqlSession sqlSession = getSqlSession();
        UserMapper mapper = sqlSession.getMapper(UserMapper.class);
        return mapper.getUser();
        //æˆ–è€…ä¸€å¥è¯ï¼šreturn getSqlSession().getMapper(UserMapper.class).getUser();
    }
}
</code></pre>
<p>spring-dao.xml</p>
<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
	xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
	xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot;
	xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans
		https://www.springframework.org/schema/beans/spring-beans.xsd
		http://www.springframework.org/schema/aop
		https://www.springframework.org/schema/aop/spring-aop.xsd&quot;&gt;
		
	&lt;!--DataSource:ä½¿ç”¨Springçš„æ•°å¸®æºæ›¿æ¢Mybatisçš„é…ç½® c3p0 dbcp druid 
		è¿™ä½¿ç”¨Springæä¾›çš„JDBC: org.springframework.jdbc.datasource --&gt;
	&lt;!--data source --&gt;
	&lt;bean id=&quot;datasource&quot; class=&quot;org.springframework.jdbc.datasource.DriverManagerDataSource&quot;&gt;
		&lt;property name=&quot;driverClassName&quot;
			value=&quot;com.mysql.cj.jdbc.Driver&quot; /&gt;
		&lt;property name=&quot;url&quot; value=&quot;jdbc:mysql://127.0.0.1:3306/mybatis?useSSL=false&amp;amp;useUnicode=true&amp;amp;characterEncoding=utf-8&amp;amp;serverTimezone=Asia/Shanghai&quot;/&gt;
		&lt;property name=&quot;username&quot; value=&quot;root&quot; /&gt;
		&lt;property name=&quot;password&quot; value=&quot;root&quot; /&gt;
	&lt;/bean&gt;
	
	&lt;!--sqlSessionFactory--&gt;
    &lt;bean id=&quot;sqlSessionFactory&quot; class=&quot;org.mybatis.spring.SqlSessionFactoryBean&quot;&gt;
        &lt;property name=&quot;dataSource&quot; ref=&quot;datasource&quot; /&gt;
        &lt;!--ç»‘å®š mybatis é…ç½®æ–‡ä»¶--&gt;
        &lt;property name=&quot;configLocation&quot; value=&quot;classpath:mybatis-config.xml&quot;/&gt;
        &lt;property name=&quot;mapperLocations&quot; value=&quot;classpath:mapper/*.xml&quot;/&gt;
    &lt;/bean&gt;
    
	&lt;!-- æ–¹æ³•äºŒï¼šSqlSessionTemplate å¯ä»¥ä¸å†™äº†--&gt;
    
&lt;/beans&gt;
</code></pre>
<p>applicationContext.xml</p>
<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
	xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
	xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot;
	xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans
		https://www.springframework.org/schema/beans/spring-beans.xsd
		http://www.springframework.org/schema/aop
		https://www.springframework.org/schema/aop/spring-aop.xsd&quot;&gt;

	&lt;import resource=&quot;spring-dao.xml&quot; /&gt;

	&lt;!-- æ–¹æ³•äºŒ --&gt;
	&lt;bean id=&quot;userMapper2&quot; class=&quot;mapper.UserMapperImpl2&quot;&gt;
		&lt;property name=&quot;sqlSessionFactory&quot; ref=&quot;sqlSessionFactory&quot;&gt;&lt;/property&gt;
	&lt;/bean&gt;
&lt;/beans&gt;
</code></pre>
<p>æµ‹è¯•</p>
<pre><code class="language-java">public class MyTest6 {
	public static void main(String[] args) {
		ApplicationContext context = new ClassPathXmlApplicationContext(&quot;applicationContext.xml&quot;);
		UserMapper userMapper = (UserMapper) context.getBean(&quot;userMapper2&quot;);
		for (User user : userMapper.getUser()) {
			System.out.println(user);
		}
	}
}
</code></pre>
<h2 id="13-å£°æ˜å¼äº‹åŠ¡">13. å£°æ˜å¼äº‹åŠ¡</h2>
<ul>
<li>æŠŠä¸€ç»„ä¸šåŠ¡å½“æˆä¸€ä¸ªä¸šåŠ¡æ¥åšï¼›è¦ä¹ˆéƒ½æˆåŠŸï¼Œè¦ä¹ˆéƒ½å¤±è´¥ï¼</li>
<li>äº‹åŠ¡åœ¨é¡¹ç›®å¼€å‘ä¸­ï¼Œååˆ†çš„é‡è¦ï¼Œæ¶‰åŠåˆ°æ•°æ®çš„ä¸€è‡´æ€§é—®é¢˜</li>
<li>ç¡®ä¿å®Œæ•´æ€§å’Œä¸€è‡´æ€§</li>
</ul>
<p>äº‹åŠ¡çš„ACIDåŸåˆ™ï¼š<br>
1ã€åŸå­æ€§<br>
2ã€éš”ç¦»æ€§<br>
3ã€ä¸€è‡´æ€§<br>
4ã€æŒä¹…æ€§</p>
<p>ACIDå‚è€ƒæ–‡ç« ï¼šhttps://www.cnblogs.com/malaikuangren/archive/2012/04/06/2434760.html</p>
<p>Springä¸­çš„äº‹åŠ¡ç®¡ç†</p>
<ul>
<li>å£°æ˜å¼äº‹åŠ¡ï¼šAOP</li>
<li>ç¼–ç¨‹å¼äº‹åŠ¡ï¼šéœ€è¦å†ä»£ç ä¸­ï¼Œè¿›è¡Œäº‹åŠ¡ç®¡ç†</li>
</ul>
<p><strong>å£°æ˜å¼äº‹åŠ¡</strong></p>
<p>å…ˆå¯¼å…¥jaråŒ…</p>
<pre><code class="language-xml">&lt;dependencies&gt;

    &lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-webmvc --&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.springframework&lt;/groupId&gt;
        &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;
        &lt;version&gt;5.2.7.RELEASE&lt;/version&gt;
    &lt;/dependency&gt;

    &lt;dependency&gt;
        &lt;groupId&gt;org.aspectj&lt;/groupId&gt;
        &lt;artifactId&gt;aspectjweaver&lt;/artifactId&gt;
        &lt;version&gt;1.9.4&lt;/version&gt;
    &lt;/dependency&gt;

    &lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-jdbc --&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.springframework&lt;/groupId&gt;
        &lt;artifactId&gt;spring-jdbc&lt;/artifactId&gt;
        &lt;version&gt;5.2.7.RELEASE&lt;/version&gt;
    &lt;/dependency&gt;

    &lt;dependency&gt;
        &lt;groupId&gt;org.mybatis&lt;/groupId&gt;
        &lt;artifactId&gt;mybatis&lt;/artifactId&gt;
        &lt;version&gt;3.5.2&lt;/version&gt;
    &lt;/dependency&gt;

    &lt;dependency&gt;
        &lt;groupId&gt;org.mybatis&lt;/groupId&gt;
        &lt;artifactId&gt;mybatis-spring&lt;/artifactId&gt;
        &lt;version&gt;2.0.4&lt;/version&gt;
    &lt;/dependency&gt;

    &lt;dependency&gt;
        &lt;groupId&gt;mysql&lt;/groupId&gt;
        &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;
        &lt;version&gt;8.0.12&lt;/version&gt;
    &lt;/dependency&gt;

    &lt;dependency&gt;
        &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;
        &lt;artifactId&gt;lombok&lt;/artifactId&gt;
        &lt;version&gt;1.18.12&lt;/version&gt;
    &lt;/dependency&gt;

&lt;/dependencies&gt;
	
&lt;!--åœ¨buildä¸­é…ç½®resourcesï¼Œæ¥é˜²æ­¢èµ„æºå¯¼å‡ºå¤±è´¥çš„é—®é¢˜--&gt;
&lt;!-- Mavenè§£å†³é™æ€èµ„æºè¿‡æ»¤é—®é¢˜ --&gt;
&lt;build&gt;
&lt;resources&gt;
    &lt;resource&gt;
        &lt;directory&gt;src/main/java&lt;/directory&gt;
        &lt;includes&gt;
            &lt;include&gt;**/*.properties&lt;/include&gt;
            &lt;include&gt;**/*.xml&lt;/include&gt;
        &lt;/includes&gt;
        &lt;filtering&gt;false&lt;/filtering&gt;
    &lt;/resource&gt;
    &lt;resource&gt;
        &lt;directory&gt;src/main/resources&lt;/directory&gt;
        &lt;includes&gt;
            &lt;include&gt;**/*.properties&lt;/include&gt;
            &lt;include&gt;**/*.xml&lt;/include&gt;
        &lt;/includes&gt;
        &lt;filtering&gt;false&lt;/filtering&gt;
    &lt;/resource&gt;
&lt;/resources&gt;
&lt;/build&gt;
</code></pre>
<p><strong>ä»£ç æ­¥éª¤ï¼š</strong></p>
<p>pojoå®ä½“ç±» User</p>
<pre><code class="language-java">package pojo;
import lombok.AllArgsConstructor;
import lombok.Data;
import lombok.NoArgsConstructor;

@Data
@AllArgsConstructor
@NoArgsConstructor
public class User {
	private int id;
	private String name;
	private String pwd;
}
</code></pre>
<p>mapperç›®å½•ä¸‹çš„ UserMapperã€UserMapperImplã€UserMapper.xml</p>
<p>æ¥å£UserMapper</p>
<pre><code class="language-java">package mapper;
import java.util.List;
import org.apache.ibatis.annotations.Param;
import pojo.User;

public interface UserMapper {
	public List&lt;User&gt; getUser();
	
	public int insertUser(User user); 
	
	public int delUser(@Param(&quot;id&quot;) int id); 
}
</code></pre>
<p>UserMapperImpl</p>
<pre><code class="language-java">package mapper;

import pojo.User;
import org.apache.ibatis.session.SqlSession;
import org.mybatis.spring.support.SqlSessionDaoSupport;
import java.util.List;

public class UserMapperImpl extends SqlSessionDaoSupport implements UserMapper {
    public List&lt;User&gt; getUser() {
    	User user = new User(5,&quot;ä½ å¥½&quot;,&quot;ok&quot;);
    	insertUser(user);
    	delUser(5);
        SqlSession sqlSession = getSqlSession();
        UserMapper mapper = sqlSession.getMapper(UserMapper.class);
        return mapper.getUser();
        //æˆ–è€…return  getSqlSession().getMapper(UserMapper.class).getUser();
    }
    //æ’å…¥
	public int insertUser(User user) {
		return getSqlSession().getMapper(UserMapper.class).insertUser(user);
	}
	//åˆ é™¤
	public int delUser(int id) {
		return getSqlSession().getMapper(UserMapper.class).delUser(id);
	}
}
</code></pre>
<p>UserMapper.xml</p>
<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
&lt;!DOCTYPE mapper
        PUBLIC &quot;-//mybatis.org//DTD Config 3.0//EN&quot;
        &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;
        
&lt;!-- ç»‘å®šæ¥å£ --&gt;
&lt;mapper namespace=&quot;mapper.UserMapper&quot;&gt;
	&lt;select id=&quot;getUser&quot; resultType=&quot;pojo.User&quot;&gt;
		select * from mybatis.mybatis
	&lt;/select&gt;
	
	&lt;insert id=&quot;insertUser&quot;  parameterType=&quot;pojo.User&quot; &gt;
		insert into  mybatis.mybatis (id,name,pwd) values (#{id},#{name},#{pwd})
	&lt;/insert&gt;
	
	&lt;delete id=&quot;delUser&quot; parameterType=&quot;_int&quot;&gt;
		deleteAAAAA from mybatis.mybatis where id = #{id}
		&lt;!-- deleteAAAAAæ˜¯æ•…æ„å†™é”™çš„ --&gt;
	&lt;/delete&gt;

&lt;/mapper&gt;
</code></pre>
<p>resourceç›®å½•ä¸‹çš„ mybatis-config.xmlã€spring-dao.xmlã€applicationContext.xml</p>
<p>mybatis-config.xml</p>
<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
&lt;!DOCTYPE configuration
  PUBLIC &quot;-//mybatis.org//DTD Config 3.0//EN&quot;
  &quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;&gt;
&lt;!-- configuration --&gt;
&lt;configuration&gt;
	
	&lt;!--å¼€å¯æ—¥å¿—--&gt;
	&lt;settings&gt;
		&lt;setting name=&quot;logImpl&quot; value=&quot;STDOUT_LOGGING&quot; /&gt;
	&lt;/settings&gt;
	
	&lt;!--å¯ä»¥ç»™å®ä½“ç±»èµ·åˆ«å--&gt;
	&lt;typeAliases&gt; 
		&lt;package name=&quot;pojo&quot; /&gt;
	&lt;/typeAliases&gt;

&lt;/configuration&gt;
</code></pre>
<p>spring-dao.xmlï¼ˆå·²å¯¼å…¥çº¦æŸï¼‰</p>
<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
       xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot;
       xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot;
       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans
        https://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/tx
        https://www.springframework.org/schema/tx/spring-tx.xsd
        http://www.springframework.org/schema/aop
        https://www.springframework.org/schema/aop/spring-aop.xsd&quot;&gt;
		
	&lt;!--data source --&gt;
	&lt;bean id=&quot;datasource&quot; class=&quot;org.springframework.jdbc.datasource.DriverManagerDataSource&quot;&gt;
		&lt;property name=&quot;driverClassName&quot;
			value=&quot;com.mysql.cj.jdbc.Driver&quot; /&gt;
		&lt;property name=&quot;url&quot; value=&quot;jdbc:mysql://127.0.0.1:3306/mybatis?useSSL=false&amp;amp;useUnicode=true&amp;amp;characterEncoding=utf-8&amp;amp;serverTimezone=Asia/Shanghai&quot;/&gt;
		&lt;property name=&quot;username&quot; value=&quot;root&quot; /&gt;
		&lt;property name=&quot;password&quot; value=&quot;root&quot; /&gt;
	&lt;/bean&gt;
	
	&lt;!--sqlSessionFactory--&gt;
    &lt;bean id=&quot;sqlSessionFactory&quot; class=&quot;org.mybatis.spring.SqlSessionFactoryBean&quot;&gt;
        &lt;property name=&quot;dataSource&quot; ref=&quot;datasource&quot; /&gt;
        &lt;!--ç»‘å®š mybatis é…ç½®æ–‡ä»¶--&gt;
        &lt;property name=&quot;configLocation&quot; value=&quot;classpath:mybatis-config.xml&quot;/&gt;
        &lt;property name=&quot;mapperLocations&quot; value=&quot;classpath:mapper/*.xml&quot;/&gt;
    &lt;/bean&gt;
	
	&lt;!--å£°æ˜å¼äº‹åŠ¡--&gt;
    &lt;bean id=&quot;transactionManager&quot; class=&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;&gt;
        &lt;constructor-arg ref=&quot;datasource&quot; /&gt;
    &lt;/bean&gt;

    &lt;!--ç»“åˆaopå®ç°äº‹åŠ¡ç»‡å…¥--&gt;
    &lt;!--é…ç½®äº‹åŠ¡çš„é€šçŸ¥ç±»--&gt;
    &lt;tx:advice id=&quot;txAdvice&quot; transaction-manager=&quot;transactionManager&quot;&gt;
        &lt;!--ç»™å“ªäº›æ–¹æ³•é…ç½®äº‹åŠ¡--&gt;
        &lt;!--æ–°ä¸œè¥¿ï¼šé…ç½®äº‹åŠ¡çš„ä¼ æ’­ç‰¹æ€§ propagation--&gt;
        &lt;tx:attributes&gt;
            &lt;tx:method name=&quot;add&quot; propagation=&quot;REQUIRED&quot;/&gt;
            &lt;tx:method name=&quot;delete&quot; propagation=&quot;REQUIRED&quot;/&gt;
            &lt;tx:method name=&quot;update&quot; propagation=&quot;REQUIRED&quot;/&gt;
            &lt;tx:method name=&quot;query&quot; read-only=&quot;true&quot;/&gt;
            &lt;!-- *å·åŒ…å«ä¸Šé¢4ä¸ªæ–¹æ³•ï¼š
            &lt;tx:method name=&quot;*&quot; propagation=&quot;REQUIRED&quot;/&gt; --&gt;
        &lt;/tx:attributes&gt;
    &lt;/tx:advice&gt;

    &lt;!--é…ç½®äº‹åŠ¡åˆ‡å…¥--&gt;
    &lt;aop:config&gt;
        &lt;aop:pointcut id=&quot;txpointcut&quot; expression=&quot;execution(* mapper.*.*(..))&quot;/&gt;
        &lt;aop:advisor advice-ref=&quot;txAdvice&quot; pointcut-ref=&quot;txpointcut&quot;/&gt;
    &lt;/aop:config&gt;

&lt;/beans&gt;
</code></pre>
<p>applicationContext.xml</p>
<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
	xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
	xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot;
	xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans
		https://www.springframework.org/schema/beans/spring-beans.xsd
		http://www.springframework.org/schema/aop
		https://www.springframework.org/schema/aop/spring-aop.xsd&quot;&gt;

	&lt;import resource=&quot;spring-dao.xml&quot; /&gt;

	&lt;bean id=&quot;userMapper&quot; class=&quot;mapper.UserMapperImpl&quot;&gt;
		&lt;property name=&quot;sqlSessionFactory&quot; ref=&quot;sqlSessionFactory&quot;&gt;&lt;/property&gt;
	&lt;/bean&gt;
&lt;/beans&gt;
</code></pre>
<p>æµ‹è¯•ç±»</p>
<pre><code class="language-java">import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;

import mapper.UserMapper;import pojo.User;
public class MyTest7 {
	public static void main(String[] args) {

		ApplicationContext context = new ClassPathXmlApplicationContext(&quot;applicationContext.xml&quot;);
		
		UserMapper userMapper = (UserMapper) context.getBean(&quot;userMapper&quot;);
		
		for (User user : userMapper.getUser()) {
			System.out.println(user);
		}
	}
}
</code></pre>
<p><strong>æ€è€ƒï¼š</strong><br>
ä¸ºä»€ä¹ˆéœ€è¦äº‹åŠ¡ï¼Ÿ</p>
<ul>
<li>å¦‚æœä¸é…ç½®äº‹åŠ¡ï¼Œå¯èƒ½å­˜åœ¨æ•°æ®æäº¤ä¸ä¸€è‡´çš„æƒ…å†µä¸‹ï¼›</li>
<li>å¦‚æœä¸åœ¨springä¸­å»é…ç½®å£°æ˜å¼äº‹åŠ¡ï¼Œæˆ‘ä»¬å°±éœ€è¦åœ¨ä»£ç ä¸­æ‰‹åŠ¨é…ç½®äº‹åŠ¡ï¼</li>
<li>äº‹åŠ¡åœ¨é¡¹ç›®çš„å¼€å‘ä¸­éå¸¸é‡è¦ï¼Œæ¶‰åŠåˆ°æ•°æ®çš„ä¸€è‡´æ€§å’Œå®Œæ•´æ€§é—®é¢˜ï¼</li>
</ul>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Lombook]]></title>
        <id>https://aruul.github.io/post/iJ3Ze3gYo/</id>
        <link href="https://aruul.github.io/post/iJ3Ze3gYo/">
        </link>
        <updated>2021-03-17T08:24:24.000Z</updated>
        <content type="html"><![CDATA[<p>ä½¿ç”¨æ­¥éª¤</p>
<ol>
<li>
<p>åœ¨ideaä¸­è£…Lombokæ’ä»¶</p>
</li>
<li>
<p>å¯¼å…¥jaråŒ…</p>
<pre><code class="language-xml">&lt;!-- https://mvnrepository.com/artifact/org.projectlombok/lombok --&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;
    &lt;artifactId&gt;lombok&lt;/artifactId&gt;
    &lt;version&gt;1.18.10&lt;/version&gt;
    &lt;scope&gt;provided&lt;/scope&gt;
&lt;/dependency&gt;
</code></pre>
<p>3.ä½¿ç”¨æ³¨è§£</p>
<hr>
<h2 id="æœ‰å“ªäº›æ³¨è§£">æœ‰å“ªäº›æ³¨è§£ï¼Ÿ</h2>
<ul>
<li>@Data</li>
<li>@Setter</li>
<li>@Getter</li>
<li>@Log4j</li>
<li>@AllArgsConstructor</li>
<li>@NoArgsConstructor</li>
<li>@EqualsAndHashCode</li>
<li>@NonNull</li>
<li>@Cleanup</li>
<li>@ToString</li>
<li>@RequiredArgsConstructor</li>
<li>@Value</li>
<li>@SneakyThrows</li>
<li>@Synchronized</li>
</ul>
<h2 id="æ³¨è§£è¯¦è§£">æ³¨è§£è¯¦è§£</h2>
<p><strong>@Data</strong></p>
<p>æ³¨è§£åœ¨ <strong>ç±»</strong> ä¸Šï¼›æä¾›ç±»æ‰€æœ‰å±æ€§çš„ get å’Œ set æ–¹æ³•ï¼Œæ­¤å¤–è¿˜æä¾›äº†equalsã€canEqualã€hashCodeã€toString æ–¹æ³•ã€‚</p>
<figure data-type="image" tabindex="1"><img src="https://pic4.zhimg.com/80/v2-9b36bb6fd37372cee213b118d7e26c7b_720w.jpg" alt="img" loading="lazy"></figure>
<p><strong>@Setter</strong></p>
<p>æ³¨è§£åœ¨ <strong>å±æ€§</strong> ä¸Šï¼›ä¸ºå•ä¸ªå±æ€§æä¾› set æ–¹æ³•; æ³¨è§£åœ¨ <strong>ç±»</strong> ä¸Šï¼Œä¸ºè¯¥ç±»æ‰€æœ‰çš„å±æ€§æä¾› set æ–¹æ³•ï¼Œ éƒ½æä¾›é»˜è®¤æ„é€ æ–¹æ³•ã€‚</p>
<figure data-type="image" tabindex="2"><img src="https://pic2.zhimg.com/80/v2-12139fea446022a1986ba2042f886a7d_720w.jpg" alt="img" loading="lazy"></figure>
<figure data-type="image" tabindex="3"><img src="https://pic3.zhimg.com/80/v2-994e89f3c9c6976b05e345fcd0848692_720w.jpg" alt="img" loading="lazy"></figure>
<p><strong>@Getter</strong></p>
<p>æ³¨è§£åœ¨ <strong>å±æ€§</strong> ä¸Šï¼›ä¸ºå•ä¸ªå±æ€§æä¾› get æ–¹æ³•; æ³¨è§£åœ¨ <strong>ç±»</strong> ä¸Šï¼Œä¸ºè¯¥ç±»æ‰€æœ‰çš„å±æ€§æä¾› get æ–¹æ³•ï¼Œéƒ½æä¾›é»˜è®¤æ„é€ æ–¹æ³•ã€‚</p>
<figure data-type="image" tabindex="4"><img src="https://pic3.zhimg.com/80/v2-18149a8d23a4e3673b9441b198a1f976_720w.jpg" alt="img" loading="lazy"></figure>
<figure data-type="image" tabindex="5"><img src="https://pic4.zhimg.com/80/v2-2cb156b6d93198d271f2ff4bca1c21ff_720w.jpg" alt="img" loading="lazy"></figure>
<p><strong>@Log4j</strong></p>
<p>æ³¨è§£åœ¨ <strong>ç±»</strong> ä¸Šï¼›ä¸ºç±»æä¾›ä¸€ä¸ª å±æ€§åä¸º log çš„ log4j æ—¥å¿—å¯¹è±¡ï¼Œæä¾›é»˜è®¤æ„é€ æ–¹æ³•ã€‚</p>
<figure data-type="image" tabindex="6"><img src="https://pic1.zhimg.com/80/v2-ce28a344baae222aa0c4ea0b84461000_720w.jpg" alt="img" loading="lazy"></figure>
<p><strong>@AllArgsConstructor</strong></p>
<p>æ³¨è§£åœ¨ <strong>ç±»</strong> ä¸Šï¼›ä¸ºç±»æä¾›ä¸€ä¸ªå…¨å‚çš„æ„é€ æ–¹æ³•ï¼ŒåŠ äº†è¿™ä¸ªæ³¨è§£åï¼Œç±»ä¸­ä¸æä¾›é»˜è®¤æ„é€ æ–¹æ³•äº†ã€‚</p>
<figure data-type="image" tabindex="7"><img src="https://pic4.zhimg.com/80/v2-31bca5c4da7e9c475bade1eaa400802f_720w.jpg" alt="img" loading="lazy"></figure>
<p><strong>@NoArgsConstructor</strong></p>
<p>æ³¨è§£åœ¨ <strong>ç±»</strong> ä¸Šï¼›ä¸ºç±»æä¾›ä¸€ä¸ªæ— å‚çš„æ„é€ æ–¹æ³•ã€‚</p>
<figure data-type="image" tabindex="8"><img src="https://pic2.zhimg.com/80/v2-518a849c9d5fffde690b2a801e951275_720w.jpg" alt="img" loading="lazy"></figure>
<p><strong>@EqualsAndHashCode</strong></p>
<p>æ³¨è§£åœ¨ <strong>ç±»</strong> ä¸Š, å¯ä»¥ç”Ÿæˆ equalsã€canEqualã€hashCode æ–¹æ³•ã€‚</p>
<figure data-type="image" tabindex="9"><img src="https://pic1.zhimg.com/80/v2-6bddfeaa77e8dd29b05bb8b499da65f4_720w.jpg" alt="img" loading="lazy"></figure>
<p><strong>@NonNull</strong></p>
<p>æ³¨è§£åœ¨ <strong>å±æ€§</strong> ä¸Šï¼Œä¼šè‡ªåŠ¨äº§ç”Ÿä¸€ä¸ªå…³äºæ­¤å‚æ•°çš„éç©ºæ£€æŸ¥ï¼Œå¦‚æœå‚æ•°ä¸ºç©ºï¼Œåˆ™æŠ›å‡ºä¸€ä¸ªç©ºæŒ‡é’ˆå¼‚å¸¸ï¼Œä¹Ÿä¼šæœ‰ä¸€ä¸ªé»˜è®¤çš„æ— å‚æ„é€ æ–¹æ³•ã€‚</p>
<figure data-type="image" tabindex="10"><img src="https://pic2.zhimg.com/80/v2-268671034ed3141e117c99f055a3f2ad_720w.jpg" alt="img" loading="lazy"></figure>
<p><strong>@Cleanup</strong></p>
<p>è¿™ä¸ªæ³¨è§£ç”¨åœ¨ <strong>å˜é‡</strong> å‰é¢ï¼Œå¯ä»¥ä¿è¯æ­¤å˜é‡ä»£è¡¨çš„èµ„æºä¼šè¢«è‡ªåŠ¨å…³é—­ï¼Œé»˜è®¤æ˜¯è°ƒç”¨èµ„æºçš„ close() æ–¹æ³•ï¼Œå¦‚æœè¯¥èµ„æºæœ‰å…¶å®ƒå…³é—­æ–¹æ³•ï¼Œå¯ä½¿ç”¨ @Cleanup(â€œmethodNameâ€) æ¥æŒ‡å®šè¦è°ƒç”¨çš„æ–¹æ³•ï¼Œä¹Ÿä¼šç”Ÿæˆé»˜è®¤çš„æ„é€ æ–¹æ³•</p>
<figure data-type="image" tabindex="11"><img src="https://pic3.zhimg.com/80/v2-6408e68a5f77eba5add53abe3ee8abf2_720w.jpg" alt="img" loading="lazy"></figure>
<p><strong>@ToString</strong></p>
<p>è¿™ä¸ªæ³¨è§£ç”¨åœ¨ <strong>ç±»</strong> ä¸Šï¼Œå¯ä»¥ç”Ÿæˆæ‰€æœ‰å‚æ•°çš„ toString æ–¹æ³•ï¼Œè¿˜ä¼šç”Ÿæˆé»˜è®¤çš„æ„é€ æ–¹æ³•ã€‚</p>
<figure data-type="image" tabindex="12"><img src="https://pic1.zhimg.com/80/v2-28b29cc1b5940f31de246e719cfcd9e8_720w.jpg" alt="img" loading="lazy"></figure>
<p><strong>@RequiredArgsConstructor</strong></p>
<p>è¿™ä¸ªæ³¨è§£ç”¨åœ¨ <strong>ç±»</strong> ä¸Šï¼Œä½¿ç”¨ç±»ä¸­æ‰€æœ‰å¸¦æœ‰ @NonNull æ³¨è§£çš„æˆ–è€…å¸¦æœ‰ final ä¿®é¥°çš„æˆå‘˜å˜é‡ç”Ÿæˆå¯¹åº”çš„æ„é€ æ–¹æ³•ã€‚</p>
<figure data-type="image" tabindex="13"><img src="https://pic3.zhimg.com/80/v2-866a42cd03707c5095b44721be5e17ba_720w.jpg" alt="img" loading="lazy"></figure>
<p><strong>@Value</strong></p>
<p>è¿™ä¸ªæ³¨è§£ç”¨åœ¨ <strong>ç±»</strong> ä¸Šï¼Œä¼šç”Ÿæˆå«æ‰€æœ‰å‚æ•°çš„æ„é€ æ–¹æ³•ï¼Œget æ–¹æ³•ï¼Œæ­¤å¤–è¿˜æä¾›äº†equalsã€hashCodeã€toString æ–¹æ³•ã€‚</p>
<figure data-type="image" tabindex="14"><img src="https://pic1.zhimg.com/80/v2-159c62a7a9f545505246939abe6cfcc0_720w.jpg" alt="img" loading="lazy"></figure>
<p><strong>@SneakyThrows</strong></p>
<p>è¿™ä¸ªæ³¨è§£ç”¨åœ¨ <strong>æ–¹æ³•</strong> ä¸Šï¼Œå¯ä»¥å°†æ–¹æ³•ä¸­çš„ä»£ç ç”¨ try-catch è¯­å¥åŒ…è£¹èµ·æ¥ï¼Œæ•è·å¼‚å¸¸å¹¶åœ¨ catch ä¸­ç”¨ Lombok.sneakyThrow(e) æŠŠå¼‚å¸¸æŠ›å‡ºï¼Œå¯ä»¥ä½¿ç”¨ @SneakyThrows(Exception.class) çš„å½¢å¼æŒ‡å®šæŠ›å‡ºå“ªç§å¼‚å¸¸ï¼Œä¹Ÿä¼šç”Ÿæˆé»˜è®¤çš„æ„é€ æ–¹æ³•ã€‚</p>
<figure data-type="image" tabindex="15"><img src="https://pic3.zhimg.com/80/v2-2cd23582188406e3301a318d37bfa426_720w.jpg" alt="img" loading="lazy"></figure>
<p><strong>@Synchronized</strong></p>
<p>è¿™ä¸ªæ³¨è§£ç”¨åœ¨ <strong>ç±»æ–¹æ³•</strong> æˆ–è€… <strong>å®ä¾‹æ–¹æ³•</strong> ä¸Šï¼Œæ•ˆæœå’Œ synchronized å…³é”®å­—ç›¸åŒï¼ŒåŒºåˆ«åœ¨äºé”å¯¹è±¡ä¸åŒï¼Œå¯¹äºç±»æ–¹æ³•å’Œå®ä¾‹æ–¹æ³•ï¼Œsynchronized å…³é”®å­—çš„é”å¯¹è±¡åˆ†åˆ«æ˜¯ç±»çš„ class å¯¹è±¡å’Œ this å¯¹è±¡ï¼Œè€Œ @Synchronized çš„é”å¯¹è±¡åˆ†åˆ«æ˜¯ ç§æœ‰é™æ€ final å¯¹è±¡ lock å’Œ ç§æœ‰ final å¯¹è±¡ lockï¼Œå½“ç„¶ï¼Œä¹Ÿå¯ä»¥è‡ªå·±æŒ‡å®šé”å¯¹è±¡ï¼Œæ­¤å¤–ä¹Ÿæä¾›é»˜è®¤çš„æ„é€ æ–¹æ³•ã€‚</p>
<figure data-type="image" tabindex="16"><img src="https://pic4.zhimg.com/80/v2-7f38c354c3ca8ba9205ecbcaae04d1d3_720w.jpg" alt="img" loading="lazy"></figure>
</li>
</ol>
]]></content>
    </entry>
</feed>